"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7230],{3549:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Container-Orchestration/helm","title":"Helm","description":"Helm is the package manager for Kubernetes that helps you manage Kubernetes applications. Learn how to use Helm for deploying and managing applications on Kubernetes.","source":"@site/docs/Container-Orchestration/helm.md","sourceDirName":"Container-Orchestration","slug":"/Container-Orchestration/Helm","permalink":"/docs/docs/Container-Orchestration/Helm","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Container-Orchestration/helm.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Helm","description":"Helm is the package manager for Kubernetes that helps you manage Kubernetes applications. Learn how to use Helm for deploying and managing applications on Kubernetes.","slug":"/Container-Orchestration/Helm","keywords":["Helm","Kubernetes package manager","Helm charts","Kubernetes deployment","application packaging","container orchestration","DevOps automation","microservices deployment","Kubernetes applications","chart repository"]},"sidebar":"tutorialSidebar","previous":{"title":"Container-Orchestration","permalink":"/docs/docs/category/container-orchestration"},"next":{"title":"Cert Manager","permalink":"/docs/docs/category/cert-manager"}}');var t=a(4848),r=a(8453);const l={sidebar_position:1,title:"Helm",description:"Helm is the package manager for Kubernetes that helps you manage Kubernetes applications. Learn how to use Helm for deploying and managing applications on Kubernetes.",slug:"/Container-Orchestration/Helm",keywords:["Helm","Kubernetes package manager","Helm charts","Kubernetes deployment","application packaging","container orchestration","DevOps automation","microservices deployment","Kubernetes applications","chart repository"]},i="\u2693 Helm - The Package Manager for Kubernetes",o={},c=[{value:"Set Up Helm with Docker",id:"set-up-helm-with-docker",level:2},{value:"Basic Helm Operations",id:"basic-helm-operations",level:2},{value:"Repository Management",id:"repository-management",level:3},{value:"Installing Applications",id:"installing-applications",level:3},{value:"Creating Custom Helm Charts",id:"creating-custom-helm-charts",level:2},{value:"Basic Chart Structure",id:"basic-chart-structure",level:3},{value:"Chart.yaml Configuration",id:"chartyaml-configuration",level:3},{value:"Values Configuration",id:"values-configuration",level:3},{value:"Deployment Template",id:"deployment-template",level:3},{value:"Service Template",id:"service-template",level:3},{value:"ConfigMap Template",id:"configmap-template",level:3},{value:"Helper Templates",id:"helper-templates",level:3},{value:"Advanced Helm Features",id:"advanced-helm-features",level:2},{value:"Multi-Environment Deployments",id:"multi-environment-deployments",level:3},{value:"Deployment Commands",id:"deployment-commands",level:3},{value:"Helm Hooks and Tests",id:"helm-hooks-and-tests",level:2},{value:"Pre-install Hook",id:"pre-install-hook",level:3},{value:"Chart Tests",id:"chart-tests",level:3},{value:"Chart Repository Management",id:"chart-repository-management",level:2},{value:"Package and Publish Charts",id:"package-and-publish-charts",level:3},{value:"Private Chart Repository",id:"private-chart-repository",level:3},{value:"Helm Best Practices",id:"helm-best-practices",level:2},{value:"Chart Development Guidelines",id:"chart-development-guidelines",level:3},{value:"Security Best Practices",id:"security-best-practices",level:3},{value:"Monitoring Integration",id:"monitoring-integration",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-helm---the-package-manager-for-kubernetes",children:"\u2693 Helm - The Package Manager for Kubernetes"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Helm"})," is the ",(0,t.jsx)(n.strong,{children:"package manager for Kubernetes"})," that helps you ",(0,t.jsx)(n.strong,{children:"define"}),", ",(0,t.jsx)(n.strong,{children:"install"}),", and ",(0,t.jsx)(n.strong,{children:"upgrade"})," even the most complex Kubernetes applications. Helm uses ",(0,t.jsx)(n.strong,{children:"charts"})," to package Kubernetes resources and manage application lifecycles."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"set-up-helm-with-docker",children:"Set Up Helm with Docker"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create a file named docker-compose.yml"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  # Kubernetes cluster (using kind)\n  kind-cluster:\n    image: kindest/node:v1.28.0\n    container_name: kind-control-plane\n    restart: unless-stopped\n    privileged: true\n    ports:\n      - "6443:6443"\n      - "80:80"\n      - "443:443"\n    volumes:\n      - /var/lib/docker\n    environment:\n      - KUBECONFIG=/etc/kubernetes/admin.conf\n\n  # Helm client container\n  helm-client:\n    image: alpine/helm:3.13.0\n    container_name: helm-client\n    restart: unless-stopped\n    volumes:\n      - ./charts:/charts\n      - ./kubeconfig:/root/.kube\n      - ./helm-values:/values\n    working_dir: /charts\n    command: ["sleep", "infinity"]\n\n  # Chart Museum (Helm repository)\n  chartmuseum:\n    image: chartmuseum/chartmuseum:v0.16.0\n    container_name: chartmuseum\n    restart: unless-stopped\n    ports:\n      - "8080:8080"\n    environment:\n      - DEBUG=1\n      - STORAGE=local\n      - STORAGE_LOCAL_ROOTDIR=/charts\n      - PORT=8080\n      - BASIC_AUTH_USER=admin\n      - BASIC_AUTH_PASS=password\n    volumes:\n      - chartmuseum-data:/charts\n\nvolumes:\n  chartmuseum-data:\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create necessary directories:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p charts kubeconfig helm-values\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Start Helm environment:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Install Helm locally (alternative):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install helm\n\n# Linux\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# Windows\nchoco install kubernetes-helm\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"basic-helm-operations",children:"Basic Helm Operations"}),"\n",(0,t.jsx)(n.h3,{id:"repository-management",children:"Repository Management"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Add and manage Helm repositories:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Add popular repositories\nhelm repo add stable https://charts.helm.sh/stable\nhelm repo add bitnami https://charts.bitnami.com/bitnami\nhelm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\nhelm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm repo add grafana https://grafana.github.io/helm-charts\n\n# Update repositories\nhelm repo update\n\n# List repositories\nhelm repo list\n\n# Search for charts\nhelm search repo nginx\nhelm search repo prometheus\n"})}),"\n",(0,t.jsx)(n.h3,{id:"installing-applications",children:"Installing Applications"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Install applications using Helm:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install NGINX Ingress Controller\nhelm install nginx-ingress ingress-nginx/ingress-nginx \\\n  --namespace ingress-nginx \\\n  --create-namespace \\\n  --set controller.service.type=LoadBalancer\n\n# Install Prometheus monitoring stack\nhelm install prometheus prometheus-community/kube-prometheus-stack \\\n  --namespace monitoring \\\n  --create-namespace \\\n  --set grafana.adminPassword=admin123\n\n# Install PostgreSQL database\nhelm install postgres bitnami/postgresql \\\n  --namespace database \\\n  --create-namespace \\\n  --set auth.postgresPassword=postgres123 \\\n  --set primary.persistence.size=10Gi\n\n# List installed releases\nhelm list --all-namespaces\n\n# Get release status\nhelm status prometheus -n monitoring\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"creating-custom-helm-charts",children:"Creating Custom Helm Charts"}),"\n",(0,t.jsx)(n.h3,{id:"basic-chart-structure",children:"Basic Chart Structure"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create a new chart:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"helm create myapp\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Chart structure:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"myapp/\n\u251c\u2500\u2500 Chart.yaml          # Chart metadata\n\u251c\u2500\u2500 values.yaml         # Default configuration values\n\u251c\u2500\u2500 charts/             # Chart dependencies\n\u251c\u2500\u2500 templates/          # Kubernetes manifest templates\n\u2502   \u251c\u2500\u2500 deployment.yaml\n\u2502   \u251c\u2500\u2500 service.yaml\n\u2502   \u251c\u2500\u2500 ingress.yaml\n\u2502   \u251c\u2500\u2500 configmap.yaml\n\u2502   \u251c\u2500\u2500 secret.yaml\n\u2502   \u251c\u2500\u2500 serviceaccount.yaml\n\u2502   \u251c\u2500\u2500 _helpers.tpl    # Template helpers\n\u2502   \u251c\u2500\u2500 hpa.yaml\n\u2502   \u251c\u2500\u2500 NOTES.txt       # Installation notes\n\u2502   \u2514\u2500\u2500 tests/\n\u2502       \u2514\u2500\u2500 test-connection.yaml\n\u2514\u2500\u2500 .helmignore         # Files to ignore\n"})}),"\n",(0,t.jsx)(n.h3,{id:"chartyaml-configuration",children:"Chart.yaml Configuration"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/Chart.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v2\nname: myapp\ndescription: A Helm chart for MyApp - a sample web application\ntype: application\nversion: 0.1.0\nappVersion: "1.0.0"\nhome: https://github.com/myorg/myapp\nsources:\n  - https://github.com/myorg/myapp\nmaintainers:\n  - name: DevOps Team\n    email: devops@myorg.com\nkeywords:\n  - web\n  - application\n  - microservice\nannotations:\n  category: Application\ndependencies:\n  - name: postgresql\n    version: "12.x.x"\n    repository: https://charts.bitnami.com/bitnami\n    condition: postgresql.enabled\n  - name: redis\n    version: "17.x.x"\n    repository: https://charts.bitnami.com/bitnami\n    condition: redis.enabled\n'})}),"\n",(0,t.jsx)(n.h3,{id:"values-configuration",children:"Values Configuration"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/values.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# Default values for myapp\nreplicaCount: 2\n\nimage:\n  repository: myorg/myapp\n  pullPolicy: IfNotPresent\n  tag: "1.0.0"\n\nimagePullSecrets: []\nnameOverride: ""\nfullnameOverride: ""\n\nserviceAccount:\n  create: true\n  annotations: {}\n  name: ""\n\npodAnnotations: {}\n\npodSecurityContext:\n  fsGroup: 2000\n\nsecurityContext:\n  capabilities:\n    drop:\n    - ALL\n  readOnlyRootFilesystem: true\n  runAsNonRoot: true\n  runAsUser: 1000\n\nservice:\n  type: ClusterIP\n  port: 80\n  targetPort: 8080\n\ningress:\n  enabled: true\n  className: "nginx"\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\n    cert-manager.io/cluster-issuer: "letsencrypt-prod"\n  hosts:\n    - host: myapp.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n  tls:\n    - secretName: myapp-tls\n      hosts:\n        - myapp.example.com\n\nresources:\n  limits:\n    cpu: 500m\n    memory: 512Mi\n  requests:\n    cpu: 250m\n    memory: 256Mi\n\nautoscaling:\n  enabled: true\n  minReplicas: 2\n  maxReplicas: 10\n  targetCPUUtilizationPercentage: 80\n  targetMemoryUtilizationPercentage: 80\n\nnodeSelector: {}\n\ntolerations: []\n\naffinity: {}\n\n# Application configuration\nconfig:\n  environment: production\n  logLevel: info\n  database:\n    host: ""\n    port: 5432\n    name: myapp\n    user: myapp\n  redis:\n    host: ""\n    port: 6379\n  features:\n    enableMetrics: true\n    enableTracing: true\n\n# External dependencies\npostgresql:\n  enabled: true\n  auth:\n    postgresPassword: "postgres123"\n    username: "myapp"\n    password: "myapp123"\n    database: "myapp"\n  primary:\n    persistence:\n      enabled: true\n      size: 10Gi\n\nredis:\n  enabled: true\n  auth:\n    enabled: false\n  master:\n    persistence:\n      enabled: true\n      size: 5Gi\n\n# Monitoring\nmonitoring:\n  enabled: true\n  serviceMonitor:\n    enabled: true\n    interval: 30s\n    path: /metrics\n\n# Health checks\nhealthCheck:\n  enabled: true\n  livenessProbe:\n    httpGet:\n      path: /health\n      port: http\n    initialDelaySeconds: 30\n    periodSeconds: 10\n  readinessProbe:\n    httpGet:\n      path: /ready\n      port: http\n    initialDelaySeconds: 5\n    periodSeconds: 5\n'})}),"\n",(0,t.jsx)(n.h3,{id:"deployment-template",children:"Deployment Template"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/deployment.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ include "myapp.fullname" . }}\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\nspec:\n  {{- if not .Values.autoscaling.enabled }}\n  replicas: {{ .Values.replicaCount }}\n  {{- end }}\n  selector:\n    matchLabels:\n      {{- include "myapp.selectorLabels" . | nindent 6 }}\n  template:\n    metadata:\n      annotations:\n        checksum/config: {{ include (print $.Template.BasePath "/configmap.yaml") . | sha256sum }}\n        checksum/secret: {{ include (print $.Template.BasePath "/secret.yaml") . | sha256sum }}\n        {{- with .Values.podAnnotations }}\n        {{- toYaml . | nindent 8 }}\n        {{- end }}\n      labels:\n        {{- include "myapp.selectorLabels" . | nindent 8 }}\n    spec:\n      {{- with .Values.imagePullSecrets }}\n      imagePullSecrets:\n        {{- toYaml . | nindent 8 }}\n      {{- end }}\n      serviceAccountName: {{ include "myapp.serviceAccountName" . }}\n      securityContext:\n        {{- toYaml .Values.podSecurityContext | nindent 8 }}\n      containers:\n        - name: {{ .Chart.Name }}\n          securityContext:\n            {{- toYaml .Values.securityContext | nindent 12 }}\n          image: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"\n          imagePullPolicy: {{ .Values.image.pullPolicy }}\n          ports:\n            - name: http\n              containerPort: {{ .Values.service.targetPort }}\n              protocol: TCP\n          env:\n            - name: ENVIRONMENT\n              value: {{ .Values.config.environment }}\n            - name: LOG_LEVEL\n              value: {{ .Values.config.logLevel }}\n            - name: DATABASE_HOST\n              value: {{ include "myapp.databaseHost" . }}\n            - name: DATABASE_PORT\n              value: "{{ .Values.config.database.port }}"\n            - name: DATABASE_NAME\n              value: {{ .Values.config.database.name }}\n            - name: DATABASE_USER\n              valueFrom:\n                secretKeyRef:\n                  name: {{ include "myapp.fullname" . }}-secret\n                  key: database-user\n            - name: DATABASE_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: {{ include "myapp.fullname" . }}-secret\n                  key: database-password\n            - name: REDIS_HOST\n              value: {{ include "myapp.redisHost" . }}\n            - name: REDIS_PORT\n              value: "{{ .Values.config.redis.port }}"\n          {{- if .Values.healthCheck.enabled }}\n          livenessProbe:\n            {{- toYaml .Values.healthCheck.livenessProbe | nindent 12 }}\n          readinessProbe:\n            {{- toYaml .Values.healthCheck.readinessProbe | nindent 12 }}\n          {{- end }}\n          resources:\n            {{- toYaml .Values.resources | nindent 12 }}\n          volumeMounts:\n            - name: config\n              mountPath: /app/config\n              readOnly: true\n      volumes:\n        - name: config\n          configMap:\n            name: {{ include "myapp.fullname" . }}-config\n      {{- with .Values.nodeSelector }}\n      nodeSelector:\n        {{- toYaml . | nindent 8 }}\n      {{- end }}\n      {{- with .Values.affinity }}\n      affinity:\n        {{- toYaml . | nindent 8 }}\n      {{- end }}\n      {{- with .Values.tolerations }}\n      tolerations:\n        {{- toYaml . | nindent 8 }}\n      {{- end }}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"service-template",children:"Service Template"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/service.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Service\nmetadata:\n  name: {{ include "myapp.fullname" . }}\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\n  {{- if .Values.monitoring.enabled }}\n  annotations:\n    prometheus.io/scrape: "true"\n    prometheus.io/port: "{{ .Values.service.targetPort }}"\n    prometheus.io/path: "/metrics"\n  {{- end }}\nspec:\n  type: {{ .Values.service.type }}\n  ports:\n    - port: {{ .Values.service.port }}\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    {{- include "myapp.selectorLabels" . | nindent 4 }}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"configmap-template",children:"ConfigMap Template"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/configmap.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: {{ include "myapp.fullname" . }}-config\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\ndata:\n  app.yaml: |\n    environment: {{ .Values.config.environment }}\n    logLevel: {{ .Values.config.logLevel }}\n    features:\n      enableMetrics: {{ .Values.config.features.enableMetrics }}\n      enableTracing: {{ .Values.config.features.enableTracing }}\n    database:\n      host: {{ include "myapp.databaseHost" . }}\n      port: {{ .Values.config.database.port }}\n      name: {{ .Values.config.database.name }}\n    redis:\n      host: {{ include "myapp.redisHost" . }}\n      port: {{ .Values.config.redis.port }}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"helper-templates",children:"Helper Templates"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/_helpers.tpl:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{{/*\nExpand the name of the chart.\n*/}}\n{{- define "myapp.name" -}}\n{{- default .Chart.Name .Values.nameOverride | trunc 63 | trimSuffix "-" }}\n{{- end }}\n\n{{/*\nCreate a default fully qualified app name.\n*/}}\n{{- define "myapp.fullname" -}}\n{{- if .Values.fullnameOverride }}\n{{- .Values.fullnameOverride | trunc 63 | trimSuffix "-" }}\n{{- else }}\n{{- $name := default .Chart.Name .Values.nameOverride }}\n{{- if contains $name .Release.Name }}\n{{- .Release.Name | trunc 63 | trimSuffix "-" }}\n{{- else }}\n{{- printf "%s-%s" .Release.Name $name | trunc 63 | trimSuffix "-" }}\n{{- end }}\n{{- end }}\n{{- end }}\n\n{{/*\nCreate chart name and version as used by the chart label.\n*/}}\n{{- define "myapp.chart" -}}\n{{- printf "%s-%s" .Chart.Name .Chart.Version | replace "+" "_" | trunc 63 | trimSuffix "-" }}\n{{- end }}\n\n{{/*\nCommon labels\n*/}}\n{{- define "myapp.labels" -}}\nhelm.sh/chart: {{ include "myapp.chart" . }}\n{{ include "myapp.selectorLabels" . }}\n{{- if .Chart.AppVersion }}\napp.kubernetes.io/version: {{ .Chart.AppVersion | quote }}\n{{- end }}\napp.kubernetes.io/managed-by: {{ .Release.Service }}\n{{- end }}\n\n{{/*\nSelector labels\n*/}}\n{{- define "myapp.selectorLabels" -}}\napp.kubernetes.io/name: {{ include "myapp.name" . }}\napp.kubernetes.io/instance: {{ .Release.Name }}\n{{- end }}\n\n{{/*\nCreate the name of the service account to use\n*/}}\n{{- define "myapp.serviceAccountName" -}}\n{{- if .Values.serviceAccount.create }}\n{{- default (include "myapp.fullname" .) .Values.serviceAccount.name }}\n{{- else }}\n{{- default "default" .Values.serviceAccount.name }}\n{{- end }}\n{{- end }}\n\n{{/*\nDatabase host helper\n*/}}\n{{- define "myapp.databaseHost" -}}\n{{- if .Values.postgresql.enabled }}\n{{- printf "%s-postgresql" (include "myapp.fullname" .) }}\n{{- else }}\n{{- .Values.config.database.host }}\n{{- end }}\n{{- end }}\n\n{{/*\nRedis host helper\n*/}}\n{{- define "myapp.redisHost" -}}\n{{- if .Values.redis.enabled }}\n{{- printf "%s-redis-master" (include "myapp.fullname" .) }}\n{{- else }}\n{{- .Values.config.redis.host }}\n{{- end }}\n{{- end }}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"advanced-helm-features",children:"Advanced Helm Features"}),"\n",(0,t.jsx)(n.h3,{id:"multi-environment-deployments",children:"Multi-Environment Deployments"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create environment-specific values files:"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"helm-values/values-dev.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'replicaCount: 1\n\nimage:\n  tag: "dev-latest"\n\nconfig:\n  environment: development\n  logLevel: debug\n\nresources:\n  limits:\n    cpu: 200m\n    memory: 256Mi\n  requests:\n    cpu: 100m\n    memory: 128Mi\n\nautoscaling:\n  enabled: false\n\ningress:\n  hosts:\n    - host: myapp-dev.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n\npostgresql:\n  primary:\n    persistence:\n      size: 5Gi\n\nredis:\n  master:\n    persistence:\n      size: 2Gi\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"helm-values/values-prod.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'replicaCount: 3\n\nimage:\n  tag: "1.0.0"\n\nconfig:\n  environment: production\n  logLevel: warn\n\nresources:\n  limits:\n    cpu: 1000m\n    memory: 1Gi\n  requests:\n    cpu: 500m\n    memory: 512Mi\n\nautoscaling:\n  enabled: true\n  minReplicas: 3\n  maxReplicas: 20\n\ningress:\n  hosts:\n    - host: myapp.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n\npostgresql:\n  primary:\n    persistence:\n      size: 50Gi\n\nredis:\n  master:\n    persistence:\n      size: 10Gi\n\nnodeSelector:\n  node-type: production\n\ntolerations:\n  - key: "production"\n    operator: "Equal"\n    value: "true"\n    effect: "NoSchedule"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"deployment-commands",children:"Deployment Commands"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Deploy to different environments:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Development deployment\nhelm install myapp-dev ./charts/myapp \\\n  --namespace dev \\\n  --create-namespace \\\n  --values helm-values/values-dev.yaml\n\n# Production deployment\nhelm install myapp-prod ./charts/myapp \\\n  --namespace prod \\\n  --create-namespace \\\n  --values helm-values/values-prod.yaml\n\n# Upgrade deployment\nhelm upgrade myapp-prod ./charts/myapp \\\n  --namespace prod \\\n  --values helm-values/values-prod.yaml \\\n  --set image.tag=1.1.0\n\n# Rollback deployment\nhelm rollback myapp-prod 1 --namespace prod\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"helm-hooks-and-tests",children:"Helm Hooks and Tests"}),"\n",(0,t.jsx)(n.h3,{id:"pre-install-hook",children:"Pre-install Hook"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/pre-install-job.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: {{ include "myapp.fullname" . }}-pre-install\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\n  annotations:\n    "helm.sh/hook": pre-install\n    "helm.sh/hook-weight": "-5"\n    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded\nspec:\n  template:\n    metadata:\n      name: {{ include "myapp.fullname" . }}-pre-install\n    spec:\n      restartPolicy: Never\n      containers:\n      - name: pre-install\n        image: postgres:15-alpine\n        command:\n          - /bin/sh\n          - -c\n          - |\n            echo "Running pre-install checks..."\n            \n            # Wait for database to be ready\n            until pg_isready -h {{ include "myapp.databaseHost" . }} -p {{ .Values.config.database.port }}; do\n              echo "Waiting for database..."\n              sleep 2\n            done\n            \n            echo "Database is ready!"\n            \n            # Run database migrations\n            echo "Running database migrations..."\n            # Add your migration commands here\n            \n            echo "Pre-install completed successfully!"\n        env:\n          - name: PGHOST\n            value: {{ include "myapp.databaseHost" . }}\n          - name: PGPORT\n            value: "{{ .Values.config.database.port }}"\n          - name: PGUSER\n            value: {{ .Values.config.database.user }}\n          - name: PGPASSWORD\n            valueFrom:\n              secretKeyRef:\n                name: {{ include "myapp.fullname" . }}-secret\n                key: database-password\n'})}),"\n",(0,t.jsx)(n.h3,{id:"chart-tests",children:"Chart Tests"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/tests/test-connection.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: "{{ include "myapp.fullname" . }}-test-connection"\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\n  annotations:\n    "helm.sh/hook": test\nspec:\n  restartPolicy: Never\n  containers:\n    - name: wget\n      image: busybox:1.35\n      command: [\'wget\']\n      args: [\'{{ include "myapp.fullname" . }}:{{ .Values.service.port }}/health\']\n    - name: database-test\n      image: postgres:15-alpine\n      command:\n        - /bin/sh\n        - -c\n        - |\n          echo "Testing database connection..."\n          pg_isready -h {{ include "myapp.databaseHost" . }} -p {{ .Values.config.database.port }}\n          echo "Database connection test passed!"\n      env:\n        - name: PGHOST\n          value: {{ include "myapp.databaseHost" . }}\n        - name: PGPORT\n          value: "{{ .Values.config.database.port }}"\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Run tests:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"helm test myapp-dev --namespace dev\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"chart-repository-management",children:"Chart Repository Management"}),"\n",(0,t.jsx)(n.h3,{id:"package-and-publish-charts",children:"Package and Publish Charts"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Package chart:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Package the chart\nhelm package charts/myapp\n\n# Generate index\nhelm repo index . --url https://charts.example.com\n\n# Upload to chart repository (example with ChartMuseum)\ncurl --data-binary "@myapp-0.1.0.tgz" \\\n  -u admin:password \\\n  http://localhost:8080/api/charts\n'})}),"\n",(0,t.jsx)(n.h3,{id:"private-chart-repository",children:"Private Chart Repository"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Set up private repository:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Add private repository\nhelm repo add myorg-charts http://localhost:8080 \\\n  --username admin \\\n  --password password\n\n# Install from private repository\nhelm install myapp myorg-charts/myapp \\\n  --namespace production \\\n  --create-namespace\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"helm-best-practices",children:"Helm Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"chart-development-guidelines",children:"Chart Development Guidelines"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/.helmignore:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Patterns to ignore when building packages\n.git/\n.gitignore\n.DS_Store\n*.swp\n*.bak\n*.tmp\n*.orig\n*~\n.project\n.idea/\n*.tmproj\n.vscode/\n"})}),"\n",(0,t.jsx)(n.h3,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/network-policy.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{{- if .Values.networkPolicy.enabled }}\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: {{ include "myapp.fullname" . }}\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\nspec:\n  podSelector:\n    matchLabels:\n      {{- include "myapp.selectorLabels" . | nindent 6 }}\n  policyTypes:\n    - Ingress\n    - Egress\n  ingress:\n    - from:\n        - namespaceSelector:\n            matchLabels:\n              name: ingress-nginx\n      ports:\n        - protocol: TCP\n          port: {{ .Values.service.targetPort }}\n  egress:\n    - to:\n        - namespaceSelector:\n            matchLabels:\n              name: database\n      ports:\n        - protocol: TCP\n          port: 5432\n    - to:\n        - namespaceSelector:\n            matchLabels:\n              name: redis\n      ports:\n        - protocol: TCP\n          port: 6379\n{{- end }}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"monitoring-integration",children:"Monitoring Integration"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Create charts/myapp/templates/servicemonitor.yaml:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{{- if and .Values.monitoring.enabled .Values.monitoring.serviceMonitor.enabled }}\napiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  name: {{ include "myapp.fullname" . }}\n  labels:\n    {{- include "myapp.labels" . | nindent 4 }}\nspec:\n  selector:\n    matchLabels:\n      {{- include "myapp.selectorLabels" . | nindent 6 }}\n  endpoints:\n    - port: http\n      path: {{ .Values.monitoring.serviceMonitor.path }}\n      interval: {{ .Values.monitoring.serviceMonitor.interval }}\n{{- end }}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Application Packaging"}),": Package complex Kubernetes applications with dependencies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-Environment Deployments"}),": Deploy applications across dev, staging, and production"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration Management"}),": Manage application configurations across environments"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dependency Management"}),": Handle application dependencies and service relationships"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Release Management"}),": Version control and rollback capabilities for deployments"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Template Reusability"}),": Create reusable templates for similar applications"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u2705 Helm is now configured for comprehensive Kubernetes application management!"})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>i});var s=a(6540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);