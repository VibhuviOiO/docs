"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7493],{198:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"Infrastructure/harbor","title":"Harbor Registry","description":"Harbor is a cloud-native container registry that stores, signs, and scans container images. Learn how to deploy Harbor for secure container image management.","source":"@site/docs/Infrastructure/harbor.md","sourceDirName":"Infrastructure","slug":"/Infrastructure/Harbor","permalink":"/docs/Infrastructure/Harbor","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Infrastructure/harbor.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Harbor Registry","description":"Harbor is a cloud-native container registry that stores, signs, and scans container images. Learn how to deploy Harbor for secure container image management.","slug":"/Infrastructure/Harbor","keywords":["Harbor","container registry","Docker registry","image scanning","vulnerability scanning","container security"]},"sidebar":"tutorialSidebar","previous":{"title":"Cert-Manager","permalink":"/docs/Infrastructure/CertManager"},"next":{"title":"Terraform","permalink":"/docs/Infrastructure/Terraform"}}');var s=r(4848),i=r(8453);const t={sidebar_position:4,title:"Harbor Registry",description:"Harbor is a cloud-native container registry that stores, signs, and scans container images. Learn how to deploy Harbor for secure container image management.",slug:"/Infrastructure/Harbor",keywords:["Harbor","container registry","Docker registry","image scanning","vulnerability scanning","container security"]},o="\ud83d\udea2 Harbor Container Registry",c={},l=[{value:"\ud83d\udd27 Installation with Helm",id:"-installation-with-helm",level:2},{value:"\u25b6\ufe0f Sample Output",id:"\ufe0f-sample-output",level:2},{value:"\ud83d\udc33 Docker Configuration",id:"-docker-configuration",level:2},{value:"\ud83d\udd0d Vulnerability Scanning",id:"-vulnerability-scanning",level:2},{value:"\ud83d\udd12 Project Configuration",id:"-project-configuration",level:2},{value:"\u2638\ufe0f Kubernetes Integration",id:"\ufe0f-kubernetes-integration",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-harbor-container-registry",children:"\ud83d\udea2 Harbor Container Registry"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Harbor"})," is a ",(0,s.jsx)(n.strong,{children:"cloud-native container registry"})," that stores, signs, and scans ",(0,s.jsx)(n.strong,{children:"container images"})," with ",(0,s.jsx)(n.strong,{children:"vulnerability scanning"})," and ",(0,s.jsx)(n.strong,{children:"access control"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-installation-with-helm",children:"\ud83d\udd27 Installation with Helm"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Add Harbor Helm repository:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add harbor https://helm.goharbor.io\nhelm repo update\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Create values.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'expose:\n  type: ingress\n  tls:\n    enabled: true\n    certSource: secret\n    secret:\n      secretName: harbor-tls\n  ingress:\n    hosts:\n      core: harbor.yourdomain.com\n    className: nginx\n    annotations:\n      cert-manager.io/cluster-issuer: "letsencrypt-prod"\n      nginx.ingress.kubernetes.io/ssl-redirect: "true"\n      nginx.ingress.kubernetes.io/proxy-body-size: "0"\n\nexternalURL: https://harbor.yourdomain.com\n\nharborAdminPassword: "HarborAdmin123"\n\ndatabase:\n  type: internal\n\nredis:\n  type: internal\n\ntrivy:\n  enabled: true\n\nnotary:\n  enabled: false\n\npersistence:\n  enabled: true\n  resourcePolicy: "keep"\n  persistentVolumeClaim:\n    registry:\n      size: 100Gi\n    database:\n      size: 10Gi\n    redis:\n      size: 1Gi\n    trivy:\n      size: 5Gi\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Install Harbor:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create namespace harbor\nhelm install harbor harbor/harbor -n harbor -f values.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-sample-output",children:"\u25b6\ufe0f Sample Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ kubectl get pods -n harbor\nNAME                                    READY   STATUS    RESTARTS   AGE\nharbor-core-7d9c8f8b9c-xyz12           1/1     Running   0          5m\nharbor-database-0                       1/1     Running   0          5m\nharbor-jobservice-6b8c9d7f8d-abc34     1/1     Running   0          5m\nharbor-portal-5f7b8c9d6e-def56         1/1     Running   0          5m\nharbor-redis-0                          1/1     Running   0          5m\nharbor-registry-7c8d9e0f1a-ghi78       2/2     Running   0          5m\nharbor-trivy-0                          1/1     Running   0          5m\n\n$ kubectl get ingress -n harbor\nNAME           CLASS   HOSTS                   ADDRESS         PORTS     AGE\nharbor-ingress nginx   harbor.yourdomain.com   192.168.1.100   80, 443   5m\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-docker-configuration",children:"\ud83d\udc33 Docker Configuration"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Configure Docker to use Harbor:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Login to Harbor\ndocker login harbor.yourdomain.com\nUsername: admin\nPassword: HarborAdmin123\n\n# Tag and push image\ndocker tag myapp:latest harbor.yourdomain.com/library/myapp:latest\ndocker push harbor.yourdomain.com/library/myapp:latest\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-vulnerability-scanning",children:"\ud83d\udd0d Vulnerability Scanning"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Enable automatic scanning:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Harbor automatically scans images with Trivy\n# View scan results in Harbor UI:\n# https://harbor.yourdomain.com\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-project-configuration",children:"\ud83d\udd12 Project Configuration"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Create project via API:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://harbor.yourdomain.com/api/v2.0/projects" \\\n  -H "Authorization: Basic $(echo -n admin:HarborAdmin123 | base64)" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "project_name": "myproject",\n    "public": false,\n    "storage_limit": -1,\n    "registry_id": null\n  }\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-kubernetes-integration",children:"\u2638\ufe0f Kubernetes Integration"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Create image pull secret:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret docker-registry harbor-secret \\\n  --docker-server=harbor.yourdomain.com \\\n  --docker-username=admin \\\n  --docker-password=HarborAdmin123 \\\n  --docker-email=admin@yourdomain.com\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Use in deployment:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: \n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var a=r(6540);const s={},i=a.createContext(s);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);