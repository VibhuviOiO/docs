"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[215],{102:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"CI-CD/CI/teamcity","title":"TeamCity","description":"TeamCity is a powerful CI/CD server by JetBrains that provides comprehensive build management and deployment automation. Learn how to set up TeamCity with Docker.","source":"@site/docs/CI-CD/CI/teamcity.md","sourceDirName":"CI-CD/CI","slug":"/CI-CD/TeamCity","permalink":"/docs/docs/CI-CD/TeamCity","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CI/teamcity.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"TeamCity","description":"TeamCity is a powerful CI/CD server by JetBrains that provides comprehensive build management and deployment automation. Learn how to set up TeamCity with Docker.","slug":"/CI-CD/TeamCity","keywords":["TeamCity","JetBrains TeamCity","CI/CD server","build automation","continuous integration","deployment automation","build agents","build configurations","DevOps automation","enterprise CI/CD"]},"sidebar":"tutorialSidebar","previous":{"title":"CircleCI","permalink":"/docs/docs/CI-CD/CircleCI"},"next":{"title":"GoCD","permalink":"/docs/docs/CI-CD/GoCD"}}');var s=t(4848),r=t(8453);const a={sidebar_position:6,title:"TeamCity",description:"TeamCity is a powerful CI/CD server by JetBrains that provides comprehensive build management and deployment automation. Learn how to set up TeamCity with Docker.",slug:"/CI-CD/TeamCity",keywords:["TeamCity","JetBrains TeamCity","CI/CD server","build automation","continuous integration","deployment automation","build agents","build configurations","DevOps automation","enterprise CI/CD"]},o="\ud83c\udfd7\ufe0f TeamCity - Professional CI/CD Server by JetBrains",l={},d=[{value:"Set Up TeamCity with Docker",id:"set-up-teamcity-with-docker",level:2},{value:"Build Configuration Examples",id:"build-configuration-examples",level:2},{value:"Basic Build Configuration (Kotlin DSL)",id:"basic-build-configuration-kotlin-dsl",level:3},{value:"Multi-Environment Pipeline",id:"multi-environment-pipeline",level:3},{value:"Custom Build Agent",id:"custom-build-agent",level:2},{value:"Dockerfile for Custom Agent",id:"dockerfile-for-custom-agent",level:3},{value:"Advanced Build Features",id:"advanced-build-features",level:2},{value:"Parallel Build Configuration",id:"parallel-build-configuration",level:3},{value:"Build Templates",id:"build-templates",level:3},{value:"Integration with External Tools",id:"integration-with-external-tools",level:2},{value:"Slack Notifications",id:"slack-notifications",level:3},{value:"SonarQube Integration",id:"sonarqube-integration",level:3},{value:"Monitoring and Reporting",id:"monitoring-and-reporting",level:2},{value:"Build Metrics Dashboard",id:"build-metrics-dashboard",level:3},{value:"Custom Build Report",id:"custom-build-report",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\ufe0f-teamcity---professional-cicd-server-by-jetbrains",children:"\ud83c\udfd7\ufe0f TeamCity - Professional CI/CD Server by JetBrains"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"TeamCity"})," is a powerful ",(0,s.jsx)(e.strong,{children:"continuous integration and deployment server"})," developed by JetBrains. It provides comprehensive ",(0,s.jsx)(e.strong,{children:"build management"}),", ",(0,s.jsx)(e.strong,{children:"testing automation"}),", and ",(0,s.jsx)(e.strong,{children:"deployment pipelines"})," with an intuitive web interface and extensive plugin ecosystem."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"set-up-teamcity-with-docker",children:"Set Up TeamCity with Docker"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create a file named docker-compose.yml"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  teamcity-server:\n    image: jetbrains/teamcity-server:2023.11\n    container_name: teamcity-server\n    restart: unless-stopped\n    ports:\n      - "8111:8111"\n    volumes:\n      - teamcity-server-datadir:/data/teamcity_server/datadir\n      - teamcity-server-logs:/opt/teamcity/logs\n    environment:\n      - TEAMCITY_SERVER_MEM_OPTS=-Xmx2g -XX:ReservedCodeCacheSize=640m\n    depends_on:\n      - teamcity-db\n\n  teamcity-agent:\n    image: jetbrains/teamcity-agent:2023.11\n    container_name: teamcity-agent-1\n    restart: unless-stopped\n    environment:\n      - SERVER_URL=http://teamcity-server:8111\n      - AGENT_NAME=docker-agent-1\n    volumes:\n      - teamcity-agent-conf:/data/teamcity_agent/conf\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker:ro\n    depends_on:\n      - teamcity-server\n\n  teamcity-agent-2:\n    image: jetbrains/teamcity-agent:2023.11\n    container_name: teamcity-agent-2\n    restart: unless-stopped\n    environment:\n      - SERVER_URL=http://teamcity-server:8111\n      - AGENT_NAME=docker-agent-2\n    volumes:\n      - teamcity-agent-2-conf:/data/teamcity_agent/conf\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker:ro\n    depends_on:\n      - teamcity-server\n\n  teamcity-db:\n    image: postgres:15\n    container_name: teamcity-postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_DB=teamcity\n      - POSTGRES_USER=teamcity\n      - POSTGRES_PASSWORD=teamcity_password\n    volumes:\n      - teamcity-postgres-data:/var/lib/postgresql/data\n    ports:\n      - "5432:5432"\n\nvolumes:\n  teamcity-server-datadir:\n  teamcity-server-logs:\n  teamcity-agent-conf:\n  teamcity-agent-2-conf:\n  teamcity-postgres-data:\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Start TeamCity:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Access TeamCity:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'echo "TeamCity Server: http://localhost:8111"\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"build-configuration-examples",children:"Build Configuration Examples"}),"\n",(0,s.jsx)(e.h3,{id:"basic-build-configuration-kotlin-dsl",children:"Basic Build Configuration (Kotlin DSL)"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create .teamcity/settings.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'import jetbrains.buildServer.configs.kotlin.*\nimport jetbrains.buildServer.configs.kotlin.buildFeatures.dockerSupport\nimport jetbrains.buildServer.configs.kotlin.buildSteps.*\nimport jetbrains.buildServer.configs.kotlin.triggers.vcs\n\nversion = "2023.11"\n\nproject {\n    buildType(Build)\n    buildType(Test)\n    buildType(Deploy)\n    \n    buildTypesOrder = arrayListOf(Build, Test, Deploy)\n}\n\nobject Build : BuildType({\n    name = "Build Application"\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        script {\n            name = "Install Dependencies"\n            scriptContent = """\n                npm ci\n                echo "Dependencies installed successfully"\n            """.trimIndent()\n        }\n        \n        script {\n            name = "Build Application"\n            scriptContent = """\n                npm run build\n                echo "Build completed successfully"\n            """.trimIndent()\n        }\n        \n        dockerCommand {\n            name = "Build Docker Image"\n            commandType = build {\n                source = file {\n                    path = "Dockerfile"\n                }\n                namesAndTags = "myapp:%build.number%"\n                commandArgs = "--pull"\n            }\n        }\n    }\n    \n    triggers {\n        vcs {\n            branchFilter = "+:*"\n        }\n    }\n    \n    features {\n        dockerSupport {\n            loginToRegistry = on {\n                dockerRegistryId = "PROJECT_EXT_DOCKER_REGISTRY"\n            }\n        }\n    }\n    \n    artifactRules = """\n        dist/** => dist.zip\n        Dockerfile => .\n    """.trimIndent()\n})\n\nobject Test : BuildType({\n    name = "Run Tests"\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        script {\n            name = "Unit Tests"\n            scriptContent = """\n                npm test -- --coverage --watchAll=false\n                echo "Unit tests completed"\n            """.trimIndent()\n        }\n        \n        script {\n            name = "Integration Tests"\n            scriptContent = """\n                npm run test:integration\n                echo "Integration tests completed"\n            """.trimIndent()\n        }\n        \n        script {\n            name = "Security Scan"\n            scriptContent = """\n                npm audit --audit-level high\n                npm run security:scan\n            """.trimIndent()\n        }\n    }\n    \n    dependencies {\n        snapshot(Build) {\n            onDependencyFailure = FailureAction.FAIL_TO_START\n        }\n    }\n    \n    features {\n        feature {\n            type = "xml-report-plugin"\n            param("xmlReportParsing.reportType", "junit")\n            param("xmlReportParsing.reportDirs", "test-results/*.xml")\n        }\n    }\n})\n\nobject Deploy : BuildType({\n    name = "Deploy to Staging"\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        dockerCommand {\n            name = "Push Docker Image"\n            commandType = push {\n                namesAndTags = "myregistry.com/myapp:%build.number%"\n            }\n        }\n        \n        script {\n            name = "Deploy to Kubernetes"\n            scriptContent = """\n                kubectl set image deployment/myapp myapp=myregistry.com/myapp:%build.number% -n staging\n                kubectl rollout status deployment/myapp -n staging --timeout=300s\n            """.trimIndent()\n        }\n        \n        script {\n            name = "Health Check"\n            scriptContent = """\n                sleep 30\n                curl -f http://staging.myapp.com/health || exit 1\n                echo "Deployment successful and healthy"\n            """.trimIndent()\n        }\n    }\n    \n    dependencies {\n        snapshot(Test) {\n            onDependencyFailure = FailureAction.FAIL_TO_START\n        }\n    }\n    \n    params {\n        param("env.KUBECONFIG", "/opt/teamcity/.kube/config")\n    }\n})\n'})}),"\n",(0,s.jsx)(e.h3,{id:"multi-environment-pipeline",children:"Multi-Environment Pipeline"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create .teamcity/pipeline.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'import jetbrains.buildServer.configs.kotlin.*\nimport jetbrains.buildServer.configs.kotlin.buildSteps.*\nimport jetbrains.buildServer.configs.kotlin.triggers.vcs\n\nobject Pipeline : BuildType({\n    name = "Full Pipeline"\n    type = BuildTypeSettings.Type.DEPLOYMENT\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        // Build Stage\n        script {\n            name = "Build and Test"\n            scriptContent = """\n                echo "=== Building Application ==="\n                docker build -t myapp:%build.number% .\n                \n                echo "=== Running Tests ==="\n                docker run --rm myapp:%build.number% npm test\n                \n                echo "=== Security Scan ==="\n                docker run --rm -v $(pwd):/app clair-scanner myapp:%build.number%\n            """.trimIndent()\n        }\n        \n        // Deploy to Development\n        script {\n            name = "Deploy to Development"\n            scriptContent = """\n                echo "=== Deploying to Development ==="\n                helm upgrade --install myapp-dev ./helm/myapp \\\n                  --namespace development \\\n                  --set image.tag=%build.number% \\\n                  --set environment=development \\\n                  --wait --timeout=300s\n                \n                echo "=== Health Check ==="\n                kubectl wait --for=condition=ready pod -l app=myapp -n development --timeout=300s\n            """.trimIndent()\n        }\n        \n        // Integration Tests\n        script {\n            name = "Integration Tests"\n            scriptContent = """\n                echo "=== Running Integration Tests ==="\n                newman run tests/integration/api-tests.json \\\n                  --environment tests/integration/dev-environment.json \\\n                  --reporters cli,junit \\\n                  --reporter-junit-export test-results/integration-results.xml\n            """.trimIndent()\n        }\n        \n        // Deploy to Staging\n        script {\n            name = "Deploy to Staging"\n            scriptContent = """\n                echo "=== Deploying to Staging ==="\n                helm upgrade --install myapp-staging ./helm/myapp \\\n                  --namespace staging \\\n                  --set image.tag=%build.number% \\\n                  --set environment=staging \\\n                  --set replicas=2 \\\n                  --wait --timeout=300s\n            """.trimIndent()\n            conditions {\n                equals("teamcity.build.branch", "main")\n            }\n        }\n        \n        // Production Deployment (Manual Approval)\n        script {\n            name = "Deploy to Production"\n            scriptContent = """\n                echo "=== Deploying to Production ==="\n                helm upgrade --install myapp-prod ./helm/myapp \\\n                  --namespace production \\\n                  --set image.tag=%build.number% \\\n                  --set environment=production \\\n                  --set replicas=3 \\\n                  --set resources.requests.cpu=500m \\\n                  --set resources.requests.memory=512Mi \\\n                  --wait --timeout=600s\n                \n                echo "=== Production Health Check ==="\n                for i in {1..10}; do\n                  if curl -f https://api.myapp.com/health; then\n                    echo "Production deployment successful!"\n                    break\n                  fi\n                  echo "Waiting for production to be ready... ($i/10)"\n                  sleep 30\n                done\n            """.trimIndent()\n            conditions {\n                equals("teamcity.build.branch", "main")\n            }\n        }\n    }\n    \n    triggers {\n        vcs {\n            branchFilter = "+:*"\n        }\n    }\n    \n    features {\n        feature {\n            type = "commit-status-publisher"\n            param("github_authentication_type", "token")\n            param("github_host", "https://api.github.com")\n            param("github_oauth_user", "teamcity-bot")\n            param("secure:github_access_token", "credentialsJSON:github-token")\n        }\n    }\n})\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"custom-build-agent",children:"Custom Build Agent"}),"\n",(0,s.jsx)(e.h3,{id:"dockerfile-for-custom-agent",children:"Dockerfile for Custom Agent"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create custom-agent/Dockerfile:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dockerfile",children:'FROM jetbrains/teamcity-agent:2023.11\n\nUSER root\n\n# Install additional tools\nRUN apt-get update && apt-get install -y \\\n    curl \\\n    wget \\\n    git \\\n    unzip \\\n    jq \\\n    python3 \\\n    python3-pip \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install Docker CLI\nRUN curl -fsSL https://get.docker.com -o get-docker.sh && \\\n    sh get-docker.sh && \\\n    rm get-docker.sh\n\n# Install kubectl\nRUN curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl" && \\\n    install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n\n# Install Helm\nRUN curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# Install Node.js\nRUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \\\n    apt-get install -y nodejs\n\n# Install AWS CLI\nRUN pip3 install awscli\n\n# Install Terraform\nRUN wget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip && \\\n    unzip terraform_1.6.0_linux_amd64.zip && \\\n    mv terraform /usr/local/bin/ && \\\n    rm terraform_1.6.0_linux_amd64.zip\n\n# Install Newman for API testing\nRUN npm install -g newman\n\nUSER buildagent\n\n# Set up build agent configuration\nCOPY agent.properties /data/teamcity_agent/conf/buildAgent.properties\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create custom-agent/agent.properties:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-properties",children:"serverUrl=http://teamcity-server:8111\nname=custom-docker-agent\nworkDir=../work\ntempDir=../temp\nsystemDir=../system\n\n# Agent capabilities\nsystem.agent.name=custom-docker-agent\nsystem.docker.version=20.10.0\nsystem.kubectl.version=1.28.0\nsystem.helm.version=3.13.0\nsystem.terraform.version=1.6.0\nsystem.node.version=18.0.0\nsystem.python.version=3.9.0\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"advanced-build-features",children:"Advanced Build Features"}),"\n",(0,s.jsx)(e.h3,{id:"parallel-build-configuration",children:"Parallel Build Configuration"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create parallel-builds.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'object ParallelBuild : BuildType({\n    name = "Parallel Build Pipeline"\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        // Parallel execution using build features\n        script {\n            name = "Frontend Build"\n            scriptContent = """\n                cd frontend\n                npm ci\n                npm run build\n                npm run test\n            """.trimIndent()\n            executionMode = BuildStep.ExecutionMode.RUN_ON_SUCCESS\n        }\n        \n        script {\n            name = "Backend Build"\n            scriptContent = """\n                cd backend\n                ./gradlew clean build test\n            """.trimIndent()\n            executionMode = BuildStep.ExecutionMode.RUN_ON_SUCCESS\n        }\n        \n        script {\n            name = "Database Migration Tests"\n            scriptContent = """\n                cd database\n                ./run-migration-tests.sh\n            """.trimIndent()\n            executionMode = BuildStep.ExecutionMode.RUN_ON_SUCCESS\n        }\n    }\n    \n    // Composite build to run steps in parallel\n    features {\n        feature {\n            type = "parallelTests"\n            param("parallel.tests.excludes", "")\n            param("parallel.tests.includes", "**/*Test.java")\n        }\n    }\n})\n'})}),"\n",(0,s.jsx)(e.h3,{id:"build-templates",children:"Build Templates"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create build-template.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'object BuildTemplate : Template({\n    name = "Standard Build Template"\n    \n    params {\n        param("docker.registry", "myregistry.com")\n        param("app.name", "")\n        param("app.port", "8080")\n    }\n    \n    vcs {\n        root(DslContext.settingsRoot)\n    }\n    \n    steps {\n        script {\n            name = "Setup Environment"\n            scriptContent = """\n                echo "Building %app.name%"\n                echo "Registry: %docker.registry%"\n                echo "Build Number: %build.number%"\n            """.trimIndent()\n        }\n        \n        dockerCommand {\n            name = "Build Docker Image"\n            commandType = build {\n                source = file {\n                    path = "Dockerfile"\n                }\n                namesAndTags = "%docker.registry%/%app.name%:%build.number%"\n                commandArgs = "--build-arg APP_PORT=%app.port%"\n            }\n        }\n        \n        script {\n            name = "Run Tests"\n            scriptContent = """\n                docker run --rm %docker.registry%/%app.name%:%build.number% npm test\n            """.trimIndent()\n        }\n        \n        dockerCommand {\n            name = "Push Image"\n            commandType = push {\n                namesAndTags = "%docker.registry%/%app.name%:%build.number%"\n            }\n        }\n    }\n    \n    triggers {\n        vcs {\n            branchFilter = "+:*"\n        }\n    }\n})\n\n// Use template in specific build\nobject WebAppBuild : BuildType({\n    name = "Web Application Build"\n    \n    templates(BuildTemplate)\n    \n    params {\n        param("app.name", "webapp")\n        param("app.port", "3000")\n    }\n})\n\nobject ApiBuild : BuildType({\n    name = "API Build"\n    \n    templates(BuildTemplate)\n    \n    params {\n        param("app.name", "api")\n        param("app.port", "8080")\n    }\n})\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"integration-with-external-tools",children:"Integration with External Tools"}),"\n",(0,s.jsx)(e.h3,{id:"slack-notifications",children:"Slack Notifications"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create notifications.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'object NotificationBuild : BuildType({\n    name = "Build with Notifications"\n    \n    steps {\n        script {\n            name = "Build Application"\n            scriptContent = "echo \'Building application...\'"\n        }\n    }\n    \n    features {\n        feature {\n            type = "notifications"\n            param("notifier", "slackNotifier")\n            param("buildStarted", "true")\n            param("buildSuccessful", "true")\n            param("buildFailed", "true")\n            param("buildFailedToStart", "true")\n            param("firstSuccessAfterFailure", "true")\n            param("channel", "#ci-cd")\n            param("addBranch", "true")\n            param("addChanges", "true")\n        }\n    }\n})\n'})}),"\n",(0,s.jsx)(e.h3,{id:"sonarqube-integration",children:"SonarQube Integration"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create sonar-integration.kts:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-kotlin",children:'object SonarQubeBuild : BuildType({\n    name = "Build with SonarQube Analysis"\n    \n    steps {\n        script {\n            name = "Build and Test"\n            scriptContent = """\n                ./gradlew clean build test jacocoTestReport\n            """.trimIndent()\n        }\n        \n        sonarQubeRunner {\n            name = "SonarQube Analysis"\n            serverUrl = "http://sonarqube:9000"\n            serverAuthToken = "credentialsJSON:sonar-token"\n            projectKey = "my-project"\n            projectName = "My Project"\n            projectVersion = "%build.number%"\n            sourcesPath = "src/main/java"\n            testsPath = "src/test/java"\n            coverageReportPath = "build/reports/jacoco/test/jacocoTestReport.xml"\n        }\n    }\n    \n    features {\n        feature {\n            type = "sonar-plugin"\n            param("sonarServer", "sonarqube-server")\n        }\n    }\n})\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"monitoring-and-reporting",children:"Monitoring and Reporting"}),"\n",(0,s.jsx)(e.h3,{id:"build-metrics-dashboard",children:"Build Metrics Dashboard"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create metrics-config.json:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "dashboard": {\n    "title": "TeamCity Build Metrics",\n    "widgets": [\n      {\n        "type": "build-success-rate",\n        "buildTypes": ["Build", "Test", "Deploy"],\n        "timeRange": "7d"\n      },\n      {\n        "type": "build-duration",\n        "buildTypes": ["Build"],\n        "timeRange": "30d"\n      },\n      {\n        "type": "test-results",\n        "buildTypes": ["Test"],\n        "timeRange": "7d"\n      },\n      {\n        "type": "deployment-frequency",\n        "buildTypes": ["Deploy"],\n        "timeRange": "30d"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"custom-build-report",children:"Custom Build Report"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create build-report.py:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport requests\nimport json\nfrom datetime import datetime, timedelta\n\nclass TeamCityReporter:\n    def __init__(self, server_url, username, password):\n        self.server_url = server_url\n        self.auth = (username, password)\n        self.headers = {'Accept': 'application/json'}\n    \n    def get_build_statistics(self, build_type_id, days=7):\n        \"\"\"Get build statistics for the last N days\"\"\"\n        since_date = (datetime.now() - timedelta(days=days)).strftime('%Y%m%dT%H%M%S%z')\n        \n        url = f\"{self.server_url}/app/rest/builds\"\n        params = {\n            'locator': f'buildType:{build_type_id},sinceDate:{since_date}',\n            'fields': 'build(id,number,status,startDate,finishDate,buildType(name))'\n        }\n        \n        response = requests.get(url, auth=self.auth, headers=self.headers, params=params)\n        return response.json()\n    \n    def calculate_metrics(self, builds):\n        \"\"\"Calculate build metrics\"\"\"\n        total_builds = len(builds.get('build', []))\n        successful_builds = len([b for b in builds.get('build', []) if b['status'] == 'SUCCESS'])\n        failed_builds = total_builds - successful_builds\n        \n        success_rate = (successful_builds / total_builds * 100) if total_builds > 0 else 0\n        \n        # Calculate average build time\n        durations = []\n        for build in builds.get('build', []):\n            if 'startDate' in build and 'finishDate' in build:\n                start = datetime.fromisoformat(build['startDate'].replace('Z', '+00:00'))\n                finish = datetime.fromisoformat(build['finishDate'].replace('Z', '+00:00'))\n                durations.append((finish - start).total_seconds())\n        \n        avg_duration = sum(durations) / len(durations) if durations else 0\n        \n        return {\n            'total_builds': total_builds,\n            'successful_builds': successful_builds,\n            'failed_builds': failed_builds,\n            'success_rate': round(success_rate, 2),\n            'average_duration_seconds': round(avg_duration, 2),\n            'average_duration_minutes': round(avg_duration / 60, 2)\n        }\n    \n    def generate_report(self, build_type_ids):\n        \"\"\"Generate comprehensive build report\"\"\"\n        report = {\n            'generated_at': datetime.now().isoformat(),\n            'build_types': {}\n        }\n        \n        for build_type_id in build_type_ids:\n            builds = self.get_build_statistics(build_type_id)\n            metrics = self.calculate_metrics(builds)\n            report['build_types'][build_type_id] = metrics\n        \n        return report\n\n# Usage\nif __name__ == \"__main__\":\n    reporter = TeamCityReporter(\n        server_url=\"http://localhost:8111\",\n        username=\"admin\",\n        password=\"admin\"\n    )\n    \n    build_types = [\"Build\", \"Test\", \"Deploy\"]\n    report = reporter.generate_report(build_types)\n    \n    print(json.dumps(report, indent=2))\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Enterprise CI/CD"}),": Large-scale build automation with multiple agents"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Multi-Technology Builds"}),": Java, .NET, Node.js, Python applications"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Complex Deployment Pipelines"}),": Multi-environment deployments with approvals"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Build Analytics"}),": Comprehensive reporting and metrics tracking"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Integration Testing"}),": Automated testing across multiple services and environments"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u2705 TeamCity is now configured for professional CI/CD workflows!"})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function a(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);