"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7414],{8397:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"CI-CD/CI/gocd","title":"GoCD","description":"GoCD is an open-source continuous delivery server that helps you automate and streamline your build-test-release cycle. Learn how to set up GoCD with Docker.","source":"@site/docs/CI-CD/CI/gocd.md","sourceDirName":"CI-CD/CI","slug":"/CI-CD/GoCD","permalink":"/docs/docs/CI-CD/GoCD","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CI/gocd.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"GoCD","description":"GoCD is an open-source continuous delivery server that helps you automate and streamline your build-test-release cycle. Learn how to set up GoCD with Docker.","slug":"/CI-CD/GoCD","keywords":["GoCD","continuous delivery","pipeline automation","build automation","deployment pipeline","value stream mapping","pipeline as code","continuous deployment","DevOps automation","open source CI/CD"]},"sidebar":"tutorialSidebar","previous":{"title":"TeamCity","permalink":"/docs/docs/CI-CD/TeamCity"},"next":{"title":"Google Cloud Build","permalink":"/docs/docs/CI-CD/CloudBuild"}}');var i=s(4848),a=s(8453);const o={sidebar_position:7,title:"GoCD",description:"GoCD is an open-source continuous delivery server that helps you automate and streamline your build-test-release cycle. Learn how to set up GoCD with Docker.",slug:"/CI-CD/GoCD",keywords:["GoCD","continuous delivery","pipeline automation","build automation","deployment pipeline","value stream mapping","pipeline as code","continuous deployment","DevOps automation","open source CI/CD"]},r="\ud83d\ude80 GoCD - Continuous Delivery Server",l={},d=[{value:"Set Up GoCD with Docker",id:"set-up-gocd-with-docker",level:2},{value:"Pipeline Configuration (YAML)",id:"pipeline-configuration-yaml",level:2},{value:"Basic Pipeline Configuration",id:"basic-pipeline-configuration",level:3},{value:"Advanced Pipeline with Fan-in/Fan-out",id:"advanced-pipeline-with-fan-infan-out",level:3},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"Environment Setup",id:"environment-setup",level:3},{value:"Custom GoCD Agent",id:"custom-gocd-agent",level:2},{value:"Enhanced Agent Dockerfile",id:"enhanced-agent-dockerfile",level:3},{value:"Pipeline Templates",id:"pipeline-templates",level:2},{value:"Reusable Pipeline Template",id:"reusable-pipeline-template",level:3},{value:"Value Stream Map and Analytics",id:"value-stream-map-and-analytics",level:2},{value:"Pipeline Analytics Script",id:"pipeline-analytics-script",level:3},{value:"Integration with External Tools",id:"integration-with-external-tools",level:2},{value:"Slack Notifications Plugin",id:"slack-notifications-plugin",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-gocd---continuous-delivery-server",children:"\ud83d\ude80 GoCD - Continuous Delivery Server"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GoCD"})," is an open-source ",(0,i.jsx)(n.strong,{children:"continuous delivery server"})," that helps you automate and streamline your ",(0,i.jsx)(n.strong,{children:"build-test-release cycle"}),". It provides powerful ",(0,i.jsx)(n.strong,{children:"pipeline modeling"}),", ",(0,i.jsx)(n.strong,{children:"value stream mapping"}),", and ",(0,i.jsx)(n.strong,{children:"advanced deployment strategies"})," for complex delivery workflows."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"set-up-gocd-with-docker",children:"Set Up GoCD with Docker"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create a file named docker-compose.yml"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  gocd-server:\n    image: gocd/gocd-server:v23.4.0\n    container_name: gocd-server\n    restart: unless-stopped\n    ports:\n      - "8153:8153"\n      - "8154:8154"\n    volumes:\n      - gocd-server-data:/godata\n      - gocd-server-home:/home/go\n      - gocd-server-logs:/go-working-dir/logs\n      - ./gocd-configs:/godata/config\n    environment:\n      - GOCD_SERVER_JVM_OPTIONS=-Xmx2g -Xms1g\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8153/go/api/v1/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  gocd-agent-1:\n    image: gocd/gocd-agent-alpine-3.18:v23.4.0\n    container_name: gocd-agent-1\n    restart: unless-stopped\n    environment:\n      - GO_SERVER_URL=https://gocd-server:8154/go\n      - AGENT_AUTO_REGISTER_KEY=your-auto-register-key\n      - AGENT_AUTO_REGISTER_RESOURCES=docker,linux,alpine\n      - AGENT_AUTO_REGISTER_ENVIRONMENTS=development,staging\n      - AGENT_AUTO_REGISTER_HOSTNAME=docker-agent-1\n    volumes:\n      - gocd-agent-1-data:/godata\n      - gocd-agent-1-home:/home/go\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker:ro\n    depends_on:\n      - gocd-server\n\n  gocd-agent-2:\n    image: gocd/gocd-agent-alpine-3.18:v23.4.0\n    container_name: gocd-agent-2\n    restart: unless-stopped\n    environment:\n      - GO_SERVER_URL=https://gocd-server:8154/go\n      - AGENT_AUTO_REGISTER_KEY=your-auto-register-key\n      - AGENT_AUTO_REGISTER_RESOURCES=docker,linux,alpine,kubernetes\n      - AGENT_AUTO_REGISTER_ENVIRONMENTS=production\n      - AGENT_AUTO_REGISTER_HOSTNAME=docker-agent-2\n    volumes:\n      - gocd-agent-2-data:/godata\n      - gocd-agent-2-home:/home/go\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker:ro\n      - ~/.kube:/home/go/.kube:ro\n    depends_on:\n      - gocd-server\n\n  # PostgreSQL for GoCD (optional, for production use)\n  gocd-postgres:\n    image: postgres:15\n    container_name: gocd-postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_DB=gocd\n      - POSTGRES_USER=gocd\n      - POSTGRES_PASSWORD=gocd_password\n    volumes:\n      - gocd-postgres-data:/var/lib/postgresql/data\n    ports:\n      - "5432:5432"\n\nvolumes:\n  gocd-server-data:\n  gocd-server-home:\n  gocd-server-logs:\n  gocd-agent-1-data:\n  gocd-agent-1-home:\n  gocd-agent-2-data:\n  gocd-agent-2-home:\n  gocd-postgres-data:\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Start GoCD:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Access GoCD:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo "GoCD Server: http://localhost:8153"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"pipeline-configuration-yaml",children:"Pipeline Configuration (YAML)"}),"\n",(0,i.jsx)(n.h3,{id:"basic-pipeline-configuration",children:"Basic Pipeline Configuration"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create gocd-configs/pipeline.gocd.yaml:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'format_version: 10\npipelines:\n  build-pipeline:\n    group: myapp\n    label_template: "${COUNT}"\n    lock_behavior: none\n    display_order: -1\n    materials:\n      git-repo:\n        git: https://github.com/myorg/myapp.git\n        branch: main\n        shallow_clone: false\n        auto_update: true\n        blacklist:\n          - "docs/**/*"\n          - "*.md"\n    stages:\n      - build:\n          fetch_materials: true\n          keep_artifacts: false\n          clean_workspace: false\n          approval:\n            type: success\n            allow_only_on_success: false\n          jobs:\n            build-job:\n              timeout: 0\n              resources:\n                - docker\n                - linux\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Building Application ==="\n                        docker build -t myapp:${GO_PIPELINE_LABEL} .\n                        echo "Build completed successfully"\n              artifacts:\n                - build:\n                    source: dist/**/*\n                    destination: build-artifacts\n                - test:\n                    source: test-results/**/*\n                    destination: test-results\n\n  test-pipeline:\n    group: myapp\n    label_template: "${COUNT}"\n    materials:\n      upstream:\n        pipeline: build-pipeline\n        stage: build\n    stages:\n      - unit-tests:\n          jobs:\n            unit-test-job:\n              resources:\n                - docker\n              tasks:\n                - fetch:\n                    pipeline: build-pipeline\n                    stage: build\n                    job: build-job\n                    source: build-artifacts\n                    destination: .\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Running Unit Tests ==="\n                        docker run --rm -v $(pwd):/app myapp:${GO_DEPENDENCY_LABEL_BUILD_PIPELINE} npm test\n              artifacts:\n                - test:\n                    source: coverage/**/*\n                    destination: coverage-reports\n      \n      - integration-tests:\n          jobs:\n            integration-test-job:\n              resources:\n                - docker\n              tasks:\n                - fetch:\n                    pipeline: build-pipeline\n                    stage: build\n                    job: build-job\n                    source: build-artifacts\n                    destination: .\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Running Integration Tests ==="\n                        docker-compose -f docker-compose.test.yml up --abort-on-container-exit\n                        docker-compose -f docker-compose.test.yml down\n\n  deploy-staging-pipeline:\n    group: myapp\n    label_template: "${COUNT}"\n    materials:\n      upstream:\n        pipeline: test-pipeline\n        stage: integration-tests\n    environment_variables:\n      ENVIRONMENT: staging\n      NAMESPACE: staging\n    stages:\n      - deploy-staging:\n          approval:\n            type: success\n          jobs:\n            deploy-job:\n              resources:\n                - docker\n                - kubernetes\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Deploying to Staging ==="\n                        kubectl set image deployment/myapp myapp=myregistry.com/myapp:${GO_DEPENDENCY_LABEL_BUILD_PIPELINE} -n ${NAMESPACE}\n                        kubectl rollout status deployment/myapp -n ${NAMESPACE} --timeout=300s\n                        \n                        echo "=== Health Check ==="\n                        sleep 30\n                        curl -f http://staging.myapp.com/health || exit 1\n                        echo "Staging deployment successful"\n\n  deploy-production-pipeline:\n    group: myapp\n    label_template: "${COUNT}"\n    materials:\n      upstream:\n        pipeline: deploy-staging-pipeline\n        stage: deploy-staging\n    environment_variables:\n      ENVIRONMENT: production\n      NAMESPACE: production\n    stages:\n      - deploy-production:\n          approval:\n            type: manual\n            allow_only_on_success: true\n          jobs:\n            deploy-job:\n              resources:\n                - docker\n                - kubernetes\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Deploying to Production ==="\n                        helm upgrade --install myapp ./helm/myapp \\\n                          --namespace ${NAMESPACE} \\\n                          --set image.tag=${GO_DEPENDENCY_LABEL_BUILD_PIPELINE} \\\n                          --set environment=${ENVIRONMENT} \\\n                          --set replicas=3 \\\n                          --wait --timeout=600s\n                        \n                        echo "=== Production Health Check ==="\n                        for i in {1..10}; do\n                          if curl -f https://api.myapp.com/health; then\n                            echo "Production deployment successful!"\n                            break\n                          fi\n                          echo "Waiting for production to be ready... ($i/10)"\n                          sleep 30\n                        done\n'})}),"\n",(0,i.jsx)(n.h3,{id:"advanced-pipeline-with-fan-infan-out",children:"Advanced Pipeline with Fan-in/Fan-out"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create gocd-configs/advanced-pipeline.gocd.yaml:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'format_version: 10\npipelines:\n  # Frontend Pipeline\n  frontend-pipeline:\n    group: microservices\n    materials:\n      frontend-repo:\n        git: https://github.com/myorg/frontend.git\n        branch: main\n        destination: frontend\n    stages:\n      - build-frontend:\n          jobs:\n            build:\n              resources: [docker, node]\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        cd frontend\n                        npm ci\n                        npm run build\n                        npm run test\n                        docker build -t frontend:${GO_PIPELINE_LABEL} .\n              artifacts:\n                - build:\n                    source: frontend/dist/**/*\n                    destination: frontend-dist\n\n  # Backend API Pipeline\n  backend-api-pipeline:\n    group: microservices\n    materials:\n      backend-repo:\n        git: https://github.com/myorg/backend-api.git\n        branch: main\n        destination: backend\n    stages:\n      - build-backend:\n          jobs:\n            build:\n              resources: [docker, java]\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        cd backend\n                        ./gradlew clean build test\n                        docker build -t backend-api:${GO_PIPELINE_LABEL} .\n              artifacts:\n                - build:\n                    source: backend/build/libs/**/*\n                    destination: backend-artifacts\n\n  # Database Migration Pipeline\n  database-pipeline:\n    group: microservices\n    materials:\n      db-repo:\n        git: https://github.com/myorg/database.git\n        branch: main\n        destination: database\n    stages:\n      - migrate-database:\n          jobs:\n            migrate:\n              resources: [docker]\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        cd database\n                        docker run --rm -v $(pwd)/migrations:/migrations \\\n                          migrate/migrate -path=/migrations \\\n                          -database="postgres://user:pass@db:5432/myapp?sslmode=disable" up\n\n  # Integration Pipeline (Fan-in)\n  integration-pipeline:\n    group: microservices\n    materials:\n      frontend-upstream:\n        pipeline: frontend-pipeline\n        stage: build-frontend\n      backend-upstream:\n        pipeline: backend-api-pipeline\n        stage: build-backend\n      database-upstream:\n        pipeline: database-pipeline\n        stage: migrate-database\n    stages:\n      - integration-tests:\n          jobs:\n            test:\n              resources: [docker]\n              tasks:\n                - fetch:\n                    pipeline: frontend-pipeline\n                    stage: build-frontend\n                    job: build\n                    source: frontend-dist\n                    destination: .\n                - fetch:\n                    pipeline: backend-api-pipeline\n                    stage: build-backend\n                    job: build\n                    source: backend-artifacts\n                    destination: .\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Running Integration Tests ==="\n                        docker-compose -f docker-compose.integration.yml up --abort-on-container-exit\n                        docker-compose -f docker-compose.integration.yml down\n\n  # Deployment Pipeline\n  deploy-pipeline:\n    group: microservices\n    materials:\n      integration-upstream:\n        pipeline: integration-pipeline\n        stage: integration-tests\n    stages:\n      - deploy-all:\n          jobs:\n            deploy:\n              resources: [kubernetes]\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Deploying All Services ==="\n                        \n                        # Deploy frontend\n                        kubectl set image deployment/frontend \\\n                          frontend=frontend:${GO_DEPENDENCY_LABEL_FRONTEND_PIPELINE} -n staging\n                        \n                        # Deploy backend\n                        kubectl set image deployment/backend-api \\\n                          backend-api=backend-api:${GO_DEPENDENCY_LABEL_BACKEND_API_PIPELINE} -n staging\n                        \n                        # Wait for deployments\n                        kubectl rollout status deployment/frontend -n staging --timeout=300s\n                        kubectl rollout status deployment/backend-api -n staging --timeout=300s\n                        \n                        echo "All services deployed successfully"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create gocd-configs/environments.gocd.yaml:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"format_version: 10\nenvironments:\n  development:\n    environment_variables:\n      ENVIRONMENT: development\n      LOG_LEVEL: debug\n      DATABASE_URL: postgres://dev:dev@dev-db:5432/myapp_dev\n    secure_variables:\n      API_KEY: AES:encrypted_api_key_here\n    pipelines:\n      - build-pipeline\n      - test-pipeline\n    agents:\n      - docker-agent-1\n\n  staging:\n    environment_variables:\n      ENVIRONMENT: staging\n      LOG_LEVEL: info\n      DATABASE_URL: postgres://staging:staging@staging-db:5432/myapp_staging\n    secure_variables:\n      API_KEY: AES:encrypted_staging_api_key_here\n    pipelines:\n      - deploy-staging-pipeline\n    agents:\n      - docker-agent-1\n      - docker-agent-2\n\n  production:\n    environment_variables:\n      ENVIRONMENT: production\n      LOG_LEVEL: warn\n      DATABASE_URL: postgres://prod:prod@prod-db:5432/myapp_prod\n    secure_variables:\n      API_KEY: AES:encrypted_prod_api_key_here\n    pipelines:\n      - deploy-production-pipeline\n    agents:\n      - docker-agent-2\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-gocd-agent",children:"Custom GoCD Agent"}),"\n",(0,i.jsx)(n.h3,{id:"enhanced-agent-dockerfile",children:"Enhanced Agent Dockerfile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create custom-agent/Dockerfile:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'FROM gocd/gocd-agent-alpine-3.18:v23.4.0\n\nUSER root\n\n# Install additional tools\nRUN apk add --no-cache \\\n    curl \\\n    wget \\\n    git \\\n    jq \\\n    python3 \\\n    py3-pip \\\n    nodejs \\\n    npm \\\n    openjdk11 \\\n    gradle \\\n    maven\n\n# Install Docker CLI\nRUN curl -fsSL https://get.docker.com -o get-docker.sh && \\\n    sh get-docker.sh && \\\n    rm get-docker.sh\n\n# Install kubectl\nRUN curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl" && \\\n    install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n\n# Install Helm\nRUN curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# Install Terraform\nRUN wget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip && \\\n    unzip terraform_1.6.0_linux_amd64.zip && \\\n    mv terraform /usr/local/bin/ && \\\n    rm terraform_1.6.0_linux_amd64.zip\n\n# Install AWS CLI\nRUN pip3 install awscli\n\n# Install Newman for API testing\nRUN npm install -g newman\n\n# Install SonarQube Scanner\nRUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.8.0.2856-linux.zip && \\\n    unzip sonar-scanner-cli-4.8.0.2856-linux.zip && \\\n    mv sonar-scanner-4.8.0.2856-linux /opt/sonar-scanner && \\\n    ln -s /opt/sonar-scanner/bin/sonar-scanner /usr/local/bin/sonar-scanner && \\\n    rm sonar-scanner-cli-4.8.0.2856-linux.zip\n\nUSER go\n\n# Set environment variables\nENV PATH="/usr/local/bin:${PATH}"\nENV JAVA_HOME="/usr/lib/jvm/java-11-openjdk"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Build and use custom agent:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t custom-gocd-agent custom-agent/\n\n# Update docker-compose.yml to use custom image\n# Replace: image: gocd/gocd-agent-alpine-3.18:v23.4.0\n# With: image: custom-gocd-agent\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"pipeline-templates",children:"Pipeline Templates"}),"\n",(0,i.jsx)(n.h3,{id:"reusable-pipeline-template",children:"Reusable Pipeline Template"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create gocd-configs/templates.gocd.yaml:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'format_version: 10\npipeline_templates:\n  microservice-template:\n    stages:\n      - build:\n          jobs:\n            build-job:\n              resources:\n                - docker\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Building ${SERVICE_NAME} ==="\n                        docker build -t ${SERVICE_NAME}:${GO_PIPELINE_LABEL} .\n                        echo "Build completed for ${SERVICE_NAME}"\n              artifacts:\n                - build:\n                    source: dist/**/*\n                    destination: build-artifacts\n      \n      - test:\n          jobs:\n            test-job:\n              resources:\n                - docker\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Testing ${SERVICE_NAME} ==="\n                        docker run --rm ${SERVICE_NAME}:${GO_PIPELINE_LABEL} npm test\n                        echo "Tests completed for ${SERVICE_NAME}"\n              artifacts:\n                - test:\n                    source: test-results/**/*\n                    destination: test-results\n      \n      - security-scan:\n          jobs:\n            security-job:\n              resources:\n                - docker\n              tasks:\n                - exec:\n                    command: /bin/bash\n                    arguments:\n                      - -c\n                      - |\n                        echo "=== Security Scan for ${SERVICE_NAME} ==="\n                        docker run --rm -v $(pwd):/app clair-scanner ${SERVICE_NAME}:${GO_PIPELINE_LABEL}\n                        echo "Security scan completed for ${SERVICE_NAME}"\n\npipelines:\n  user-service:\n    group: microservices\n    template: microservice-template\n    label_template: "${COUNT}"\n    materials:\n      git-repo:\n        git: https://github.com/myorg/user-service.git\n        branch: main\n    environment_variables:\n      SERVICE_NAME: user-service\n\n  order-service:\n    group: microservices\n    template: microservice-template\n    label_template: "${COUNT}"\n    materials:\n      git-repo:\n        git: https://github.com/myorg/order-service.git\n        branch: main\n    environment_variables:\n      SERVICE_NAME: order-service\n\n  payment-service:\n    group: microservices\n    template: microservice-template\n    label_template: "${COUNT}"\n    materials:\n      git-repo:\n        git: https://github.com/myorg/payment-service.git\n        branch: main\n    environment_variables:\n      SERVICE_NAME: payment-service\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"value-stream-map-and-analytics",children:"Value Stream Map and Analytics"}),"\n",(0,i.jsx)(n.h3,{id:"pipeline-analytics-script",children:"Pipeline Analytics Script"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create analytics/pipeline-analytics.py:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport requests\nimport json\nfrom datetime import datetime, timedelta\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nclass GoCDAnalytics:\n    def __init__(self, server_url, username, password):\n        self.server_url = server_url\n        self.auth = (username, password)\n        self.headers = {'Accept': 'application/vnd.go.cd.v1+json'}\n    \n    def get_pipeline_history(self, pipeline_name, offset=0, page_size=100):\n        \"\"\"Get pipeline history\"\"\"\n        url = f\"{self.server_url}/go/api/pipelines/{pipeline_name}/history/{offset}\"\n        response = requests.get(url, auth=self.auth, headers=self.headers)\n        return response.json()\n    \n    def get_value_stream_map(self, pipeline_name, pipeline_counter):\n        \"\"\"Get value stream map for a specific pipeline run\"\"\"\n        url = f\"{self.server_url}/go/api/pipelines/{pipeline_name}/{pipeline_counter}/value_stream_map\"\n        response = requests.get(url, auth=self.auth, headers=self.headers)\n        return response.json()\n    \n    def calculate_lead_time(self, pipeline_name, days=30):\n        \"\"\"Calculate lead time for pipeline\"\"\"\n        history = self.get_pipeline_history(pipeline_name)\n        pipelines = history.get('pipelines', [])\n        \n        lead_times = []\n        for pipeline in pipelines[:days]:\n            if pipeline['stages']:\n                first_stage = pipeline['stages'][0]\n                last_stage = pipeline['stages'][-1]\n                \n                if first_stage.get('scheduled_date') and last_stage.get('completed_date'):\n                    start_time = datetime.fromisoformat(first_stage['scheduled_date'].replace('Z', '+00:00'))\n                    end_time = datetime.fromisoformat(last_stage['completed_date'].replace('Z', '+00:00'))\n                    lead_time = (end_time - start_time).total_seconds() / 60  # in minutes\n                    lead_times.append(lead_time)\n        \n        return {\n            'average_lead_time': sum(lead_times) / len(lead_times) if lead_times else 0,\n            'median_lead_time': sorted(lead_times)[len(lead_times)//2] if lead_times else 0,\n            'lead_times': lead_times\n        }\n    \n    def calculate_deployment_frequency(self, pipeline_name, days=30):\n        \"\"\"Calculate deployment frequency\"\"\"\n        history = self.get_pipeline_history(pipeline_name)\n        pipelines = history.get('pipelines', [])\n        \n        successful_deployments = [p for p in pipelines if p['build_cause']['trigger_message'] != 'Forced']\n        \n        return {\n            'total_deployments': len(successful_deployments),\n            'deployments_per_day': len(successful_deployments) / days,\n            'success_rate': len([p for p in successful_deployments if p['stages'][-1]['result'] == 'Passed']) / len(successful_deployments) * 100 if successful_deployments else 0\n        }\n    \n    def generate_dashboard(self, pipeline_names):\n        \"\"\"Generate analytics dashboard\"\"\"\n        dashboard_data = {}\n        \n        for pipeline_name in pipeline_names:\n            lead_time_data = self.calculate_lead_time(pipeline_name)\n            deployment_data = self.calculate_deployment_frequency(pipeline_name)\n            \n            dashboard_data[pipeline_name] = {\n                'lead_time': lead_time_data,\n                'deployment_frequency': deployment_data\n            }\n        \n        return dashboard_data\n    \n    def create_visualizations(self, dashboard_data):\n        \"\"\"Create visualizations for the dashboard\"\"\"\n        fig, axes = plt.subplots(2, 2, figsize=(15, 10))\n        \n        # Lead time trends\n        for pipeline_name, data in dashboard_data.items():\n            lead_times = data['lead_time']['lead_times']\n            axes[0, 0].plot(lead_times, label=pipeline_name)\n        axes[0, 0].set_title('Lead Time Trends')\n        axes[0, 0].set_xlabel('Pipeline Run')\n        axes[0, 0].set_ylabel('Lead Time (minutes)')\n        axes[0, 0].legend()\n        \n        # Average lead times comparison\n        pipeline_names = list(dashboard_data.keys())\n        avg_lead_times = [data['lead_time']['average_lead_time'] for data in dashboard_data.values()]\n        axes[0, 1].bar(pipeline_names, avg_lead_times)\n        axes[0, 1].set_title('Average Lead Times')\n        axes[0, 1].set_ylabel('Minutes')\n        \n        # Deployment frequency\n        deployment_frequencies = [data['deployment_frequency']['deployments_per_day'] for data in dashboard_data.values()]\n        axes[1, 0].bar(pipeline_names, deployment_frequencies)\n        axes[1, 0].set_title('Deployment Frequency')\n        axes[1, 0].set_ylabel('Deployments per Day')\n        \n        # Success rates\n        success_rates = [data['deployment_frequency']['success_rate'] for data in dashboard_data.values()]\n        axes[1, 1].bar(pipeline_names, success_rates)\n        axes[1, 1].set_title('Success Rates')\n        axes[1, 1].set_ylabel('Success Rate (%)')\n        \n        plt.tight_layout()\n        plt.savefig('gocd-analytics-dashboard.png')\n        plt.show()\n\n# Usage\nif __name__ == \"__main__\":\n    analytics = GoCDAnalytics(\n        server_url=\"http://localhost:8153\",\n        username=\"admin\",\n        password=\"admin\"\n    )\n    \n    pipeline_names = [\"build-pipeline\", \"test-pipeline\", \"deploy-staging-pipeline\"]\n    dashboard_data = analytics.generate_dashboard(pipeline_names)\n    \n    print(json.dumps(dashboard_data, indent=2))\n    analytics.create_visualizations(dashboard_data)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-external-tools",children:"Integration with External Tools"}),"\n",(0,i.jsx)(n.h3,{id:"slack-notifications-plugin",children:"Slack Notifications Plugin"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Create plugins/slack-notification.py:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\nimport requests\nimport json\nimport sys\nimport os\n\ndef send_slack_notification(webhook_url, pipeline_name, stage_name, result, build_label):\n    """Send Slack notification for pipeline events"""\n    \n    color = "good" if result == "Passed" else "danger"\n    emoji = "\u2705" if result == "Passed" else "\u274c"\n    \n    message = {\n        "attachments": [\n            {\n                "color": color,\n                "fields": [\n                    {\n                        "title": f"{emoji} Pipeline {result}",\n                        "value": f"Pipeline: {pipeline_name}\\nStage: {stage_name}\\nBuild: {build_label}",\n                        "short": False\n                    }\n                ],\n                "footer": "GoCD",\n                "ts": int(time.time())\n            }\n        ]\n    }\n    \n    response = requests.post(webhook_url, json=message)\n    return response.status_code == 200\n\nif __name__ == "__main__":\n    webhook_url = os.environ.get(\'SLACK_WEBHOOK_URL\')\n    pipeline_name = os.environ.get(\'GO_PIPELINE_NAME\')\n    stage_name = os.environ.get(\'GO_STAGE_NAME\')\n    result = os.environ.get(\'GO_STAGE_RESULT\')\n    build_label = os.environ.get(\'GO_PIPELINE_LABEL\')\n    \n    if webhook_url:\n        send_slack_notification(webhook_url, pipeline_name, stage_name, result, build_label)\n    else:\n        print("SLACK_WEBHOOK_URL not configured")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Complex Deployment Pipelines"}),": Multi-stage, multi-environment deployments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Microservices Orchestration"}),": Coordinated builds and deployments across services"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Value Stream Optimization"}),": Visual pipeline analysis and bottleneck identification"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compliance and Governance"}),": Audit trails and approval workflows"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enterprise CI/CD"}),": Large-scale continuous delivery with advanced pipeline modeling"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u2705 GoCD is now configured for advanced continuous delivery workflows!"})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);