"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9558],{7669:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"CI-CD/CI/bitbucket-pipelines","title":"Bitbucket Pipelines","description":"Bitbucket Pipelines is an integrated CI/CD service built into Bitbucket. Learn how to create automated build, test, and deployment pipelines with YAML configuration.","source":"@site/docs/CI-CD/CI/bitbucket-pipelines.md","sourceDirName":"CI-CD/CI","slug":"/CICD/BitbucketPipelines","permalink":"/docs/docs/CICD/BitbucketPipelines","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CI/bitbucket-pipelines.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13,"title":"Bitbucket Pipelines","description":"Bitbucket Pipelines is an integrated CI/CD service built into Bitbucket. Learn how to create automated build, test, and deployment pipelines with YAML configuration.","slug":"/CICD/BitbucketPipelines","keywords":["Bitbucket Pipelines","Atlassian CI/CD","integrated CI/CD","YAML pipelines","Docker containers","automated deployment","Git-based CI/CD","cloud CI/CD","pipeline as code","DevOps automation"]},"sidebar":"tutorialSidebar","previous":{"title":"Argo Workflows","permalink":"/docs/docs/CICD/ArgoWorkflows"},"next":{"title":"Continuous Deployment","permalink":"/docs/docs/category/continuous-deployment"}}');var s=t(4848),a=t(8453);const r={sidebar_position:13,title:"Bitbucket Pipelines",description:"Bitbucket Pipelines is an integrated CI/CD service built into Bitbucket. Learn how to create automated build, test, and deployment pipelines with YAML configuration.",slug:"/CICD/BitbucketPipelines",keywords:["Bitbucket Pipelines","Atlassian CI/CD","integrated CI/CD","YAML pipelines","Docker containers","automated deployment","Git-based CI/CD","cloud CI/CD","pipeline as code","DevOps automation"]},l="\ud83d\ude80 Integrated CI/CD with Bitbucket Pipelines",o={},p=[{value:"\ud83e\uddf0 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\udd27 Step 1: Enable Bitbucket Pipelines",id:"-step-1-enable-bitbucket-pipelines",level:2},{value:"Enable Pipelines in Repository",id:"enable-pipelines-in-repository",level:3},{value:"Repository Structure",id:"repository-structure",level:3},{value:"\ud83c\udfd7\ufe0f Step 2: Create Basic Pipeline Configuration",id:"\ufe0f-step-2-create-basic-pipeline-configuration",level:2},{value:"Simple Node.js Pipeline",id:"simple-nodejs-pipeline",level:3},{value:"\u25b6\ufe0f Step 3: Advanced Multi-Language Pipeline",id:"\ufe0f-step-3-advanced-multi-language-pipeline",level:2},{value:"Full-Stack Application Pipeline",id:"full-stack-application-pipeline",level:3},{value:"\ud83d\udcca Step 4: Database Migrations and Testing",id:"-step-4-database-migrations-and-testing",level:2},{value:"Database Pipeline with Migrations",id:"database-pipeline-with-migrations",level:3},{value:"\ud83d\udd0d Step 5: Multi-Environment Deployments",id:"-step-5-multi-environment-deployments",level:2},{value:"Environment-Specific Configurations",id:"environment-specific-configurations",level:3},{value:"\ud83d\udcc8 Step 6: Advanced Pipeline Features",id:"-step-6-advanced-pipeline-features",level:2},{value:"Conditional Deployments and Approvals",id:"conditional-deployments-and-approvals",level:3},{value:"Pipeline Variables and Secrets",id:"pipeline-variables-and-secrets",level:3},{value:"Parallel and Matrix Builds",id:"parallel-and-matrix-builds",level:3},{value:"\ud83d\udee1\ufe0f Step 7: Security and Best Practices",id:"\ufe0f-step-7-security-and-best-practices",level:2},{value:"Secure Pipeline Configuration",id:"secure-pipeline-configuration",level:3},{value:"SAST and Dependency Scanning",id:"sast-and-dependency-scanning",level:3},{value:"\ud83d\udccb Common Use Cases",id:"-common-use-cases",level:2},{value:"1. <strong>Web Application CI/CD</strong>",id:"1-web-application-cicd",level:3},{value:"2. <strong>Microservices Pipeline</strong>",id:"2-microservices-pipeline",level:3},{value:"3. <strong>Mobile App CI/CD</strong>",id:"3-mobile-app-cicd",level:3},{value:"4. <strong>Infrastructure as Code</strong>",id:"4-infrastructure-as-code",level:3},{value:"\u2705 What You&#39;ll Achieve",id:"-what-youll-achieve",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-integrated-cicd-with-bitbucket-pipelines",children:"\ud83d\ude80 Integrated CI/CD with Bitbucket Pipelines"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Bitbucket Pipelines"})," is an integrated ",(0,s.jsx)(n.strong,{children:"CI/CD service"})," built into Bitbucket that allows you to automatically ",(0,s.jsx)(n.strong,{children:"build"}),", ",(0,s.jsx)(n.strong,{children:"test"}),", and ",(0,s.jsx)(n.strong,{children:"deploy"})," your code based on a configuration file in your repository. Perfect for teams already using ",(0,s.jsx)(n.strong,{children:"Bitbucket"})," with ",(0,s.jsx)(n.strong,{children:"Docker-based"})," execution environments."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-prerequisites",children:"\ud83e\uddf0 Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Make sure you have the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bitbucket account"})," with repository access"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bitbucket Pipelines"})," enabled for your repository"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Basic understanding"})," of YAML and Docker"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Application code"})," in a Bitbucket repository"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deployment targets"})," (staging/production environments)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-step-1-enable-bitbucket-pipelines",children:"\ud83d\udd27 Step 1: Enable Bitbucket Pipelines"}),"\n",(0,s.jsx)(n.h3,{id:"enable-pipelines-in-repository",children:"Enable Pipelines in Repository"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Navigate"})," to your Bitbucket repository"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Go to"})," Repository Settings \u2192 Pipelines \u2192 Settings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enable"})," Pipelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configure"})," build minutes and parallel builds if needed"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"your-project/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app.js\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2514\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 unit/\n\u2502   \u2514\u2500\u2500 integration/\n\u251c\u2500\u2500 deployment/\n\u2502   \u251c\u2500\u2500 staging.yml\n\u2502   \u2514\u2500\u2500 production.yml\n\u251c\u2500\u2500 bitbucket-pipelines.yml  # Main pipeline configuration\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-step-2-create-basic-pipeline-configuration",children:"\ud83c\udfd7\ufe0f Step 2: Create Basic Pipeline Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"simple-nodejs-pipeline",children:"Simple Node.js Pipeline"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Create bitbucket-pipelines.yml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# Bitbucket Pipelines configuration\nimage: node:18\n\ndefinitions:\n  caches:\n    nodemodules: node_modules\n\npipelines:\n  default:\n    - step:\n        name: Build and Test\n        caches:\n          - nodemodules\n        script:\n          - echo "Starting build process..."\n          - npm ci\n          - npm run lint\n          - npm run test\n          - npm run build\n        artifacts:\n          - dist/**\n          - coverage/**\n          \n  branches:\n    main:\n      - step:\n          name: Build and Test\n          caches:\n            - nodemodules\n          script:\n            - npm ci\n            - npm run lint\n            - npm run test:coverage\n            - npm run build\n          artifacts:\n            - dist/**\n            - coverage/**\n            \n      - step:\n          name: Security Scan\n          script:\n            - npm audit --audit-level high\n            - npx snyk test\n            \n      - step:\n          name: Deploy to Staging\n          deployment: staging\n          script:\n            - echo "Deploying to staging..."\n            - npm run deploy:staging\n            \n      - step:\n          name: Deploy to Production\n          deployment: production\n          trigger: manual\n          script:\n            - echo "Deploying to production..."\n            - npm run deploy:production\n\n    develop:\n      - step:\n          name: Build and Test\n          caches:\n            - nodemodules\n          script:\n            - npm ci\n            - npm run test\n            - npm run build\n            \n      - step:\n          name: Deploy to Development\n          deployment: development\n          script:\n            - echo "Deploying to development..."\n            - npm run deploy:dev\n\n  pull-requests:\n    \'**\':\n      - step:\n          name: PR Build and Test\n          caches:\n            - nodemodules\n          script:\n            - npm ci\n            - npm run lint\n            - npm run test\n            - npm run build\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-step-3-advanced-multi-language-pipeline",children:"\u25b6\ufe0f Step 3: Advanced Multi-Language Pipeline"}),"\n",(0,s.jsx)(n.h3,{id:"full-stack-application-pipeline",children:"Full-Stack Application Pipeline"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"Create advanced bitbucket-pipelines.yml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'image: atlassian/default-image:3\n\ndefinitions:\n  services:\n    postgres:\n      image: postgres:15\n      variables:\n        POSTGRES_DB: testdb\n        POSTGRES_USER: testuser\n        POSTGRES_PASSWORD: testpass\n        \n    redis:\n      image: redis:7-alpine\n      \n  caches:\n    nodemodules: frontend/node_modules\n    pip: ~/.cache/pip\n    maven: ~/.m2/repository\n    \n  steps:\n    - step: &frontend-build\n        name: Frontend Build & Test\n        image: node:18\n        caches:\n          - nodemodules\n        script:\n          - cd frontend\n          - npm ci\n          - npm run lint\n          - npm run test:unit\n          - npm run build\n        artifacts:\n          - frontend/dist/**\n          - frontend/coverage/**\n          \n    - step: &backend-build\n        name: Backend Build & Test\n        image: python:3.9\n        services:\n          - postgres\n          - redis\n        caches:\n          - pip\n        script:\n          - cd backend\n          - pip install -r requirements.txt\n          - pip install -r requirements-dev.txt\n          - flake8 .\n          - pytest tests/ --cov=app --cov-report=xml\n          - python -m pytest tests/integration/\n        artifacts:\n          - backend/coverage.xml\n          - backend/test-results.xml\n          \n    - step: &api-tests\n        name: API Integration Tests\n        image: python:3.9\n        services:\n          - postgres\n          - redis\n        script:\n          - cd backend\n          - pip install -r requirements.txt\n          - python -m pytest tests/api/ -v\n          - newman run postman/api-tests.json\n          \n    - step: &security-scan\n        name: Security Scanning\n        script:\n          # Frontend security\n          - cd frontend && npm audit --audit-level high\n          - cd frontend && npx snyk test\n          \n          # Backend security\n          - cd backend && pip install safety bandit\n          - cd backend && safety check\n          - cd backend && bandit -r app/\n          \n          # Container security\n          - docker build -t myapp:$BITBUCKET_BUILD_NUMBER .\n          - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n            aquasec/trivy image myapp:$BITBUCKET_BUILD_NUMBER\n            \n    - step: &build-docker\n        name: Build Docker Image\n        services:\n          - docker\n        script:\n          - export IMAGE_NAME=$BITBUCKET_REPO_FULL_NAME\n          - export IMAGE_TAG=$BITBUCKET_BUILD_NUMBER\n          - docker build -t $IMAGE_NAME:$IMAGE_TAG .\n          - docker tag $IMAGE_NAME:$IMAGE_TAG $IMAGE_NAME:latest\n          \n          # Push to registry\n          - echo $DOCKER_PASSWORD | docker login --username $DOCKER_USERNAME --password-stdin\n          - docker push $IMAGE_NAME:$IMAGE_TAG\n          - docker push $IMAGE_NAME:latest\n          \n    - step: &deploy-staging\n        name: Deploy to Staging\n        deployment: staging\n        script:\n          - echo "Deploying to staging environment..."\n          - export IMAGE_TAG=$BITBUCKET_BUILD_NUMBER\n          \n          # Update Kubernetes deployment\n          - kubectl config use-context staging\n          - kubectl set image deployment/myapp myapp=$BITBUCKET_REPO_FULL_NAME:$IMAGE_TAG\n          - kubectl rollout status deployment/myapp\n          \n          # Run smoke tests\n          - sleep 30\n          - curl -f https://staging.myapp.com/health\n          \n    - step: &e2e-tests\n        name: End-to-End Tests\n        image: cypress/included:13.3.0\n        script:\n          - cd e2e-tests\n          - npm ci\n          - cypress run --config baseUrl=https://staging.myapp.com\n        artifacts:\n          - e2e-tests/cypress/screenshots/**\n          - e2e-tests/cypress/videos/**\n          \n    - step: &deploy-production\n        name: Deploy to Production\n        deployment: production\n        trigger: manual\n        script:\n          - echo "Deploying to production environment..."\n          - export IMAGE_TAG=$BITBUCKET_BUILD_NUMBER\n          \n          # Blue-green deployment\n          - kubectl config use-context production\n          - kubectl apply -f deployment/blue-green-deployment.yml\n          - kubectl set image deployment/myapp-green myapp=$BITBUCKET_REPO_FULL_NAME:$IMAGE_TAG\n          - kubectl rollout status deployment/myapp-green\n          \n          # Switch traffic\n          - kubectl patch service myapp -p \'{"spec":{"selector":{"version":"green"}}}\'\n          \n          # Verify deployment\n          - sleep 60\n          - curl -f https://myapp.com/health\n\npipelines:\n  default:\n    - parallel:\n        - step: *frontend-build\n        - step: *backend-build\n    - step: *api-tests\n    \n  branches:\n    main:\n      - parallel:\n          - step: *frontend-build\n          - step: *backend-build\n      - step: *security-scan\n      - step: *build-docker\n      - step: *deploy-staging\n      - step: *e2e-tests\n      - step: *deploy-production\n      \n    develop:\n      - parallel:\n          - step: *frontend-build\n          - step: *backend-build\n      - step: *api-tests\n      - step:\n          name: Deploy to Development\n          deployment: development\n          script:\n            - echo "Deploying to development..."\n            - kubectl config use-context development\n            - kubectl set image deployment/myapp myapp=$BITBUCKET_REPO_FULL_NAME:latest\n            \n  pull-requests:\n    \'**\':\n      - parallel:\n          - step: *frontend-build\n          - step: *backend-build\n      - step: *api-tests\n      - step:\n          name: PR Quality Check\n          script:\n            - echo "Running quality checks for PR..."\n            - cd frontend && npm run lint:report\n            - cd backend && flake8 --format=html --htmldir=reports/flake8\n          artifacts:\n            - frontend/lint-report.html\n            - backend/reports/**\n            \n  custom:\n    security-audit:\n      - step: *security-scan\n      \n    performance-test:\n      - step:\n          name: Performance Testing\n          image: loadimpact/k6:latest\n          script:\n            - k6 run --out json=results.json performance-tests/load-test.js\n          artifacts:\n            - results.json\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-step-4-database-migrations-and-testing",children:"\ud83d\udcca Step 4: Database Migrations and Testing"}),"\n",(0,s.jsx)(n.h3,{id:"database-pipeline-with-migrations",children:"Database Pipeline with Migrations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'definitions:\n  services:\n    postgres:\n      image: postgres:15\n      variables:\n        POSTGRES_DB: myapp\n        POSTGRES_USER: postgres\n        POSTGRES_PASSWORD: postgres\n        \n  steps:\n    - step: &database-setup\n        name: Database Setup & Migrations\n        image: python:3.9\n        services:\n          - postgres\n        script:\n          - pip install -r requirements.txt\n          - export DATABASE_URL="postgresql://postgres:postgres@localhost:5432/myapp"\n          \n          # Wait for database\n          - apt-get update && apt-get install -y postgresql-client\n          - until pg_isready -h localhost -p 5432; do sleep 1; done\n          \n          # Run migrations\n          - python manage.py migrate\n          - python manage.py loaddata fixtures/test_data.json\n          \n          # Verify database\n          - python manage.py check --database default\n          \n    - step: &integration-tests\n        name: Integration Tests with Database\n        image: python:3.9\n        services:\n          - postgres\n        script:\n          - pip install -r requirements.txt\n          - export DATABASE_URL="postgresql://postgres:postgres@localhost:5432/myapp"\n          - until pg_isready -h localhost -p 5432; do sleep 1; done\n          \n          # Run database tests\n          - python -m pytest tests/integration/ -v\n          - python -m pytest tests/models/ -v\n          \n          # Performance tests\n          - python -m pytest tests/performance/ -v --benchmark-only\n        artifacts:\n          - test-results.xml\n          - benchmark-results.json\n\npipelines:\n  branches:\n    main:\n      - step: *database-setup\n      - step: *integration-tests\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-step-5-multi-environment-deployments",children:"\ud83d\udd0d Step 5: Multi-Environment Deployments"}),"\n",(0,s.jsx)(n.h3,{id:"environment-specific-configurations",children:"Environment-Specific Configurations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"definitions:\n  steps:\n    - step: &deploy-to-aws\n        name: Deploy to AWS\n        image: atlassian/pipelines-awscli:latest\n        script:\n          - export AWS_DEFAULT_REGION=$AWS_REGION\n          - export IMAGE_TAG=$BITBUCKET_BUILD_NUMBER\n          \n          # Update ECS service\n          - aws ecs update-service \\\n              --cluster $ECS_CLUSTER \\\n              --service $ECS_SERVICE \\\n              --task-definition $TASK_DEFINITION:$IMAGE_TAG\n              \n          # Wait for deployment\n          - aws ecs wait services-stable \\\n              --cluster $ECS_CLUSTER \\\n              --services $ECS_SERVICE\n              \n          # Verify deployment\n          - aws ecs describe-services \\\n              --cluster $ECS_CLUSTER \\\n              --services $ECS_SERVICE\n              \n    - step: &deploy-to-gcp\n        name: Deploy to Google Cloud\n        image: google/cloud-sdk:alpine\n        script:\n          - echo $GCLOUD_SERVICE_KEY | base64 -d > gcloud-service-key.json\n          - gcloud auth activate-service-account --key-file gcloud-service-key.json\n          - gcloud config set project $GCLOUD_PROJECT\n          \n          # Deploy to Cloud Run\n          - gcloud run deploy $SERVICE_NAME \\\n              --image gcr.io/$GCLOUD_PROJECT/$IMAGE_NAME:$BITBUCKET_BUILD_NUMBER \\\n              --platform managed \\\n              --region $GCLOUD_REGION \\\n              --allow-unauthenticated\n              \n    - step: &deploy-to-azure\n        name: Deploy to Azure\n        image: mcr.microsoft.com/azure-cli:latest\n        script:\n          - az login --service-principal \\\n              -u $AZURE_CLIENT_ID \\\n              -p $AZURE_CLIENT_SECRET \\\n              --tenant $AZURE_TENANT_ID\n              \n          # Deploy to Container Instances\n          - az container create \\\n              --resource-group $AZURE_RESOURCE_GROUP \\\n              --name $CONTAINER_NAME \\\n              --image $DOCKER_REGISTRY/$IMAGE_NAME:$BITBUCKET_BUILD_NUMBER \\\n              --dns-name-label $DNS_LABEL \\\n              --ports 80\n\npipelines:\n  branches:\n    main:\n      - step:\n          name: Build and Push\n          services:\n            - docker\n          script:\n            - docker build -t myapp:$BITBUCKET_BUILD_NUMBER .\n            - echo $DOCKER_PASSWORD | docker login --username $DOCKER_USERNAME --password-stdin\n            - docker push myapp:$BITBUCKET_BUILD_NUMBER\n            \n      - parallel:\n          - step:\n              <<: *deploy-to-aws\n              deployment: aws-production\n          - step:\n              <<: *deploy-to-gcp\n              deployment: gcp-production\n          - step:\n              <<: *deploy-to-azure\n              deployment: azure-production\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-step-6-advanced-pipeline-features",children:"\ud83d\udcc8 Step 6: Advanced Pipeline Features"}),"\n",(0,s.jsx)(n.h3,{id:"conditional-deployments-and-approvals",children:"Conditional Deployments and Approvals"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'pipelines:\n  branches:\n    main:\n      - step:\n          name: Build Application\n          script:\n            - echo "Building application..."\n            - npm run build\n            \n      - step:\n          name: Deploy to Staging\n          deployment: staging\n          script:\n            - echo "Deploying to staging..."\n            \n      - step:\n          name: Run Acceptance Tests\n          script:\n            - echo "Running acceptance tests..."\n            - npm run test:acceptance\n            \n      - step:\n          name: Production Deployment Approval\n          script:\n            - echo "Waiting for production deployment approval..."\n          trigger: manual\n          \n      - step:\n          name: Deploy to Production\n          deployment: production\n          script:\n            - echo "Deploying to production..."\n            \n  tags:\n    \'v*\':\n      - step:\n          name: Build Release\n          script:\n            - echo "Building release $BITBUCKET_TAG"\n            - npm run build:production\n            \n      - step:\n          name: Create Release Package\n          script:\n            - tar -czf release-$BITBUCKET_TAG.tar.gz dist/\n          artifacts:\n            - release-*.tar.gz\n            \n      - step:\n          name: Deploy Release\n          deployment: production\n          script:\n            - echo "Deploying release $BITBUCKET_TAG"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-variables-and-secrets",children:"Pipeline Variables and Secrets"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# Using repository variables and secrets\npipelines:\n  default:\n    - step:\n        name: Deploy with Variables\n        script:\n          - echo "Environment: $ENVIRONMENT"\n          - echo "API URL: $API_URL"\n          - echo "Database: $DATABASE_NAME"\n          \n          # Use secured variables (defined in repository settings)\n          - curl -H "Authorization: Bearer $API_TOKEN" $API_URL/deploy\n          - kubectl config set-credentials user --token=$KUBE_TOKEN\n'})}),"\n",(0,s.jsx)(n.h3,{id:"parallel-and-matrix-builds",children:"Parallel and Matrix Builds"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'pipelines:\n  default:\n    - parallel:\n        - step:\n            name: Test Node 16\n            image: node:16\n            script:\n              - npm ci\n              - npm test\n        - step:\n            name: Test Node 18\n            image: node:18\n            script:\n              - npm ci\n              - npm test\n        - step:\n            name: Test Node 20\n            image: node:20\n            script:\n              - npm ci\n              - npm test\n              \n    - step:\n        name: Integration Tests\n        script:\n          - echo "All Node versions passed, running integration tests..."\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-step-7-security-and-best-practices",children:"\ud83d\udee1\ufe0f Step 7: Security and Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"secure-pipeline-configuration",children:"Secure Pipeline Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"definitions:\n  steps:\n    - step: &security-hardened\n        name: Security Hardened Build\n        image: node:18-alpine\n        script:\n          # Update packages\n          - apk update && apk upgrade\n          \n          # Install dependencies\n          - npm ci --only=production\n          \n          # Security audit\n          - npm audit --audit-level high\n          \n          # Vulnerability scanning\n          - npx snyk test --severity-threshold=high\n          \n          # Build with security flags\n          - npm run build:secure\n          \n        # Resource limits\n        size: 2x\n        \n        # Fail fast on security issues\n        fail-fast: true\n\npipelines:\n  default:\n    - step: *security-hardened\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sast-and-dependency-scanning",children:"SAST and Dependency Scanning"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"definitions:\n  steps:\n    - step: &sast-scan\n        name: Static Application Security Testing\n        script:\n          # SonarQube scan\n          - sonar-scanner \\\n              -Dsonar.projectKey=$SONAR_PROJECT_KEY \\\n              -Dsonar.sources=src \\\n              -Dsonar.host.url=$SONAR_HOST_URL \\\n              -Dsonar.login=$SONAR_TOKEN\n              \n          # Semgrep SAST\n          - python -m pip install semgrep\n          - semgrep --config=auto --json --output=semgrep-results.json .\n          \n          # CodeQL analysis\n          - codeql database create codeql-db --language=javascript\n          - codeql database analyze codeql-db --format=json --output=codeql-results.json\n          \n        artifacts:\n          - semgrep-results.json\n          - codeql-results.json\n          - sonar-report.json\n\npipelines:\n  pull-requests:\n    '**':\n      - step: *sast-scan\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-common-use-cases",children:"\ud83d\udccb Common Use Cases"}),"\n",(0,s.jsxs)(n.h3,{id:"1-web-application-cicd",children:["1. ",(0,s.jsx)(n.strong,{children:"Web Application CI/CD"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Frontend and backend builds"}),"\n",(0,s.jsx)(n.li,{children:"Automated testing and quality checks"}),"\n",(0,s.jsx)(n.li,{children:"Multi-environment deployments"}),"\n",(0,s.jsx)(n.li,{children:"Performance and security testing"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"2-microservices-pipeline",children:["2. ",(0,s.jsx)(n.strong,{children:"Microservices Pipeline"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Service-specific builds"}),"\n",(0,s.jsx)(n.li,{children:"Container orchestration"}),"\n",(0,s.jsx)(n.li,{children:"API testing and integration"}),"\n",(0,s.jsx)(n.li,{children:"Service mesh deployment"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"3-mobile-app-cicd",children:["3. ",(0,s.jsx)(n.strong,{children:"Mobile App CI/CD"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cross-platform builds"}),"\n",(0,s.jsx)(n.li,{children:"App store deployment"}),"\n",(0,s.jsx)(n.li,{children:"Device testing"}),"\n",(0,s.jsx)(n.li,{children:"Performance monitoring"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"4-infrastructure-as-code",children:["4. ",(0,s.jsx)(n.strong,{children:"Infrastructure as Code"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Terraform validation and deployment"}),"\n",(0,s.jsx)(n.li,{children:"Configuration management"}),"\n",(0,s.jsx)(n.li,{children:"Compliance checking"}),"\n",(0,s.jsx)(n.li,{children:"Multi-cloud deployments"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-what-youll-achieve",children:"\u2705 What You'll Achieve"}),"\n",(0,s.jsx)(n.p,{children:"After following this guide, you'll have:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83c\udfd7\ufe0f Integrated CI/CD Pipeline"})," - Seamless integration with Bitbucket repositories"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83e\uddea Comprehensive Testing"})," - Unit, integration, and end-to-end testing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udd0d Quality Gates"})," - Automated code quality and security checks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\ude80 Multi-Environment Deployment"})," - Staging and production deployments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udcca Pipeline Monitoring"})," - Build status and deployment tracking"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udee1\ufe0f Security Integration"})," - SAST, dependency scanning, and container security"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u26a1 Parallel Execution"})," - Efficient parallel build and test execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udd04 GitOps Workflow"})," - Git-based pipeline configuration and versioning"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Bitbucket Pipelines is now configured for your integrated CI/CD workflows!"})]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);