"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2987],{5725:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"CI-CD/CD/spinnaker","title":"Spinnaker","description":"Spinnaker is an open-source, multi-cloud continuous delivery platform for releasing software changes with high velocity and confidence, featuring advanced deployment strategies.","source":"@site/docs/CI-CD/CD/spinnaker.md","sourceDirName":"CI-CD/CD","slug":"/CI-CD/Spinnaker","permalink":"/docs/CI-CD/Spinnaker","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CD/spinnaker.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Spinnaker","description":"Spinnaker is an open-source, multi-cloud continuous delivery platform for releasing software changes with high velocity and confidence, featuring advanced deployment strategies.","slug":"/CI-CD/Spinnaker","keywords":["Spinnaker","continuous delivery","multi-cloud deployment","canary deployments","blue-green deployment","deployment strategies","cloud deployment","Netflix Spinnaker","Kubernetes deployment","AWS deployment"]},"sidebar":"tutorialSidebar","previous":{"title":"ArgoCD","permalink":"/docs/CICD/ArgoCD"},"next":{"title":"Testing & Scanning","permalink":"/docs/category/testing--scanning"}}');var t=a(4848),i=a(8453);const r={sidebar_position:2,title:"Spinnaker",description:"Spinnaker is an open-source, multi-cloud continuous delivery platform for releasing software changes with high velocity and confidence, featuring advanced deployment strategies.",slug:"/CI-CD/Spinnaker",keywords:["Spinnaker","continuous delivery","multi-cloud deployment","canary deployments","blue-green deployment","deployment strategies","cloud deployment","Netflix Spinnaker","Kubernetes deployment","AWS deployment"]},o="\ud83c\udf0a Advanced Multi-Cloud Deployments with Spinnaker",l={},p=[{value:"Key Features",id:"key-features",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"\ud83e\uddf0 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\udd27 Step 1: Complete Spinnaker Setup",id:"-step-1-complete-spinnaker-setup",level:2},{value:"\ud83c\udfd7\ufe0f Step 2: Configuration Setup",id:"\ufe0f-step-2-configuration-setup",level:2},{value:"\ud83d\udcc1 Step 3: Create Advanced Deployment Pipelines",id:"-step-3-create-advanced-deployment-pipelines",level:2},{value:"\u25b6\ufe0f Step 4: Advanced Deployment Strategies",id:"\ufe0f-step-4-advanced-deployment-strategies",level:2},{value:"\ud83d\udcca Step 5: Monitoring and Analytics",id:"-step-5-monitoring-and-analytics",level:2},{value:"\ud83d\udd0d What You&#39;ll See",id:"-what-youll-see",level:2},{value:"Spinnaker UI Dashboard",id:"spinnaker-ui-dashboard",level:3},{value:"Pipeline Execution Output",id:"pipeline-execution-output",level:3},{value:"Deployment Analytics",id:"deployment-analytics",level:3},{value:"Pros &amp; Cons",id:"pros--cons",level:2},{value:"\u2705 Pros",id:"-pros",level:3},{value:"\u274c Cons",id:"-cons",level:3},{value:"Conclusion",id:"conclusion",level:2}];function c(n){const e={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"-advanced-multi-cloud-deployments-with-spinnaker",children:"\ud83c\udf0a Advanced Multi-Cloud Deployments with Spinnaker"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Spinnaker"})," is an ",(0,t.jsx)(e.strong,{children:"open-source"}),", ",(0,t.jsx)(e.strong,{children:"multi-cloud continuous delivery platform"})," originally developed by ",(0,t.jsx)(e.strong,{children:"Netflix"})," for releasing software changes with ",(0,t.jsx)(e.strong,{children:"high velocity"})," and ",(0,t.jsx)(e.strong,{children:"confidence"}),". Perfect for ",(0,t.jsx)(e.strong,{children:"advanced deployment strategies"}),", ",(0,t.jsx)(e.strong,{children:"canary analysis"}),", ",(0,t.jsx)(e.strong,{children:"multi-cloud orchestration"}),", and ",(0,t.jsx)(e.strong,{children:"enterprise-grade"})," release management."]}),"\n",(0,t.jsx)(e.h2,{id:"key-features",children:"Key Features"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-Cloud Support"}),": Deploy to AWS, GCP, Azure, Kubernetes, and more"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Advanced Deployment Strategies"}),": Canary, blue-green, rolling, and red-black deployments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Automated Canary Analysis"}),": Metrics-driven deployment decisions"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Pipeline as Code"}),": Version-controlled deployment pipelines"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Enterprise Security"}),": RBAC, audit trails, and compliance features"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Enterprise Deployments"}),": Large-scale, multi-environment release management"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Canary Deployments"}),": Risk-free deployments with automated rollback"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-Cloud Strategy"}),": Consistent deployments across cloud providers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Compliance Requirements"}),": Audit trails and approval workflows"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"-prerequisites",children:"\ud83e\uddf0 Prerequisites"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Docker & Docker Compose"})," installed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Kubernetes cluster"})," access (for K8s deployments)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cloud provider"})," credentials (AWS, GCP, Azure)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"8GB+ RAM"})," recommended for Spinnaker services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Persistent storage"})," for configuration and data"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"-step-1-complete-spinnaker-setup",children:"\ud83d\udd27 Step 1: Complete Spinnaker Setup"}),"\n",(0,t.jsx)(e.p,{children:"Create a comprehensive Docker Compose setup:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  # Redis for caching and session storage\n  redis:\n    image: redis:7-alpine\n    container_name: spinnaker-redis\n    restart: unless-stopped\n    ports:\n      - "6379:6379"\n    volumes:\n      - redis-data:/data\n    command: redis-server --appendonly yes\n    healthcheck:\n      test: ["CMD", "redis-cli", "ping"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  # MinIO for artifact storage\n  minio:\n    image: minio/minio:latest\n    container_name: spinnaker-minio\n    restart: unless-stopped\n    ports:\n      - "9001:9000"\n      - "9002:9001"\n    environment:\n      - MINIO_ROOT_USER=spinnaker\n      - MINIO_ROOT_PASSWORD=spinnaker123\n    volumes:\n      - minio-data:/data\n    command: server /data --console-address ":9001"\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]\n      interval: 30s\n      timeout: 20s\n      retries: 3\n\n  # Clouddriver - Cloud provider integration\n  clouddriver:\n    image: spinnaker/clouddriver:8.4.0\n    container_name: spinnaker-clouddriver\n    restart: unless-stopped\n    ports:\n      - "7002:7002"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - JAVA_OPTS=-Xmx2g -Xms1g\n    volumes:\n      - ./spinnaker-config:/opt/spinnaker/config\n      - ~/.kube:/home/spinnaker/.kube:ro\n      - ~/.aws:/home/spinnaker/.aws:ro\n      - ~/.config/gcloud:/home/spinnaker/.config/gcloud:ro\n    depends_on:\n      redis:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:7002/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\n  # Orca - Orchestration engine\n  orca:\n    image: spinnaker/orca:8.4.0\n    container_name: spinnaker-orca\n    restart: unless-stopped\n    ports:\n      - "8083:8083"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - JAVA_OPTS=-Xmx2g -Xms1g\n    volumes:\n      - ./spinnaker-config:/opt/spinnaker/config\n    depends_on:\n      redis:\n        condition: service_healthy\n      clouddriver:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8083/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\n  # Gate - API gateway\n  gate:\n    image: spinnaker/gate:6.58.0\n    container_name: spinnaker-gate\n    restart: unless-stopped\n    ports:\n      - "8084:8084"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - JAVA_OPTS=-Xmx1g -Xms512m\n    volumes:\n      - ./spinnaker-config:/opt/spinnaker/config\n    depends_on:\n      redis:\n        condition: service_healthy\n      orca:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8084/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\n  # Deck - UI\n  deck:\n    image: spinnaker/deck:3.12.0\n    container_name: spinnaker-deck\n    restart: unless-stopped\n    ports:\n      - "9000:9000"\n    environment:\n      - API_HOST=http://gate:8084\n      - DECK_HOST=0.0.0.0\n      - DECK_PORT=9000\n    depends_on:\n      gate:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:9000"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  # Echo - Event and notification service\n  echo:\n    image: spinnaker/echo:2.37.0\n    container_name: spinnaker-echo\n    restart: unless-stopped\n    ports:\n      - "8089:8089"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - JAVA_OPTS=-Xmx1g -Xms512m\n    volumes:\n      - ./spinnaker-config:/opt/spinnaker/config\n    depends_on:\n      redis:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8089/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\n  # Front50 - Metadata service\n  front50:\n    image: spinnaker/front50:2.28.0\n    container_name: spinnaker-front50\n    restart: unless-stopped\n    ports:\n      - "8080:8080"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - JAVA_OPTS=-Xmx1g -Xms512m\n    volumes:\n      - ./spinnaker-config:/opt/spinnaker/config\n      - front50-data:/opt/spinnaker/data\n    depends_on:\n      redis:\n        condition: service_healthy\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\nvolumes:\n  redis-data:\n  minio-data:\n  front50-data:\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\ufe0f-step-2-configuration-setup",children:"\ud83c\udfd7\ufe0f Step 2: Configuration Setup"}),"\n",(0,t.jsx)(e.p,{children:"Create comprehensive Spinnaker configuration:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Create configuration directory\nmkdir -p spinnaker-config\n"})}),"\n",(0,t.jsxs)(e.p,{children:["Create ",(0,t.jsx)(e.code,{children:"spinnaker-config/spinnaker.yml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'spinnaker:\n  extensibility:\n    plugins: {}\n    repositories: {}\n  \nproviders:\n  kubernetes:\n    enabled: true\n    accounts:\n      - name: local-kubernetes\n        requiredGroupMembership: []\n        providerVersion: V2\n        permissions: {}\n        dockerRegistries: []\n        configureImagePullSecrets: true\n        cacheThreads: 1\n        namespaces: []\n        omitNamespaces: []\n        kinds: []\n        omitKinds: []\n        customResources: []\n        cachingPolicies: []\n        oAuthScopes: []\n        onlySpinnakerManaged: false\n        kubeconfigFile: /home/spinnaker/.kube/config\n        context: default\n        \n  aws:\n    enabled: true\n    accounts:\n      - name: aws-account\n        accountId: "123456789012"\n        regions:\n          - name: us-east-1\n          - name: us-west-2\n        assumeRole: role/SpinnakerRole\n        \n  google:\n    enabled: true\n    accounts:\n      - name: gcp-account\n        project: my-gcp-project\n        jsonPath: /home/spinnaker/.config/gcloud/service-account.json\n        \n  azure:\n    enabled: true\n    accounts:\n      - name: azure-account\n        clientId: azure-client-id\n        appKey: azure-app-key\n        tenantId: azure-tenant-id\n        subscriptionId: azure-subscription-id\n\ndeploymentEnvironment:\n  size: SMALL\n  type: Distributed\n  accountName: local-kubernetes\n  updateVersions: true\n  consul:\n    enabled: false\n  vault:\n    enabled: false\n  customSizing: {}\n  sidecars: {}\n  initContainers: {}\n  hostAliases: {}\n  affinity: {}\n  tolerations: []\n  nodeSelectors: {}\n  gitConfig:\n    upstreamUser: spinnaker\n  livenessProbeConfig:\n    enabled: false\n  haServices:\n    clouddriver:\n      enabled: false\n    echo:\n      enabled: false\n\npersistentStorage:\n  persistentStoreType: s3\n  azs: {}\n  gcs: {}\n  redis: {}\n  s3:\n    bucket: spinnaker-artifacts\n    rootFolder: front50\n    region: us-east-1\n    endpoint: http://minio:9000\n    accessKeyId: spinnaker\n    secretAccessKey: spinnaker123\n    pathStyleAccess: true\n  oracle: {}\n\nfeatures:\n  auth: false\n  fiat: false\n  chaos: false\n  entityTags: false\n  jobs: false\n  pipelineTemplates: true\n  artifacts: true\n  managedPipelineTemplatesV2UI: true\n\nmetricStores:\n  datadog:\n    enabled: false\n  prometheus:\n    enabled: true\n    add_source_metalabels: true\n  stackdriver:\n    enabled: false\n  newrelic:\n    enabled: false\n  period: 30\n  enabled: false\n\nnotifications:\n  slack:\n    enabled: true\n    botName: spinnaker\n    token: xoxb-your-slack-token\n  email:\n    enabled: false\n  githubStatus:\n    enabled: false\n\ntimezone: America/Los_Angeles\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"-step-3-create-advanced-deployment-pipelines",children:"\ud83d\udcc1 Step 3: Create Advanced Deployment Pipelines"}),"\n",(0,t.jsx)(e.p,{children:"Create a comprehensive canary deployment pipeline:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "application": "myapp",\n  "name": "Canary Deployment Pipeline",\n  "description": "Advanced canary deployment with automated analysis",\n  "parameterConfig": [\n    {\n      "name": "image",\n      "description": "Docker image to deploy",\n      "default": "myorg/myapp:latest",\n      "hasOptions": false,\n      "options": []\n    },\n    {\n      "name": "canaryPercentage",\n      "description": "Percentage of traffic for canary",\n      "default": "10",\n      "hasOptions": true,\n      "options": [\n        {"value": "5"},\n        {"value": "10"},\n        {"value": "25"},\n        {"value": "50"}\n      ]\n    }\n  ],\n  "stages": [\n    {\n      "name": "Deploy Baseline",\n      "type": "deployManifest",\n      "refId": "1",\n      "requisiteStageRefIds": [],\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifestArtifactId": "baseline-manifest",\n      "manifests": [\n        {\n          "apiVersion": "apps/v1",\n          "kind": "Deployment",\n          "metadata": {\n            "name": "myapp-baseline",\n            "namespace": "production",\n            "labels": {\n              "app": "myapp",\n              "version": "baseline"\n            }\n          },\n          "spec": {\n            "replicas": 3,\n            "selector": {\n              "matchLabels": {\n                "app": "myapp",\n                "version": "baseline"\n              }\n            },\n            "template": {\n              "metadata": {\n                "labels": {\n                  "app": "myapp",\n                  "version": "baseline"\n                }\n              },\n              "spec": {\n                "containers": [\n                  {\n                    "name": "myapp",\n                    "image": "myorg/myapp:stable",\n                    "ports": [{"containerPort": 8080}],\n                    "resources": {\n                      "requests": {\n                        "cpu": "100m",\n                        "memory": "128Mi"\n                      },\n                      "limits": {\n                        "cpu": "500m",\n                        "memory": "512Mi"\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          }\n        }\n      ],\n      "moniker": {\n        "app": "myapp",\n        "cluster": "baseline"\n      },\n      "skipExpressionEvaluation": false\n    },\n    {\n      "name": "Deploy Canary",\n      "type": "deployManifest",\n      "refId": "2",\n      "requisiteStageRefIds": ["1"],\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifests": [\n        {\n          "apiVersion": "apps/v1",\n          "kind": "Deployment",\n          "metadata": {\n            "name": "myapp-canary",\n            "namespace": "production",\n            "labels": {\n              "app": "myapp",\n              "version": "canary"\n            }\n          },\n          "spec": {\n            "replicas": 1,\n            "selector": {\n              "matchLabels": {\n                "app": "myapp",\n                "version": "canary"\n              }\n            },\n            "template": {\n              "metadata": {\n                "labels": {\n                  "app": "myapp",\n                  "version": "canary"\n                }\n              },\n              "spec": {\n                "containers": [\n                  {\n                    "name": "myapp",\n                    "image": "${parameters.image}",\n                    "ports": [{"containerPort": 8080}],\n                    "resources": {\n                      "requests": {\n                        "cpu": "100m",\n                        "memory": "128Mi"\n                      },\n                      "limits": {\n                        "cpu": "500m",\n                        "memory": "512Mi"\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          }\n        }\n      ],\n      "moniker": {\n        "app": "myapp",\n        "cluster": "canary"\n      }\n    },\n    {\n      "name": "Configure Traffic Split",\n      "type": "deployManifest",\n      "refId": "3",\n      "requisiteStageRefIds": ["2"],\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifests": [\n        {\n          "apiVersion": "networking.istio.io/v1beta1",\n          "kind": "VirtualService",\n          "metadata": {\n            "name": "myapp-traffic-split",\n            "namespace": "production"\n          },\n          "spec": {\n            "hosts": ["myapp.production.svc.cluster.local"],\n            "http": [\n              {\n                "match": [{"headers": {"canary": {"exact": "true"}}}],\n                "route": [{"destination": {"host": "myapp-canary", "subset": "canary"}}]\n              },\n              {\n                "route": [\n                  {\n                    "destination": {"host": "myapp-baseline", "subset": "baseline"},\n                    "weight": "${100 - parameters.canaryPercentage}"\n                  },\n                  {\n                    "destination": {"host": "myapp-canary", "subset": "canary"},\n                    "weight": "${parameters.canaryPercentage}"\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    {\n      "name": "Canary Analysis",\n      "type": "kayentaCanary",\n      "refId": "4",\n      "requisiteStageRefIds": ["3"],\n      "analysisType": "RealTime",\n      "canaryConfig": {\n        "canaryAnalysisIntervalMins": "5",\n        "canaryConfigId": "myapp-canary-config",\n        "lifetimeDurationMins": "30",\n        "metricsAccountName": "prometheus-account",\n        "scopes": [\n          {\n            "scopeName": "production",\n            "controlScope": "myapp-baseline",\n            "experimentScope": "myapp-canary"\n          }\n        ],\n        "scoreThresholds": {\n          "marginal": "75",\n          "pass": "90"\n        },\n        "storageAccountName": "minio-account"\n      }\n    },\n    {\n      "name": "Promote or Rollback",\n      "type": "checkPreconditions",\n      "refId": "5",\n      "requisiteStageRefIds": ["4"],\n      "preconditions": [\n        {\n          "context": {\n            "expression": "${#stage(\'Canary Analysis\')[\'context\'][\'canaryScore\'] > 90}"\n          },\n          "failPipeline": false,\n          "type": "expression"\n        }\n      ]\n    },\n    {\n      "name": "Promote Canary",\n      "type": "deployManifest",\n      "refId": "6",\n      "requisiteStageRefIds": ["5"],\n      "stageEnabled": {\n        "expression": "${#stage(\'Canary Analysis\')[\'context\'][\'canaryScore\'] > 90}",\n        "type": "expression"\n      },\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifests": [\n        {\n          "apiVersion": "apps/v1",\n          "kind": "Deployment",\n          "metadata": {\n            "name": "myapp-baseline",\n            "namespace": "production"\n          },\n          "spec": {\n            "template": {\n              "spec": {\n                "containers": [\n                  {\n                    "name": "myapp",\n                    "image": "${parameters.image}"\n                  }\n                ]\n              }\n            }\n          }\n        }\n      ]\n    },\n    {\n      "name": "Cleanup Canary",\n      "type": "deleteManifest",\n      "refId": "7",\n      "requisiteStageRefIds": ["6"],\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifestName": "deployment myapp-canary",\n      "options": {\n        "cascading": true\n      }\n    },\n    {\n      "name": "Rollback on Failure",\n      "type": "deployManifest",\n      "refId": "8",\n      "requisiteStageRefIds": ["5"],\n      "stageEnabled": {\n        "expression": "${#stage(\'Canary Analysis\')[\'context\'][\'canaryScore\'] <= 90}",\n        "type": "expression"\n      },\n      "account": "local-kubernetes",\n      "cloudProvider": "kubernetes",\n      "location": "production",\n      "manifests": [\n        {\n          "apiVersion": "networking.istio.io/v1beta1",\n          "kind": "VirtualService",\n          "metadata": {\n            "name": "myapp-traffic-split",\n            "namespace": "production"\n          },\n          "spec": {\n            "hosts": ["myapp.production.svc.cluster.local"],\n            "http": [\n              {\n                "route": [\n                  {\n                    "destination": {"host": "myapp-baseline", "subset": "baseline"},\n                    "weight": 100\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    }\n  ],\n  "triggers": [\n    {\n      "enabled": true,\n      "type": "webhook",\n      "source": "ci-system",\n      "payloadConstraints": {\n        "image": "myorg/myapp:.*"\n      }\n    }\n  ],\n  "notifications": [\n    {\n      "address": "#deployments",\n      "level": "pipeline",\n      "type": "slack",\n      "when": ["pipeline.starting", "pipeline.complete", "pipeline.failed"]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\ufe0f-step-4-advanced-deployment-strategies",children:"\u25b6\ufe0f Step 4: Advanced Deployment Strategies"}),"\n",(0,t.jsx)(e.p,{children:"Create a blue-green deployment pipeline:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'# blue-green-pipeline.py\nimport json\nimport requests\n\ndef create_blue_green_pipeline():\n    """Create a blue-green deployment pipeline"""\n    \n    pipeline = {\n        "application": "myapp",\n        "name": "Blue-Green Deployment",\n        "description": "Zero-downtime blue-green deployment strategy",\n        "stages": [\n            {\n                "name": "Deploy Green Environment",\n                "type": "deployManifest",\n                "refId": "1",\n                "account": "local-kubernetes",\n                "cloudProvider": "kubernetes",\n                "location": "production",\n                "manifests": [\n                    {\n                        "apiVersion": "apps/v1",\n                        "kind": "Deployment",\n                        "metadata": {\n                            "name": "myapp-green",\n                            "namespace": "production",\n                            "labels": {"app": "myapp", "slot": "green"}\n                        },\n                        "spec": {\n                            "replicas": 3,\n                            "selector": {"matchLabels": {"app": "myapp", "slot": "green"}},\n                            "template": {\n                                "metadata": {"labels": {"app": "myapp", "slot": "green"}},\n                                "spec": {\n                                    "containers": [{\n                                        "name": "myapp",\n                                        "image": "${parameters.image}",\n                                        "ports": [{"containerPort": 8080}]\n                                    }]\n                                }\n                            }\n                        }\n                    }\n                ]\n            },\n            {\n                "name": "Health Check Green",\n                "type": "webhook",\n                "refId": "2",\n                "requisiteStageRefIds": ["1"],\n                "url": "http://myapp-green.production.svc.cluster.local:8080/health",\n                "method": "GET",\n                "statusUrlResolution": "getMethod",\n                "retryStatusCodes": [500, 502, 503, 504],\n                "waitForCompletion": True\n            },\n            {\n                "name": "Switch Traffic to Green",\n                "type": "deployManifest",\n                "refId": "3",\n                "requisiteStageRefIds": ["2"],\n                "account": "local-kubernetes",\n                "cloudProvider": "kubernetes",\n                "location": "production",\n                "manifests": [\n                    {\n                        "apiVersion": "v1",\n                        "kind": "Service",\n                        "metadata": {\n                            "name": "myapp-service",\n                            "namespace": "production"\n                        },\n                        "spec": {\n                            "selector": {"app": "myapp", "slot": "green"},\n                            "ports": [{"port": 80, "targetPort": 8080}]\n                        }\n                    }\n                ]\n            },\n            {\n                "name": "Cleanup Blue Environment",\n                "type": "deleteManifest",\n                "refId": "4",\n                "requisiteStageRefIds": ["3"],\n                "account": "local-kubernetes",\n                "cloudProvider": "kubernetes",\n                "location": "production",\n                "manifestName": "deployment myapp-blue",\n                "options": {"cascading": True}\n            }\n        ]\n    }\n    \n    return pipeline\n\ndef submit_pipeline_to_spinnaker(pipeline):\n    """Submit pipeline to Spinnaker"""\n    spinnaker_url = "http://localhost:8084"\n    \n    # Create application if it doesn\'t exist\n    app_data = {\n        "name": pipeline["application"],\n        "email": "admin@example.com",\n        "description": "Application managed by Spinnaker"\n    }\n    \n    requests.post(f"{spinnaker_url}/applications", json=app_data)\n    \n    # Submit pipeline\n    response = requests.post(\n        f"{spinnaker_url}/pipelines",\n        json=pipeline,\n        headers={"Content-Type": "application/json"}\n    )\n    \n    if response.status_code == 200:\n        print("Pipeline created successfully!")\n        return response.json()\n    else:\n        print(f"Failed to create pipeline: {response.text}")\n        return None\n\nif __name__ == "__main__":\n    pipeline = create_blue_green_pipeline()\n    submit_pipeline_to_spinnaker(pipeline)\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"-step-5-monitoring-and-analytics",children:"\ud83d\udcca Step 5: Monitoring and Analytics"}),"\n",(0,t.jsx)(e.p,{children:"Create a comprehensive monitoring setup:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"# spinnaker-analytics.py\nimport requests\nimport json\nfrom datetime import datetime, timedelta\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nclass SpinnakerAnalytics:\n    def __init__(self, spinnaker_url=\"http://localhost:8084\"):\n        self.spinnaker_url = spinnaker_url\n        \n    def get_pipeline_executions(self, application, pipeline_name, limit=50):\n        \"\"\"Get pipeline execution history\"\"\"\n        url = f\"{self.spinnaker_url}/applications/{application}/pipelines/{pipeline_name}/executions\"\n        params = {\"limit\": limit}\n        \n        response = requests.get(url, params=params)\n        if response.status_code == 200:\n            return response.json()\n        return []\n    \n    def calculate_deployment_metrics(self, application, pipeline_name):\n        \"\"\"Calculate deployment frequency and success rate\"\"\"\n        executions = self.get_pipeline_executions(application, pipeline_name)\n        \n        if not executions:\n            return {}\n        \n        total_executions = len(executions)\n        successful_executions = len([e for e in executions if e.get('status') == 'SUCCEEDED'])\n        failed_executions = len([e for e in executions if e.get('status') == 'TERMINAL'])\n        \n        # Calculate deployment frequency (per day)\n        if executions:\n            start_time = min(e.get('startTime', 0) for e in executions)\n            end_time = max(e.get('endTime', 0) for e in executions)\n            days = (end_time - start_time) / (1000 * 60 * 60 * 24)  # Convert ms to days\n            deployment_frequency = total_executions / max(days, 1)\n        else:\n            deployment_frequency = 0\n        \n        # Calculate lead time (average duration)\n        durations = []\n        for execution in executions:\n            if execution.get('startTime') and execution.get('endTime'):\n                duration = (execution['endTime'] - execution['startTime']) / (1000 * 60)  # Convert to minutes\n                durations.append(duration)\n        \n        avg_lead_time = sum(durations) / len(durations) if durations else 0\n        \n        return {\n            'total_executions': total_executions,\n            'successful_executions': successful_executions,\n            'failed_executions': failed_executions,\n            'success_rate': (successful_executions / total_executions * 100) if total_executions > 0 else 0,\n            'deployment_frequency_per_day': deployment_frequency,\n            'average_lead_time_minutes': avg_lead_time,\n            'durations': durations\n        }\n    \n    def generate_dashboard(self, applications):\n        \"\"\"Generate analytics dashboard\"\"\"\n        dashboard_data = {}\n        \n        for app_config in applications:\n            app_name = app_config['name']\n            pipeline_name = app_config['pipeline']\n            \n            metrics = self.calculate_deployment_metrics(app_name, pipeline_name)\n            dashboard_data[f\"{app_name}/{pipeline_name}\"] = metrics\n        \n        return dashboard_data\n    \n    def create_visualizations(self, dashboard_data):\n        \"\"\"Create visualizations for deployment metrics\"\"\"\n        fig, axes = plt.subplots(2, 2, figsize=(15, 10))\n        \n        # Success rates\n        pipeline_names = list(dashboard_data.keys())\n        success_rates = [data.get('success_rate', 0) for data in dashboard_data.values()]\n        \n        axes[0, 0].bar(pipeline_names, success_rates, color='green', alpha=0.7)\n        axes[0, 0].set_title('Pipeline Success Rates')\n        axes[0, 0].set_ylabel('Success Rate (%)')\n        axes[0, 0].tick_params(axis='x', rotation=45)\n        \n        # Deployment frequency\n        deployment_frequencies = [data.get('deployment_frequency_per_day', 0) for data in dashboard_data.values()]\n        axes[0, 1].bar(pipeline_names, deployment_frequencies, color='blue', alpha=0.7)\n        axes[0, 1].set_title('Deployment Frequency')\n        axes[0, 1].set_ylabel('Deployments per Day')\n        axes[0, 1].tick_params(axis='x', rotation=45)\n        \n        # Lead times\n        lead_times = [data.get('average_lead_time_minutes', 0) for data in dashboard_data.values()]\n        axes[1, 0].bar(pipeline_names, lead_times, color='orange', alpha=0.7)\n        axes[1, 0].set_title('Average Lead Time')\n        axes[1, 0].set_ylabel('Minutes')\n        axes[1, 0].tick_params(axis='x', rotation=45)\n        \n        # Execution trends (for first pipeline)\n        if dashboard_data and list(dashboard_data.values())[0].get('durations'):\n            durations = list(dashboard_data.values())[0]['durations']\n            axes[1, 1].plot(durations, marker='o')\n            axes[1, 1].set_title('Lead Time Trend (First Pipeline)')\n            axes[1, 1].set_xlabel('Execution Number')\n            axes[1, 1].set_ylabel('Duration (minutes)')\n        \n        plt.tight_layout()\n        plt.savefig('spinnaker-analytics.png', dpi=300, bbox_inches='tight')\n        plt.show()\n\n# Usage example\nif __name__ == \"__main__\":\n    analytics = SpinnakerAnalytics()\n    \n    applications = [\n        {\"name\": \"myapp\", \"pipeline\": \"Canary Deployment Pipeline\"},\n        {\"name\": \"myapp\", \"pipeline\": \"Blue-Green Deployment\"}\n    ]\n    \n    dashboard_data = analytics.generate_dashboard(applications)\n    \n    print(\"Deployment Analytics:\")\n    print(json.dumps(dashboard_data, indent=2))\n    \n    analytics.create_visualizations(dashboard_data)\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"-what-youll-see",children:"\ud83d\udd0d What You'll See"}),"\n",(0,t.jsx)(e.h3,{id:"spinnaker-ui-dashboard",children:"Spinnaker UI Dashboard"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Applications"}),": Overview of all applications and their pipelines"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Pipeline Executions"}),": Real-time pipeline execution status"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Infrastructure"}),": Multi-cloud resource visualization"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Canary Analysis"}),": Automated canary deployment results"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"pipeline-execution-output",children:"Pipeline Execution Output"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"Pipeline: Canary Deployment Pipeline\nStatus: RUNNING\n\nStage 1: Deploy Baseline - SUCCEEDED (2m 34s)\nStage 2: Deploy Canary - SUCCEEDED (1m 45s)\nStage 3: Configure Traffic Split - SUCCEEDED (0m 23s)\nStage 4: Canary Analysis - RUNNING (5m 12s / 30m)\n  - Success Rate: 99.2%\n  - Error Rate: 0.8%\n  - Response Time P95: 245ms\n  - Canary Score: 92/100\n\nStage 5: Promote or Rollback - WAITING\n"})}),"\n",(0,t.jsx)(e.h3,{id:"deployment-analytics",children:"Deployment Analytics"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "myapp/Canary Deployment Pipeline": {\n    "total_executions": 45,\n    "successful_executions": 42,\n    "failed_executions": 3,\n    "success_rate": 93.33,\n    "deployment_frequency_per_day": 2.1,\n    "average_lead_time_minutes": 18.5\n  }\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"pros--cons",children:"Pros & Cons"}),"\n",(0,t.jsx)(e.h3,{id:"-pros",children:"\u2705 Pros"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Advanced Deployment Strategies"}),": Sophisticated canary, blue-green, and rolling deployments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-Cloud Support"}),": Consistent deployments across cloud providers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Enterprise Features"}),": RBAC, audit trails, and compliance capabilities"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Automated Analysis"}),": Metrics-driven deployment decisions"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Extensible"}),": Plugin architecture for custom integrations"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"-cons",children:"\u274c Cons"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complexity"}),": Steep learning curve and complex setup"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Resource Intensive"}),": Requires significant infrastructure resources"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Maintenance Overhead"}),": Multiple microservices to manage"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Limited Community"}),": Smaller community compared to other CD tools"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(e.p,{children:["Spinnaker is the ",(0,t.jsx)(e.strong,{children:"enterprise-grade solution"})," for ",(0,t.jsx)(e.strong,{children:"advanced continuous delivery"})," with sophisticated deployment strategies. Choose Spinnaker when you need:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Advanced deployment patterns"})," like canary and blue-green deployments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-cloud deployment"})," capabilities"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Enterprise governance"})," and compliance features"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Automated deployment decisions"})," based on metrics"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"The combination of advanced deployment strategies, multi-cloud support, and enterprise features makes Spinnaker ideal for large organizations with complex deployment requirements."}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"What You've Achieved:"}),"\n\u2705 Set up a complete Spinnaker multi-cloud CD platform",(0,t.jsx)(e.br,{}),"\n","\u2705 Created advanced canary and blue-green deployment pipelines",(0,t.jsx)(e.br,{}),"\n","\u2705 Implemented automated deployment analysis and rollback",(0,t.jsx)(e.br,{}),"\n","\u2705 Built comprehensive monitoring and analytics capabilities",(0,t.jsx)(e.br,{}),"\n","\u2705 Established enterprise-grade deployment governance"]})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>o});var s=a(6540);const t={},i=s.createContext(t);function r(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);