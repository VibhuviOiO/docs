"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5128],{7828:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Infrastructure/cert-manager","title":"Cert-Manager","description":"Learn how to deploy cert-manager for automatic SSL/TLS certificate management in Kubernetes with Let\'s Encrypt and wildcard certificates.","source":"@site/docs/Infrastructure/cert-manager.md","sourceDirName":"Infrastructure","slug":"/Infrastructure/CertManager","permalink":"/docs/docs/Infrastructure/CertManager","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Infrastructure/cert-manager.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Cert-Manager","description":"Learn how to deploy cert-manager for automatic SSL/TLS certificate management in Kubernetes with Let\'s Encrypt and wildcard certificates.","slug":"/Infrastructure/CertManager","keywords":["cert-manager","SSL certificates","TLS","Let\'s Encrypt","wildcard certificates","Kubernetes certificates"]},"sidebar":"tutorialSidebar","previous":{"title":"Kubernetes Cluster Setup","permalink":"/docs/docs/Infrastructure/KubernetesCluster"},"next":{"title":"Harbor Registry","permalink":"/docs/docs/Infrastructure/Harbor"}}');var a=r(4848),s=r(8453);const c={sidebar_position:2,title:"Cert-Manager",description:"Learn how to deploy cert-manager for automatic SSL/TLS certificate management in Kubernetes with Let's Encrypt and wildcard certificates.",slug:"/Infrastructure/CertManager",keywords:["cert-manager","SSL certificates","TLS","Let's Encrypt","wildcard certificates","Kubernetes certificates"]},i="\ud83d\udd12 Cert-Manager SSL Certificate Management",o={},d=[{value:"\ud83d\udd27 Installation",id:"-installation",level:2},{value:"\ud83c\udf10 GoDaddy DNS Integration",id:"-godaddy-dns-integration",level:2},{value:"\ud83d\udd11 Create API Secret",id:"-create-api-secret",level:2},{value:"\ud83d\udcdc ClusterIssuer Configuration",id:"-clusterissuer-configuration",level:2},{value:"\ud83c\udf1f Wildcard Certificate",id:"-wildcard-certificate",level:2},{value:"\u25b6\ufe0f Sample Output",id:"\ufe0f-sample-output",level:2},{value:"\ud83d\udd04 Certificate Replication",id:"-certificate-replication",level:2},{value:"\ud83c\udf10 Ingress with SSL",id:"-ingress-with-ssl",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"-cert-manager-ssl-certificate-management",children:"\ud83d\udd12 Cert-Manager SSL Certificate Management"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Cert-Manager"})," automatically provisions and manages ",(0,a.jsx)(n.strong,{children:"SSL/TLS certificates"})," in ",(0,a.jsx)(n.strong,{children:"Kubernetes"})," with support for ",(0,a.jsx)(n.strong,{children:"Let's Encrypt"})," and ",(0,a.jsx)(n.strong,{children:"wildcard certificates"}),"."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-installation",children:"\ud83d\udd27 Installation"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Install cert-manager with Helm:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm repo add jetstack https://charts.jetstack.io --force-update\n\nhelm install cert-manager jetstack/cert-manager \\\n  --namespace cert-manager \\\n  --create-namespace \\\n  --version v1.15.3 \\\n  --set crds.enabled=true\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-godaddy-dns-integration",children:"\ud83c\udf10 GoDaddy DNS Integration"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Install GoDaddy webhook:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/snowdrop/godaddy-webhook.git\ncd godaddy-webhook\n\nexport DOMAIN=yourdomain.com\nhelm install -n cert-manager godaddy-webhook ./deploy/charts/godaddy-webhook --set groupName=$DOMAIN\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-create-api-secret",children:"\ud83d\udd11 Create API Secret"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create GoDaddy API secret:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Secret\nmetadata:\n  name: yourdomain-godaddy-api-key\n  namespace: cert-manager\ntype: Opaque\nstringData:\n  token: "GODADDY_API_KEY:GODADDY_SECRET_KEY"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-clusterissuer-configuration",children:"\ud83d\udcdc ClusterIssuer Configuration"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create clusterissuer.yml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-prod\nspec:\n  acme:\n    server: https://acme-v02.api.letsencrypt.org/directory\n    email: admin@yourdomain.com\n    privateKeySecretRef:\n      name: letsencrypt-production\n    solvers:\n    - selector:\n        dnsZones:\n        - 'yourdomain.com'\n      dns01:\n        webhook:\n          config:\n            apiKeySecretRef:\n              name: yourdomain-godaddy-api-key\n              key: token\n            production: true\n            ttl: 600\n          groupName: yourdomain.com\n          solverName: godaddy\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-wildcard-certificate",children:"\ud83c\udf1f Wildcard Certificate"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create certificate.yml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: wildcard-yourdomain-com\n  namespace: cert-manager\nspec:\n  secretName: wildcard-yourdomain-com-tls\n  renewBefore: 240h\n  dnsNames:\n  - '*.yourdomain.com'\n  issuerRef:\n    name: letsencrypt-prod\n    kind: ClusterIssuer\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-sample-output",children:"\u25b6\ufe0f Sample Output"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ kubectl get certificates -n cert-manager\nNAME                     READY   SECRET                         AGE\nwildcard-yourdomain-com  True    wildcard-yourdomain-com-tls    5m\n\n$ kubectl describe certificate wildcard-yourdomain-com -n cert-manager\nStatus:\n  Conditions:\n    Type:    Ready\n    Status:  True\n    Message: Certificate is up to date and has not expired\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-certificate-replication",children:"\ud83d\udd04 Certificate Replication"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Replicate certificates across namespaces:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: cert-replication\n  namespace: cert-manager\nspec:\n  template:\n    spec:\n      containers:\n      - name: cert-replication\n        image: bitnami/kubectl:latest\n        command:\n        - /bin/sh\n        - -c\n        - |\n          SECRET_NAME="wildcard-yourdomain-com-tls"\n          SOURCE_NAMESPACE="cert-manager"\n          TARGET_NAMESPACES="default production staging"\n          \n          kubectl get secret $SECRET_NAME -n $SOURCE_NAMESPACE -o yaml > /tmp/secret.yaml\n          for NAMESPACE in $TARGET_NAMESPACES; do\n            kubectl delete secret $SECRET_NAME -n $NAMESPACE --ignore-not-found\n            sed "s/namespace: $SOURCE_NAMESPACE/namespace: $NAMESPACE/" /tmp/secret.yaml | kubectl apply -f -\n          done\n      restartPolicy: OnFailure\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-ingress-with-ssl",children:"\ud83c\udf10 Ingress with SSL"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create ingress with wildcard certificate:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: app-ingress\n  namespace: default\n  annotations:\n    cert-manager.io/cluster-issuer: "letsencrypt-prod"\n    nginx.ingress.kubernetes.io/ssl-redirect: "true"\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - app.yourdomain.com\n    secretName: wildcard-yourdomain-com-tls\n  rules:\n  - host: app.yourdomain.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: app-service\n            port:\n              number: 80\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Reference:"})," ",(0,a.jsx)(n.a,{href:"https://cert-manager.io/docs/",children:"Cert-Manager Documentation"})]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var t=r(6540);const a={},s=t.createContext(a);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);