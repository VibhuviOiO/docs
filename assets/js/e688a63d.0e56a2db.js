"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3518],{4191:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"CI-CD/CI/circleci","title":"CircleCI","description":"CircleCI is a modern CI/CD platform that automates the software development process. Learn how to set up CircleCI pipelines with Docker and advanced workflows.","source":"@site/docs/CI-CD/CI/circleci.md","sourceDirName":"CI-CD/CI","slug":"/CI-CD/CircleCI","permalink":"/docs/docs/CI-CD/CircleCI","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CI/circleci.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"CircleCI","description":"CircleCI is a modern CI/CD platform that automates the software development process. Learn how to set up CircleCI pipelines with Docker and advanced workflows.","slug":"/CI-CD/CircleCI","keywords":["CircleCI","CI/CD pipeline","continuous integration","continuous deployment","Docker CI/CD","workflow automation","build automation","deployment pipeline","DevOps automation","cloud CI/CD"]},"sidebar":"tutorialSidebar","previous":{"title":"Azure DevOps","permalink":"/docs/docs/CI-CD/AzureDevOps"},"next":{"title":"TeamCity","permalink":"/docs/docs/CI-CD/TeamCity"}}');var s=t(4848),o=t(8453);const r={sidebar_position:5,title:"CircleCI",description:"CircleCI is a modern CI/CD platform that automates the software development process. Learn how to set up CircleCI pipelines with Docker and advanced workflows.",slug:"/CI-CD/CircleCI",keywords:["CircleCI","CI/CD pipeline","continuous integration","continuous deployment","Docker CI/CD","workflow automation","build automation","deployment pipeline","DevOps automation","cloud CI/CD"]},c="\u2b55 CircleCI - Modern CI/CD Platform for Fast Development",a={},l=[{value:"CircleCI Configuration",id:"circleci-configuration",level:2},{value:"Basic .circleci/config.yml",id:"basic-circleciconfigyml",level:3},{value:"Docker-Based Workflows",id:"docker-based-workflows",level:2},{value:"Multi-Container Setup",id:"multi-container-setup",level:3},{value:"Advanced Workflows",id:"advanced-workflows",level:2},{value:"Parallel Jobs with Fan-in/Fan-out",id:"parallel-jobs-with-fan-infan-out",level:3},{value:"Using CircleCI Orbs",id:"using-circleci-orbs",level:2},{value:"Popular Orbs Integration",id:"popular-orbs-integration",level:3},{value:"Environment-Specific Deployments",id:"environment-specific-deployments",level:2},{value:"Conditional Deployments",id:"conditional-deployments",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Caching Strategies",id:"caching-strategies",level:3},{value:"Docker Layer Caching",id:"docker-layer-caching",level:3},{value:"Testing and Quality Gates",id:"testing-and-quality-gates",level:2},{value:"Comprehensive Testing Pipeline",id:"comprehensive-testing-pipeline",level:3},{value:"Monitoring and Notifications",id:"monitoring-and-notifications",level:2},{value:"Integration with External Services",id:"integration-with-external-services",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"-circleci---modern-cicd-platform-for-fast-development",children:"\u2b55 CircleCI - Modern CI/CD Platform for Fast Development"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"CircleCI"})," is a modern continuous integration and continuous deployment platform that helps teams ",(0,s.jsx)(e.strong,{children:"build"}),", ",(0,s.jsx)(e.strong,{children:"test"}),", and ",(0,s.jsx)(e.strong,{children:"deploy"})," code quickly and reliably with powerful workflow automation and Docker-first approach."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"circleci-configuration",children:"CircleCI Configuration"}),"\n",(0,s.jsx)(e.h3,{id:"basic-circleciconfigyml",children:"Basic .circleci/config.yml"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create .circleci/config.yml in your repository:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 2.1\n\n# Define reusable executors\nexecutors:\n  docker-executor:\n    docker:\n      - image: cimg/node:18.17\n    working_directory: ~/project\n\n  python-executor:\n    docker:\n      - image: cimg/python:3.11\n    working_directory: ~/project\n\n# Define reusable commands\ncommands:\n  install-dependencies:\n    description: "Install project dependencies"\n    steps:\n      - restore_cache:\n          keys:\n            - v1-dependencies-{{ checksum "package-lock.json" }}\n            - v1-dependencies-\n      - run:\n          name: Install dependencies\n          command: npm ci\n      - save_cache:\n          paths:\n            - node_modules\n          key: v1-dependencies-{{ checksum "package-lock.json" }}\n\n# Define jobs\njobs:\n  build:\n    executor: docker-executor\n    steps:\n      - checkout\n      - install-dependencies\n      - run:\n          name: Build application\n          command: npm run build\n      - persist_to_workspace:\n          root: ~/project\n          paths:\n            - dist\n            - node_modules\n\n  test:\n    executor: docker-executor\n    steps:\n      - checkout\n      - install-dependencies\n      - run:\n          name: Run tests\n          command: npm test\n      - run:\n          name: Run coverage\n          command: npm run coverage\n      - store_test_results:\n          path: test-results\n      - store_artifacts:\n          path: coverage\n\n  lint:\n    executor: docker-executor\n    steps:\n      - checkout\n      - install-dependencies\n      - run:\n          name: Run linter\n          command: npm run lint\n\n  security-scan:\n    executor: docker-executor\n    steps:\n      - checkout\n      - install-dependencies\n      - run:\n          name: Security audit\n          command: npm audit --audit-level high\n\n# Define workflows\nworkflows:\n  version: 2\n  build-test-deploy:\n    jobs:\n      - build\n      - test:\n          requires:\n            - build\n      - lint:\n          requires:\n            - build\n      - security-scan:\n          requires:\n            - build\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"docker-based-workflows",children:"Docker-Based Workflows"}),"\n",(0,s.jsx)(e.h3,{id:"multi-container-setup",children:"Multi-Container Setup"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: 2.1\n\njobs:\n  test-with-database:\n    docker:\n      - image: cimg/node:18.17\n        environment:\n          DATABASE_URL: postgresql://test:test@localhost:5432/testdb\n      - image: cimg/postgres:13.11\n        environment:\n          POSTGRES_USER: test\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: testdb\n    steps:\n      - checkout\n      - run:\n          name: Wait for database\n          command: dockerize -wait tcp://localhost:5432 -timeout 1m\n      - run:\n          name: Install dependencies\n          command: npm ci\n      - run:\n          name: Run database migrations\n          command: npm run migrate\n      - run:\n          name: Run integration tests\n          command: npm run test:integration\n\n  build-docker-image:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - setup_remote_docker:\n          version: 20.10.14\n          docker_layer_caching: true\n      - run:\n          name: Build Docker image\n          command: |\n            docker build -t myapp:$CIRCLE_SHA1 .\n            docker tag myapp:$CIRCLE_SHA1 myapp:latest\n      - run:\n          name: Push to registry\n          command: |\n            echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin\n            docker push myapp:$CIRCLE_SHA1\n            docker push myapp:latest\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"advanced-workflows",children:"Advanced Workflows"}),"\n",(0,s.jsx)(e.h3,{id:"parallel-jobs-with-fan-infan-out",children:"Parallel Jobs with Fan-in/Fan-out"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: 2.1\n\norbs:\n  kubernetes: circleci/kubernetes@1.3.1\n  helm: circleci/helm@2.0.1\n\njobs:\n  build:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      - run: npm ci\n      - run: npm run build\n      - persist_to_workspace:\n          root: .\n          paths:\n            - dist\n            - node_modules\n\n  test-unit:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      - attach_workspace:\n          at: .\n      - run: npm run test:unit\n\n  test-integration:\n    docker:\n      - image: cimg/node:18.17\n      - image: cimg/postgres:13.11\n        environment:\n          POSTGRES_USER: test\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: testdb\n    steps:\n      - checkout\n      - attach_workspace:\n          at: .\n      - run: npm run test:integration\n\n  test-e2e:\n    docker:\n      - image: cimg/node:18.17-browsers\n    steps:\n      - checkout\n      - attach_workspace:\n          at: .\n      - run: npm run test:e2e\n\n  security-scan:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      - attach_workspace:\n          at: .\n      - run: npm audit\n      - run: npm run security:scan\n\n  deploy-staging:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - kubernetes/install-kubectl\n      - helm/install-helm-client\n      - run:\n          name: Deploy to staging\n          command: |\n            helm upgrade --install myapp-staging ./helm \\\n              --namespace staging \\\n              --set image.tag=$CIRCLE_SHA1 \\\n              --set environment=staging\n\n  deploy-production:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - kubernetes/install-kubectl\n      - helm/install-helm-client\n      - run:\n          name: Deploy to production\n          command: |\n            helm upgrade --install myapp-prod ./helm \\\n              --namespace production \\\n              --set image.tag=$CIRCLE_SHA1 \\\n              --set environment=production\n\nworkflows:\n  build-test-deploy:\n    jobs:\n      - build\n      - test-unit:\n          requires:\n            - build\n      - test-integration:\n          requires:\n            - build\n      - test-e2e:\n          requires:\n            - build\n      - security-scan:\n          requires:\n            - build\n      - deploy-staging:\n          requires:\n            - test-unit\n            - test-integration\n            - test-e2e\n            - security-scan\n          filters:\n            branches:\n              only: develop\n      - hold-for-approval:\n          type: approval\n          requires:\n            - deploy-staging\n          filters:\n            branches:\n              only: main\n      - deploy-production:\n          requires:\n            - hold-for-approval\n          filters:\n            branches:\n              only: main\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"using-circleci-orbs",children:"Using CircleCI Orbs"}),"\n",(0,s.jsx)(e.h3,{id:"popular-orbs-integration",children:"Popular Orbs Integration"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: 2.1\n\norbs:\n  aws-cli: circleci/aws-cli@3.1.4\n  kubernetes: circleci/kubernetes@1.3.1\n  helm: circleci/helm@2.0.1\n  slack: circleci/slack@4.12.1\n  sonarcloud: sonarsource/sonarcloud@1.1.1\n\njobs:\n  deploy-to-aws:\n    executor: aws-cli/default\n    steps:\n      - checkout\n      - aws-cli/setup:\n          aws-access-key-id: AWS_ACCESS_KEY_ID\n          aws-secret-access-key: AWS_SECRET_ACCESS_KEY\n          aws-region: AWS_DEFAULT_REGION\n      - run:\n          name: Deploy to ECS\n          command: |\n            aws ecs update-service \\\n              --cluster production \\\n              --service myapp \\\n              --force-new-deployment\n\n  sonar-scan:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      - run: npm ci\n      - run: npm test -- --coverage\n      - sonarcloud/scan\n\n  notify-slack:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - slack/notify:\n          event: fail\n          template: basic_fail_1\n      - slack/notify:\n          event: pass\n          template: success_tagged_deploy_1\n\nworkflows:\n  main:\n    jobs:\n      - build\n      - test\n      - sonar-scan:\n          requires:\n            - test\n      - deploy-to-aws:\n          requires:\n            - sonar-scan\n      - notify-slack:\n          requires:\n            - deploy-to-aws\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"environment-specific-deployments",children:"Environment-Specific Deployments"}),"\n",(0,s.jsx)(e.h3,{id:"conditional-deployments",children:"Conditional Deployments"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: 2.1\n\njobs:\n  deploy:\n    parameters:\n      environment:\n        type: string\n      cluster:\n        type: string\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - kubernetes/install-kubectl\n      - run:\n          name: Deploy to << parameters.environment >>\n          command: |\n            kubectl apply -f k8s/<< parameters.environment >>/\n            kubectl set image deployment/myapp \\\n              myapp=myapp:$CIRCLE_SHA1 \\\n              -n << parameters.environment >>\n\nworkflows:\n  deploy-pipeline:\n    jobs:\n      - build\n      - test\n      - deploy:\n          name: deploy-dev\n          environment: development\n          cluster: dev-cluster\n          requires:\n            - test\n          filters:\n            branches:\n              only: develop\n      - deploy:\n          name: deploy-staging\n          environment: staging\n          cluster: staging-cluster\n          requires:\n            - test\n          filters:\n            branches:\n              only: main\n      - hold-production:\n          type: approval\n          requires:\n            - deploy-staging\n          filters:\n            branches:\n              only: main\n      - deploy:\n          name: deploy-prod\n          environment: production\n          cluster: prod-cluster\n          requires:\n            - hold-production\n          filters:\n            branches:\n              only: main\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(e.h3,{id:"caching-strategies",children:"Caching Strategies"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 2.1\n\njobs:\n  build-with-cache:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      # Restore multiple cache layers\n      - restore_cache:\n          keys:\n            - v2-dependencies-{{ checksum "package-lock.json" }}\n            - v2-dependencies-{{ checksum "package.json" }}\n            - v2-dependencies-\n      - restore_cache:\n          keys:\n            - v1-build-cache-{{ .Branch }}-{{ .Revision }}\n            - v1-build-cache-{{ .Branch }}-\n            - v1-build-cache-\n      \n      - run:\n          name: Install dependencies\n          command: |\n            if [ ! -d "node_modules" ]; then\n              npm ci\n            fi\n      \n      - save_cache:\n          key: v2-dependencies-{{ checksum "package-lock.json" }}\n          paths:\n            - node_modules\n            - ~/.npm\n      \n      - run:\n          name: Build application\n          command: npm run build\n      \n      - save_cache:\n          key: v1-build-cache-{{ .Branch }}-{{ .Revision }}\n          paths:\n            - dist\n            - .next/cache\n'})}),"\n",(0,s.jsx)(e.h3,{id:"docker-layer-caching",children:"Docker Layer Caching"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: 2.1\n\njobs:\n  build-docker:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - setup_remote_docker:\n          version: 20.10.14\n          docker_layer_caching: true\n      - run:\n          name: Build and push Docker image\n          command: |\n            # Multi-stage build for optimization\n            docker build \\\n              --cache-from myapp:latest \\\n              --tag myapp:$CIRCLE_SHA1 \\\n              --tag myapp:latest \\\n              .\n            \n            echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin\n            docker push myapp:$CIRCLE_SHA1\n            docker push myapp:latest\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"testing-and-quality-gates",children:"Testing and Quality Gates"}),"\n",(0,s.jsx)(e.h3,{id:"comprehensive-testing-pipeline",children:"Comprehensive Testing Pipeline"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 2.1\n\njobs:\n  test-matrix:\n    parameters:\n      node-version:\n        type: string\n    docker:\n      - image: cimg/node:<< parameters.node-version >>\n    steps:\n      - checkout\n      - run: npm ci\n      - run: npm test\n\n  quality-gates:\n    docker:\n      - image: cimg/node:18.17\n    steps:\n      - checkout\n      - run: npm ci\n      - run:\n          name: Run tests with coverage\n          command: npm run test:coverage\n      - run:\n          name: Check coverage threshold\n          command: |\n            COVERAGE=$(npm run coverage:check | grep -o \'[0-9]*\\.[0-9]*\' | head -1)\n            if (( $(echo "$COVERAGE < 80" | bc -l) )); then\n              echo "Coverage $COVERAGE% is below threshold"\n              exit 1\n            fi\n      - run:\n          name: Security audit\n          command: npm audit --audit-level high\n      - run:\n          name: License check\n          command: npm run license:check\n\nworkflows:\n  test-all-versions:\n    jobs:\n      - test-matrix:\n          matrix:\n            parameters:\n              node-version: ["16.20", "18.17", "20.5"]\n      - quality-gates\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"monitoring-and-notifications",children:"Monitoring and Notifications"}),"\n",(0,s.jsx)(e.h3,{id:"integration-with-external-services",children:"Integration with External Services"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 2.1\n\norbs:\n  slack: circleci/slack@4.12.1\n  datadog: circleci/datadog@1.0.0\n\njobs:\n  deploy-with-monitoring:\n    docker:\n      - image: cimg/base:stable\n    steps:\n      - checkout\n      - run:\n          name: Deploy application\n          command: ./deploy.sh\n      - datadog/send-event:\n          api-key: DATADOG_API_KEY\n          title: "Deployment completed"\n          text: "Application deployed to production"\n          tags: "environment:production,service:myapp"\n      - slack/notify:\n          event: pass\n          custom: |\n            {\n              "blocks": [\n                {\n                  "type": "section",\n                  "text": {\n                    "type": "mrkdwn",\n                    "text": "\u2705 Deployment successful!\\n*Project:* $CIRCLE_PROJECT_REPONAME\\n*Branch:* $CIRCLE_BRANCH\\n*Commit:* $CIRCLE_SHA1"\n                  }\n                }\n              ]\n            }\n\nworkflows:\n  deploy-with-notifications:\n    jobs:\n      - build\n      - test\n      - deploy-with-monitoring:\n          requires:\n            - test\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Modern Web Applications"}),": React, Vue, Angular applications with Node.js backends"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Microservices"}),": Container-based applications with Kubernetes deployment"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Mobile Applications"}),": React Native, Flutter, and native iOS/Android apps"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"API Development"}),": RESTful and GraphQL API testing and deployment"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Infrastructure as Code"}),": Terraform and CloudFormation deployments"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u2705 CircleCI is now configured for modern, efficient CI/CD workflows!"})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>c});var i=t(6540);const s={},o=i.createContext(s);function r(n){const e=i.useContext(o);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);