"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4174],{3001:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Infrastructure/istio","title":"Istio Service Mesh","description":"Istio is an open-source service mesh that provides traffic management, security, and observability for microservices. Learn how to deploy and configure Istio for production workloads.","source":"@site/docs/Infrastructure/istio.md","sourceDirName":"Infrastructure","slug":"/Infrastructure/Istio","permalink":"/docs/Infrastructure/Istio","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Infrastructure/istio.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"Istio Service Mesh","description":"Istio is an open-source service mesh that provides traffic management, security, and observability for microservices. Learn how to deploy and configure Istio for production workloads.","slug":"/Infrastructure/Istio","keywords":["Istio","service mesh","microservices","traffic management","security","observability","Kubernetes","Envoy proxy","mTLS","load balancing"]},"sidebar":"tutorialSidebar","previous":{"title":"HashiCorp Packer","permalink":"/docs/Infrastructure/Packer"},"next":{"title":"PowerShell","permalink":"/docs/Infrastructure/PowerShell"}}');var a=i(4848),s=i(8453);const r={sidebar_position:9,title:"Istio Service Mesh",description:"Istio is an open-source service mesh that provides traffic management, security, and observability for microservices. Learn how to deploy and configure Istio for production workloads.",slug:"/Infrastructure/Istio",keywords:["Istio","service mesh","microservices","traffic management","security","observability","Kubernetes","Envoy proxy","mTLS","load balancing"]},o="\ud83d\ude80 Service Mesh Management with Istio",l={},c=[{value:"\ud83e\uddf0 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\udd27 Step 1: Install Istio",id:"-step-1-install-istio",level:2},{value:"Install istioctl CLI",id:"install-istioctl-cli",level:3},{value:"Install Istio Control Plane",id:"install-istio-control-plane",level:3},{value:"Enable Automatic Sidecar Injection",id:"enable-automatic-sidecar-injection",level:3},{value:"\ud83c\udfd7\ufe0f Step 2: Deploy Sample Application",id:"\ufe0f-step-2-deploy-sample-application",level:2},{value:"Bookinfo Sample Application",id:"bookinfo-sample-application",level:3},{value:"Create Gateway and Virtual Service",id:"create-gateway-and-virtual-service",level:3},{value:"Apply Gateway Configuration",id:"apply-gateway-configuration",level:3},{value:"\u25b6\ufe0f Step 3: Traffic Management",id:"\ufe0f-step-3-traffic-management",level:2},{value:"Destination Rules",id:"destination-rules",level:3},{value:"Traffic Splitting and Canary Deployments",id:"traffic-splitting-and-canary-deployments",level:3},{value:"Fault Injection for Testing",id:"fault-injection-for-testing",level:3},{value:"\ud83d\udcca Step 4: Security Configuration",id:"-step-4-security-configuration",level:2},{value:"Enable mTLS",id:"enable-mtls",level:3},{value:"Authorization Policies",id:"authorization-policies",level:3},{value:"JWT Authentication",id:"jwt-authentication",level:3},{value:"\ud83d\udd0d Step 5: Observability and Monitoring",id:"-step-5-observability-and-monitoring",level:2},{value:"Install Observability Add-ons",id:"install-observability-add-ons",level:3},{value:"Access Observability Dashboards",id:"access-observability-dashboards",level:3},{value:"Custom Telemetry Configuration",id:"custom-telemetry-configuration",level:3},{value:"\ud83d\udcc8 Step 6: Advanced Istio Features",id:"-step-6-advanced-istio-features",level:2},{value:"Multi-Cluster Service Mesh",id:"multi-cluster-service-mesh",level:3},{value:"Wasm Extensions",id:"wasm-extensions",level:3},{value:"External Authorization",id:"external-authorization",level:3},{value:"\ud83d\udee1\ufe0f Step 7: Production Best Practices",id:"\ufe0f-step-7-production-best-practices",level:2},{value:"Resource Management",id:"resource-management",level:3},{value:"High Availability Configuration",id:"high-availability-configuration",level:3},{value:"Monitoring and Alerting",id:"monitoring-and-alerting",level:3},{value:"\ud83d\udccb Common Use Cases",id:"-common-use-cases",level:2},{value:"1. <strong>Microservices Traffic Management</strong>",id:"1-microservices-traffic-management",level:3},{value:"2. <strong>Security and Compliance</strong>",id:"2-security-and-compliance",level:3},{value:"3. <strong>Observability and Monitoring</strong>",id:"3-observability-and-monitoring",level:3},{value:"4. <strong>Multi-Cloud and Hybrid Deployments</strong>",id:"4-multi-cloud-and-hybrid-deployments",level:3},{value:"\u2705 What You&#39;ll Achieve",id:"-what-youll-achieve",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"-service-mesh-management-with-istio",children:"\ud83d\ude80 Service Mesh Management with Istio"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Istio"})," is an ",(0,a.jsx)(n.strong,{children:"open-source service mesh"})," that provides ",(0,a.jsx)(n.strong,{children:"traffic management"}),", ",(0,a.jsx)(n.strong,{children:"security"}),", and ",(0,a.jsx)(n.strong,{children:"observability"})," for microservices. Perfect for ",(0,a.jsx)(n.strong,{children:"complex microservices architectures"})," with advanced ",(0,a.jsx)(n.strong,{children:"routing"}),", ",(0,a.jsx)(n.strong,{children:"security policies"}),", and ",(0,a.jsx)(n.strong,{children:"distributed tracing"})," capabilities."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-prerequisites",children:"\ud83e\uddf0 Prerequisites"}),"\n",(0,a.jsx)(n.p,{children:"Make sure you have the following:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Kubernetes cluster"})," (v1.22+) with kubectl access"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Helm 3.0+"})," for installation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"istioctl CLI"})," tool"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Basic understanding"})," of Kubernetes and microservices"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Sufficient cluster resources"})," (4+ CPU, 8GB+ RAM recommended)"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-step-1-install-istio",children:"\ud83d\udd27 Step 1: Install Istio"}),"\n",(0,a.jsx)(n.h3,{id:"install-istioctl-cli",children:"Install istioctl CLI"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Download and install istioctl\ncurl -L https://istio.io/downloadIstio | sh -\ncd istio-*\nexport PATH=$PWD/bin:$PATH\n\n# Verify installation\nistioctl version\n\n# Check cluster compatibility\nistioctl x precheck\n"})}),"\n",(0,a.jsx)(n.h3,{id:"install-istio-control-plane",children:"Install Istio Control Plane"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install Istio with default configuration\nistioctl install --set values.defaultRevision=default\n\n# Or install with custom configuration\nistioctl install --set values.pilot.traceSampling=100.0 \\\n  --set values.global.meshID=mesh1 \\\n  --set values.global.network=network1\n\n# Verify installation\nkubectl get pods -n istio-system\n\n# Check Istio status\nistioctl proxy-status\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-automatic-sidecar-injection",children:"Enable Automatic Sidecar Injection"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Label namespace for automatic sidecar injection\nkubectl label namespace default istio-injection=enabled\n\n# Verify label\nkubectl get namespace -L istio-injection\n\n# Check injection status\nkubectl describe namespace default\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-step-2-deploy-sample-application",children:"\ud83c\udfd7\ufe0f Step 2: Deploy Sample Application"}),"\n",(0,a.jsx)(n.h3,{id:"bookinfo-sample-application",children:"Bookinfo Sample Application"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Deploy sample application\nkubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml\n\n# Verify deployment\nkubectl get services\nkubectl get pods\n\n# Wait for pods to be ready\nkubectl wait --for=condition=Ready pod --all --timeout=300s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"create-gateway-and-virtual-service",children:"Create Gateway and Virtual Service"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create bookinfo-gateway.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: networking.istio.io/v1beta1\nkind: Gateway\nmetadata:\n  name: bookinfo-gateway\n  namespace: default\nspec:\n  selector:\n    istio: ingressgateway\n  servers:\n  - port:\n      number: 80\n      name: http\n      protocol: HTTP\n    hosts:\n    - "*"\n  - port:\n      number: 443\n      name: https\n      protocol: HTTPS\n    tls:\n      mode: SIMPLE\n      credentialName: bookinfo-tls\n    hosts:\n    - bookinfo.example.com\n\n---\napiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: bookinfo\n  namespace: default\nspec:\n  hosts:\n  - "*"\n  gateways:\n  - bookinfo-gateway\n  http:\n  - match:\n    - uri:\n        exact: /productpage\n    - uri:\n        prefix: /static\n    - uri:\n        exact: /login\n    - uri:\n        exact: /logout\n    - uri:\n        prefix: /api/v1/products\n    route:\n    - destination:\n        host: productpage\n        port:\n          number: 9080\n'})}),"\n",(0,a.jsx)(n.h3,{id:"apply-gateway-configuration",children:"Apply Gateway Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Apply gateway and virtual service\nkubectl apply -f bookinfo-gateway.yaml\n\n# Get ingress gateway external IP\nkubectl get svc istio-ingressgateway -n istio-system\n\n# Test application\nexport INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=\'{.status.loadBalancer.ingress[0].ip}\')\nexport INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=\'{.spec.ports[?(@.name=="http2")].port}\')\nexport GATEWAY_URL=$INGRESS_HOST:$INGRESS_PORT\n\ncurl -s "http://${GATEWAY_URL}/productpage" | grep -o "<title>.*</title>"\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-step-3-traffic-management",children:"\u25b6\ufe0f Step 3: Traffic Management"}),"\n",(0,a.jsx)(n.h3,{id:"destination-rules",children:"Destination Rules"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create destination-rules.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.istio.io/v1beta1\nkind: DestinationRule\nmetadata:\n  name: productpage\n  namespace: default\nspec:\n  host: productpage\n  trafficPolicy:\n    loadBalancer:\n      simple: LEAST_CONN\n    connectionPool:\n      tcp:\n        maxConnections: 10\n      http:\n        http1MaxPendingRequests: 10\n        maxRequestsPerConnection: 2\n    circuitBreaker:\n      consecutiveGatewayErrors: 5\n      interval: 30s\n      baseEjectionTime: 30s\n      maxEjectionPercent: 50\n    outlierDetection:\n      consecutive5xxErrors: 5\n      interval: 30s\n      baseEjectionTime: 30s\n      maxEjectionPercent: 50\n\n---\napiVersion: networking.istio.io/v1beta1\nkind: DestinationRule\nmetadata:\n  name: reviews\n  namespace: default\nspec:\n  host: reviews\n  trafficPolicy:\n    loadBalancer:\n      simple: RANDOM\n  subsets:\n  - name: v1\n    labels:\n      version: v1\n  - name: v2\n    labels:\n      version: v2\n  - name: v3\n    labels:\n      version: v3\n\n---\napiVersion: networking.istio.io/v1beta1\nkind: DestinationRule\nmetadata:\n  name: ratings\n  namespace: default\nspec:\n  host: ratings\n  trafficPolicy:\n    loadBalancer:\n      simple: ROUND_ROBIN\n  subsets:\n  - name: v1\n    labels:\n      version: v1\n  - name: v2\n    labels:\n      version: v2\n    trafficPolicy:\n      portLevelSettings:\n      - port:\n          number: 9080\n        connectionPool:\n          tcp:\n            maxConnections: 5\n"})}),"\n",(0,a.jsx)(n.h3,{id:"traffic-splitting-and-canary-deployments",children:"Traffic Splitting and Canary Deployments"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create traffic-splitting.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: reviews-traffic-splitting\n  namespace: default\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          exact: jason\n    route:\n    - destination:\n        host: reviews\n        subset: v2\n  - route:\n    - destination:\n        host: reviews\n        subset: v1\n      weight: 80\n    - destination:\n        host: reviews\n        subset: v3\n      weight: 20\n\n---\napiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: canary-deployment\n  namespace: default\nspec:\n  hosts:\n  - productpage\n  http:\n  - match:\n    - headers:\n        canary:\n          exact: "true"\n    route:\n    - destination:\n        host: productpage\n        subset: v2\n  - route:\n    - destination:\n        host: productpage\n        subset: v1\n      weight: 95\n    - destination:\n        host: productpage\n        subset: v2\n      weight: 5\n'})}),"\n",(0,a.jsx)(n.h3,{id:"fault-injection-for-testing",children:"Fault Injection for Testing"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create fault-injection.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: ratings-fault-injection\n  namespace: default\nspec:\n  hosts:\n  - ratings\n  http:\n  - match:\n    - headers:\n        end-user:\n          exact: jason\n    fault:\n      delay:\n        percentage:\n          value: 100.0\n        fixedDelay: 7s\n    route:\n    - destination:\n        host: ratings\n        subset: v1\n  - fault:\n      abort:\n        percentage:\n          value: 10.0\n        httpStatus: 500\n    route:\n    - destination:\n        host: ratings\n        subset: v1\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-step-4-security-configuration",children:"\ud83d\udcca Step 4: Security Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"enable-mtls",children:"Enable mTLS"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create peer-authentication.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: security.istio.io/v1beta1\nkind: PeerAuthentication\nmetadata:\n  name: default\n  namespace: default\nspec:\n  mtls:\n    mode: STRICT\n\n---\napiVersion: security.istio.io/v1beta1\nkind: PeerAuthentication\nmetadata:\n  name: productpage-mtls\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  mtls:\n    mode: STRICT\n  portLevelMtls:\n    9080:\n      mode: STRICT\n"})}),"\n",(0,a.jsx)(n.h3,{id:"authorization-policies",children:"Authorization Policies"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create authorization-policies.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: deny-all\n  namespace: default\nspec:\n  {}\n\n---\napiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-productpage\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  rules:\n  - from:\n    - source:\n        principals: ["cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account"]\n  - to:\n    - operation:\n        methods: ["GET"]\n\n---\napiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-reviews\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: reviews\n  rules:\n  - from:\n    - source:\n        principals: ["cluster.local/ns/default/sa/bookinfo-productpage"]\n  - to:\n    - operation:\n        methods: ["GET"]\n\n---\napiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-ratings\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: ratings\n  rules:\n  - from:\n    - source:\n        principals: ["cluster.local/ns/default/sa/bookinfo-reviews"]\n  - to:\n    - operation:\n        methods: ["GET"]\n    when:\n    - key: request.headers[end-user]\n      notValues: ["admin"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"jwt-authentication",children:"JWT Authentication"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create jwt-authentication.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: security.istio.io/v1beta1\nkind: RequestAuthentication\nmetadata:\n  name: jwt-auth\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  jwtRules:\n  - issuer: "https://auth.example.com"\n    jwksUri: "https://auth.example.com/.well-known/jwks.json"\n    audiences:\n    - "bookinfo-api"\n    forwardOriginalToken: true\n\n---\napiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: require-jwt\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  rules:\n  - from:\n    - source:\n        requestPrincipals: ["https://auth.example.com/user"]\n  - to:\n    - operation:\n        methods: ["GET"]\n    when:\n    - key: request.auth.claims[role]\n      values: ["user", "admin"]\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-step-5-observability-and-monitoring",children:"\ud83d\udd0d Step 5: Observability and Monitoring"}),"\n",(0,a.jsx)(n.h3,{id:"install-observability-add-ons",children:"Install Observability Add-ons"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install Kiali (Service Mesh Dashboard)\nkubectl apply -f samples/addons/kiali.yaml\n\n# Install Prometheus\nkubectl apply -f samples/addons/prometheus.yaml\n\n# Install Grafana\nkubectl apply -f samples/addons/grafana.yaml\n\n# Install Jaeger\nkubectl apply -f samples/addons/jaeger.yaml\n\n# Verify installations\nkubectl get pods -n istio-system\n\n# Wait for pods to be ready\nkubectl wait --for=condition=Ready pod --all -n istio-system --timeout=300s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"access-observability-dashboards",children:"Access Observability Dashboards"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Access Kiali dashboard\nistioctl dashboard kiali\n\n# Access Grafana dashboard\nistioctl dashboard grafana\n\n# Access Jaeger dashboard\nistioctl dashboard jaeger\n\n# Access Prometheus\nistioctl dashboard prometheus\n\n# Generate traffic for testing\nfor i in $(seq 1 100); do\n  curl -s -o /dev/null "http://${GATEWAY_URL}/productpage"\ndone\n'})}),"\n",(0,a.jsx)(n.h3,{id:"custom-telemetry-configuration",children:"Custom Telemetry Configuration"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create telemetry-config.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: telemetry.istio.io/v1alpha1\nkind: Telemetry\nmetadata:\n  name: custom-metrics\n  namespace: default\nspec:\n  metrics:\n  - providers:\n    - name: prometheus\n  - overrides:\n    - match:\n        metric: ALL_METRICS\n      tagOverrides:\n        request_protocol:\n          value: "http"\n    - match:\n        metric: REQUEST_COUNT\n      disabled: false\n    - match:\n        metric: REQUEST_DURATION\n      disabled: false\n\n---\napiVersion: telemetry.istio.io/v1alpha1\nkind: Telemetry\nmetadata:\n  name: access-logging\n  namespace: default\nspec:\n  accessLogging:\n  - providers:\n    - name: otel\n  - match:\n      mode: CLIENT\n    disabled: false\n\n---\napiVersion: telemetry.istio.io/v1alpha1\nkind: Telemetry\nmetadata:\n  name: distributed-tracing\n  namespace: default\nspec:\n  tracing:\n  - providers:\n    - name: jaeger\n  - randomSamplingPercentage: 100.0\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-step-6-advanced-istio-features",children:"\ud83d\udcc8 Step 6: Advanced Istio Features"}),"\n",(0,a.jsx)(n.h3,{id:"multi-cluster-service-mesh",children:"Multi-Cluster Service Mesh"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create multi-cluster-config.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: networking.istio.io/v1beta1\nkind: Gateway\nmetadata:\n  name: cross-network-gateway\n  namespace: istio-system\nspec:\n  selector:\n    istio: eastwestgateway\n  servers:\n  - port:\n      number: 15443\n      name: tls\n      protocol: TLS\n    tls:\n      mode: ISTIO_MUTUAL\n    hosts:\n    - "*.local"\n\n---\napiVersion: networking.istio.io/v1alpha3\nkind: ServiceEntry\nmetadata:\n  name: remote-service\n  namespace: default\nspec:\n  hosts:\n  - remote-service.default.global\n  location: MESH_EXTERNAL\n  ports:\n  - number: 80\n    name: http\n    protocol: HTTP\n  resolution: DNS\n  addresses:\n  - 240.0.0.1\n  endpoints:\n  - address: remote-cluster-gateway.istio-system.svc.cluster.local\n    ports:\n      http: 15443\n'})}),"\n",(0,a.jsx)(n.h3,{id:"wasm-extensions",children:"Wasm Extensions"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create wasm-extension.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: extensions.istio.io/v1alpha1\nkind: WasmPlugin\nmetadata:\n  name: custom-header\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  url: oci://registry.example.com/custom-header:latest\n  phase: AUTHN\n  pluginConfig:\n    header_name: "x-custom-header"\n    header_value: "istio-wasm"\n\n---\napiVersion: extensions.istio.io/v1alpha1\nkind: WasmPlugin\nmetadata:\n  name: rate-limiting\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  url: oci://registry.example.com/rate-limiter:latest\n  phase: AUTHZ\n  pluginConfig:\n    max_requests_per_minute: 100\n    burst_size: 10\n'})}),"\n",(0,a.jsx)(n.h3,{id:"external-authorization",children:"External Authorization"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create external-authz.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: external-authz\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: productpage\n  action: CUSTOM\n  provider:\n    name: "external-authz-provider"\n  rules:\n  - to:\n    - operation:\n        methods: ["GET", "POST"]\n\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: external-authz-config\n  namespace: istio-system\ndata:\n  mesh: |\n    extensionProviders:\n    - name: "external-authz-provider"\n      envoyExtAuthzHttp:\n        service: "external-authz.default.svc.cluster.local"\n        port: "8080"\n        includeHeadersInCheck: ["authorization", "x-user-id"]\n        headersToUpstreamOnAllow: ["x-user-id", "x-user-role"]\n        headersToDownstreamOnDeny: ["content-type", "www-authenticate"]\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-step-7-production-best-practices",children:"\ud83d\udee1\ufe0f Step 7: Production Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"resource-management",children:"Resource Management"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create resource-limits.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: istio-system-quota\n  namespace: istio-system\nspec:\n  hard:\n    requests.cpu: "4"\n    requests.memory: 8Gi\n    limits.cpu: "8"\n    limits.memory: 16Gi\n    persistentvolumeclaims: "4"\n\n---\napiVersion: v1\nkind: LimitRange\nmetadata:\n  name: istio-system-limits\n  namespace: istio-system\nspec:\n  limits:\n  - default:\n      cpu: 500m\n      memory: 512Mi\n    defaultRequest:\n      cpu: 100m\n      memory: 128Mi\n    type: Container\n'})}),"\n",(0,a.jsx)(n.h3,{id:"high-availability-configuration",children:"High Availability Configuration"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create ha-config.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: install.istio.io/v1alpha1\nkind: IstioOperator\nmetadata:\n  name: control-plane-ha\nspec:\n  values:\n    pilot:\n      env:\n        EXTERNAL_ISTIOD: false\n        PILOT_ENABLE_WORKLOAD_ENTRY_AUTOREGISTRATION: true\n  components:\n    pilot:\n      k8s:\n        replicaCount: 3\n        resources:\n          requests:\n            cpu: 500m\n            memory: 2048Mi\n          limits:\n            cpu: 1000m\n            memory: 4096Mi\n        hpaSpec:\n          minReplicas: 3\n          maxReplicas: 10\n          metrics:\n          - type: Resource\n            resource:\n              name: cpu\n              target:\n                type: Utilization\n                averageUtilization: 80\n    ingressGateways:\n    - name: istio-ingressgateway\n      enabled: true\n      k8s:\n        replicaCount: 3\n        resources:\n          requests:\n            cpu: 100m\n            memory: 128Mi\n          limits:\n            cpu: 2000m\n            memory: 1024Mi\n        hpaSpec:\n          minReplicas: 3\n          maxReplicas: 10\n        service:\n          type: LoadBalancer\n"})}),"\n",(0,a.jsx)(n.h3,{id:"monitoring-and-alerting",children:"Monitoring and Alerting"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Create monitoring-config.yaml:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ServiceMonitor\nmetadata:\n  name: istio-mesh\n  namespace: istio-system\nspec:\n  selector:\n    matchLabels:\n      app: istiod\n  endpoints:\n  - port: http-monitoring\n    interval: 30s\n    path: /stats/prometheus\n\n---\napiVersion: monitoring.coreos.com/v1\nkind: PrometheusRule\nmetadata:\n  name: istio-alerts\n  namespace: istio-system\nspec:\n  groups:\n  - name: istio.rules\n    rules:\n    - alert: IstioControlPlaneDown\n      expr: up{job="istiod"} == 0\n      for: 5m\n      labels:\n        severity: critical\n      annotations:\n        summary: "Istio control plane is down"\n        description: "Istio control plane has been down for more than 5 minutes"\n\n    - alert: IstioHighRequestLatency\n      expr: histogram_quantile(0.99, rate(istio_request_duration_milliseconds_bucket[5m])) > 1000\n      for: 2m\n      labels:\n        severity: warning\n      annotations:\n        summary: "High request latency in Istio mesh"\n        description: "99th percentile latency is above 1000ms"\n\n    - alert: IstioHighErrorRate\n      expr: rate(istio_requests_total{response_code!~"2.."}[5m]) / rate(istio_requests_total[5m]) > 0.1\n      for: 2m\n      labels:\n        severity: warning\n      annotations:\n        summary: "High error rate in Istio mesh"\n        description: "Error rate is above 10%"\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-common-use-cases",children:"\ud83d\udccb Common Use Cases"}),"\n",(0,a.jsxs)(n.h3,{id:"1-microservices-traffic-management",children:["1. ",(0,a.jsx)(n.strong,{children:"Microservices Traffic Management"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Advanced load balancing and routing"}),"\n",(0,a.jsx)(n.li,{children:"Canary deployments and A/B testing"}),"\n",(0,a.jsx)(n.li,{children:"Circuit breaking and fault injection"}),"\n",(0,a.jsx)(n.li,{children:"Request timeout and retry policies"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"2-security-and-compliance",children:["2. ",(0,a.jsx)(n.strong,{children:"Security and Compliance"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Mutual TLS encryption"}),"\n",(0,a.jsx)(n.li,{children:"Fine-grained authorization policies"}),"\n",(0,a.jsx)(n.li,{children:"JWT authentication and validation"}),"\n",(0,a.jsx)(n.li,{children:"Security policy enforcement"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"3-observability-and-monitoring",children:["3. ",(0,a.jsx)(n.strong,{children:"Observability and Monitoring"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Distributed tracing across services"}),"\n",(0,a.jsx)(n.li,{children:"Metrics collection and visualization"}),"\n",(0,a.jsx)(n.li,{children:"Access logging and audit trails"}),"\n",(0,a.jsx)(n.li,{children:"Service topology visualization"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"4-multi-cloud-and-hybrid-deployments",children:["4. ",(0,a.jsx)(n.strong,{children:"Multi-Cloud and Hybrid Deployments"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Multi-cluster service mesh"}),"\n",(0,a.jsx)(n.li,{children:"Cross-cluster service discovery"}),"\n",(0,a.jsx)(n.li,{children:"Unified security policies"}),"\n",(0,a.jsx)(n.li,{children:"Traffic management across clusters"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-what-youll-achieve",children:"\u2705 What You'll Achieve"}),"\n",(0,a.jsx)(n.p,{children:"After following this guide, you'll have:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83c\udfd7\ufe0f Production-Ready Service Mesh"})," - Complete Istio deployment"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udea6 Advanced Traffic Management"})," - Sophisticated routing and load balancing"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udee1\ufe0f Zero-Trust Security"})," - mTLS and fine-grained authorization"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udcca Comprehensive Observability"})," - Distributed tracing and metrics"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udd04 Automated Operations"})," - Circuit breaking and fault tolerance"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udcc8 Scalable Architecture"})," - High availability and auto-scaling"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83c\udf10 Multi-Cluster Support"})," - Cross-cluster service mesh"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"\ud83d\udc65 Developer Experience"})," - Easy service-to-service communication"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Istio Service Mesh is now configured for your production microservices architecture!"})]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);