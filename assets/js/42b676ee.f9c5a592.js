"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1720],{8453:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>i});var a=r(6540);const t={},o=a.createContext(t);function s(n){const e=a.useContext(o);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),a.createElement(o.Provider,{value:e},n.children)}},9302:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"Infrastructure/terraform","title":"Terraform","description":"Terraform is an open-source infrastructure as code tool that enables you to safely and predictably create, change, and improve infrastructure. Learn how to use Terraform with Docker.","source":"@site/docs/Infrastructure/terraform.md","sourceDirName":"Infrastructure","slug":"/Infrastructure/Terraform","permalink":"/docs/docs/Infrastructure/Terraform","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Infrastructure/terraform.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Terraform","description":"Terraform is an open-source infrastructure as code tool that enables you to safely and predictably create, change, and improve infrastructure. Learn how to use Terraform with Docker.","slug":"/Infrastructure/Terraform","keywords":["Terraform","Infrastructure as Code","IaC","cloud infrastructure","AWS Terraform","Azure Terraform","GCP Terraform","infrastructure automation","DevOps","cloud provisioning"]},"sidebar":"tutorialSidebar","previous":{"title":"Harbor Registry","permalink":"/docs/docs/Infrastructure/Harbor"},"next":{"title":"Ansible","permalink":"/docs/docs/Infrastructure/Ansible"}}');var t=r(4848),o=r(8453);const s={sidebar_position:5,title:"Terraform",description:"Terraform is an open-source infrastructure as code tool that enables you to safely and predictably create, change, and improve infrastructure. Learn how to use Terraform with Docker.",slug:"/Infrastructure/Terraform",keywords:["Terraform","Infrastructure as Code","IaC","cloud infrastructure","AWS Terraform","Azure Terraform","GCP Terraform","infrastructure automation","DevOps","cloud provisioning"]},i="\ud83c\udfd7\ufe0f Terraform - Infrastructure as Code Made Simple",c={},u=[{value:"Set Up Terraform with Docker",id:"set-up-terraform-with-docker",level:2},{value:"Basic Terraform Configuration",id:"basic-terraform-configuration",level:2},{value:"AWS Infrastructure Example",id:"aws-infrastructure-example",level:3},{value:"Multi-Cloud Configuration",id:"multi-cloud-configuration",level:2},{value:"Azure Infrastructure",id:"azure-infrastructure",level:3},{value:"Google Cloud Platform",id:"google-cloud-platform",level:3},{value:"Terraform Modules",id:"terraform-modules",level:2},{value:"Reusable VPC Module",id:"reusable-vpc-module",level:3},{value:"State Management",id:"state-management",level:2},{value:"Remote State with S3",id:"remote-state-with-s3",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"GitHub Actions with Terraform",id:"github-actions-with-terraform",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Environment-Specific Configurations",id:"environment-specific-configurations",level:3},{value:"Security and Compliance",id:"security-and-compliance",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\ufe0f-terraform---infrastructure-as-code-made-simple",children:"\ud83c\udfd7\ufe0f Terraform - Infrastructure as Code Made Simple"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Terraform"})," is an open-source infrastructure as code software tool that enables you to safely and predictably ",(0,t.jsx)(e.strong,{children:"create"}),", ",(0,t.jsx)(e.strong,{children:"change"}),", and ",(0,t.jsx)(e.strong,{children:"improve infrastructure"}),". It codifies cloud APIs into declarative configuration files."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"set-up-terraform-with-docker",children:"Set Up Terraform with Docker"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create a file named docker-compose.yml"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  terraform:\n    image: hashicorp/terraform:1.6\n    container_name: terraform\n    working_dir: /workspace\n    volumes:\n      - ./terraform:/workspace\n      - ~/.aws:/root/.aws:ro\n      - ~/.azure:/root/.azure:ro\n      - ~/.config/gcloud:/root/.config/gcloud:ro\n    environment:\n      - TF_LOG=INFO\n      - TF_LOG_PATH=/workspace/terraform.log\n    command: ["sleep", "infinity"]\n\n  # Optional: Terraform Cloud Agent\n  tfc-agent:\n    image: hashicorp/tfc-agent:latest\n    container_name: tfc-agent\n    environment:\n      - TFC_AGENT_TOKEN=${TFC_AGENT_TOKEN}\n      - TFC_AGENT_NAME=docker-agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n\nvolumes:\n  terraform-data:\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Start Terraform container:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"docker compose up -d terraform\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Execute Terraform commands:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Initialize Terraform\ndocker compose exec terraform terraform init\n\n# Plan infrastructure changes\ndocker compose exec terraform terraform plan\n\n# Apply changes\ndocker compose exec terraform terraform apply\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"basic-terraform-configuration",children:"Basic Terraform Configuration"}),"\n",(0,t.jsx)(e.h3,{id:"aws-infrastructure-example",children:"AWS Infrastructure Example"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/main.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'terraform {\n  required_version = ">= 1.0"\n  required_providers {\n    aws = {\n      source  = "hashicorp/aws"\n      version = "~> 5.0"\n    }\n  }\n  \n  backend "s3" {\n    bucket = "my-terraform-state-bucket"\n    key    = "infrastructure/terraform.tfstate"\n    region = "us-west-2"\n  }\n}\n\nprovider "aws" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment = var.environment\n      Project     = var.project_name\n      ManagedBy   = "Terraform"\n    }\n  }\n}\n\n# VPC Configuration\nresource "aws_vpc" "main" {\n  cidr_block           = var.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n  \n  tags = {\n    Name = "${var.project_name}-vpc"\n  }\n}\n\n# Internet Gateway\nresource "aws_internet_gateway" "main" {\n  vpc_id = aws_vpc.main.id\n  \n  tags = {\n    Name = "${var.project_name}-igw"\n  }\n}\n\n# Public Subnets\nresource "aws_subnet" "public" {\n  count = length(var.availability_zones)\n  \n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = cidrsubnet(var.vpc_cidr, 8, count.index)\n  availability_zone       = var.availability_zones[count.index]\n  map_public_ip_on_launch = true\n  \n  tags = {\n    Name = "${var.project_name}-public-${count.index + 1}"\n    Type = "Public"\n  }\n}\n\n# Private Subnets\nresource "aws_subnet" "private" {\n  count = length(var.availability_zones)\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, count.index + 10)\n  availability_zone = var.availability_zones[count.index]\n  \n  tags = {\n    Name = "${var.project_name}-private-${count.index + 1}"\n    Type = "Private"\n  }\n}\n\n# NAT Gateways\nresource "aws_eip" "nat" {\n  count = length(var.availability_zones)\n  \n  domain = "vpc"\n  \n  tags = {\n    Name = "${var.project_name}-nat-eip-${count.index + 1}"\n  }\n}\n\nresource "aws_nat_gateway" "main" {\n  count = length(var.availability_zones)\n  \n  allocation_id = aws_eip.nat[count.index].id\n  subnet_id     = aws_subnet.public[count.index].id\n  \n  tags = {\n    Name = "${var.project_name}-nat-${count.index + 1}"\n  }\n  \n  depends_on = [aws_internet_gateway.main]\n}\n\n# Route Tables\nresource "aws_route_table" "public" {\n  vpc_id = aws_vpc.main.id\n  \n  route {\n    cidr_block = "0.0.0.0/0"\n    gateway_id = aws_internet_gateway.main.id\n  }\n  \n  tags = {\n    Name = "${var.project_name}-public-rt"\n  }\n}\n\nresource "aws_route_table" "private" {\n  count = length(var.availability_zones)\n  \n  vpc_id = aws_vpc.main.id\n  \n  route {\n    cidr_block     = "0.0.0.0/0"\n    nat_gateway_id = aws_nat_gateway.main[count.index].id\n  }\n  \n  tags = {\n    Name = "${var.project_name}-private-rt-${count.index + 1}"\n  }\n}\n\n# Route Table Associations\nresource "aws_route_table_association" "public" {\n  count = length(aws_subnet.public)\n  \n  subnet_id      = aws_subnet.public[count.index].id\n  route_table_id = aws_route_table.public.id\n}\n\nresource "aws_route_table_association" "private" {\n  count = length(aws_subnet.private)\n  \n  subnet_id      = aws_subnet.private[count.index].id\n  route_table_id = aws_route_table.private[count.index].id\n}\n\n# Security Groups\nresource "aws_security_group" "web" {\n  name_prefix = "${var.project_name}-web-"\n  vpc_id      = aws_vpc.main.id\n  \n  ingress {\n    from_port   = 80\n    to_port     = 80\n    protocol    = "tcp"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n  \n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = "tcp"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n  \n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = "-1"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n  \n  tags = {\n    Name = "${var.project_name}-web-sg"\n  }\n}\n\n# EKS Cluster\nresource "aws_eks_cluster" "main" {\n  name     = "${var.project_name}-cluster"\n  role_arn = aws_iam_role.eks_cluster.arn\n  version  = var.kubernetes_version\n  \n  vpc_config {\n    subnet_ids              = concat(aws_subnet.public[*].id, aws_subnet.private[*].id)\n    endpoint_private_access = true\n    endpoint_public_access  = true\n  }\n  \n  depends_on = [\n    aws_iam_role_policy_attachment.eks_cluster_policy,\n    aws_iam_role_policy_attachment.eks_vpc_resource_controller,\n  ]\n  \n  tags = {\n    Name = "${var.project_name}-eks-cluster"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/variables.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'variable "aws_region" {\n  description = "AWS region"\n  type        = string\n  default     = "us-west-2"\n}\n\nvariable "environment" {\n  description = "Environment name"\n  type        = string\n  default     = "dev"\n}\n\nvariable "project_name" {\n  description = "Project name"\n  type        = string\n  default     = "myproject"\n}\n\nvariable "vpc_cidr" {\n  description = "CIDR block for VPC"\n  type        = string\n  default     = "10.0.0.0/16"\n}\n\nvariable "availability_zones" {\n  description = "Availability zones"\n  type        = list(string)\n  default     = ["us-west-2a", "us-west-2b", "us-west-2c"]\n}\n\nvariable "kubernetes_version" {\n  description = "Kubernetes version"\n  type        = string\n  default     = "1.28"\n}\n\nvariable "instance_types" {\n  description = "EC2 instance types for EKS nodes"\n  type        = list(string)\n  default     = ["t3.medium"]\n}\n\nvariable "desired_capacity" {\n  description = "Desired number of nodes"\n  type        = number\n  default     = 2\n}\n\nvariable "max_capacity" {\n  description = "Maximum number of nodes"\n  type        = number\n  default     = 4\n}\n\nvariable "min_capacity" {\n  description = "Minimum number of nodes"\n  type        = number\n  default     = 1\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/outputs.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'output "vpc_id" {\n  description = "ID of the VPC"\n  value       = aws_vpc.main.id\n}\n\noutput "public_subnet_ids" {\n  description = "IDs of the public subnets"\n  value       = aws_subnet.public[*].id\n}\n\noutput "private_subnet_ids" {\n  description = "IDs of the private subnets"\n  value       = aws_subnet.private[*].id\n}\n\noutput "eks_cluster_endpoint" {\n  description = "Endpoint for EKS control plane"\n  value       = aws_eks_cluster.main.endpoint\n}\n\noutput "eks_cluster_name" {\n  description = "EKS cluster name"\n  value       = aws_eks_cluster.main.name\n}\n\noutput "eks_cluster_arn" {\n  description = "EKS cluster ARN"\n  value       = aws_eks_cluster.main.arn\n}\n\noutput "eks_cluster_certificate_authority_data" {\n  description = "Base64 encoded certificate data required to communicate with the cluster"\n  value       = aws_eks_cluster.main.certificate_authority[0].data\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"multi-cloud-configuration",children:"Multi-Cloud Configuration"}),"\n",(0,t.jsx)(e.h3,{id:"azure-infrastructure",children:"Azure Infrastructure"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/azure.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'terraform {\n  required_providers {\n    azurerm = {\n      source  = "hashicorp/azurerm"\n      version = "~> 3.0"\n    }\n  }\n}\n\nprovider "azurerm" {\n  features {}\n}\n\n# Resource Group\nresource "azurerm_resource_group" "main" {\n  name     = "${var.project_name}-rg"\n  location = var.azure_location\n  \n  tags = {\n    Environment = var.environment\n    Project     = var.project_name\n  }\n}\n\n# Virtual Network\nresource "azurerm_virtual_network" "main" {\n  name                = "${var.project_name}-vnet"\n  address_space       = ["10.0.0.0/16"]\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n  \n  tags = {\n    Environment = var.environment\n  }\n}\n\n# Subnets\nresource "azurerm_subnet" "internal" {\n  name                 = "internal"\n  resource_group_name  = azurerm_resource_group.main.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = ["10.0.2.0/24"]\n}\n\n# AKS Cluster\nresource "azurerm_kubernetes_cluster" "main" {\n  name                = "${var.project_name}-aks"\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n  dns_prefix          = "${var.project_name}-aks"\n  \n  default_node_pool {\n    name       = "default"\n    node_count = var.desired_capacity\n    vm_size    = "Standard_D2_v2"\n  }\n  \n  identity {\n    type = "SystemAssigned"\n  }\n  \n  tags = {\n    Environment = var.environment\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"google-cloud-platform",children:"Google Cloud Platform"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/gcp.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'terraform {\n  required_providers {\n    google = {\n      source  = "hashicorp/google"\n      version = "~> 4.0"\n    }\n  }\n}\n\nprovider "google" {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n}\n\n# VPC Network\nresource "google_compute_network" "main" {\n  name                    = "${var.project_name}-vpc"\n  auto_create_subnetworks = false\n}\n\n# Subnet\nresource "google_compute_subnetwork" "main" {\n  name          = "${var.project_name}-subnet"\n  ip_cidr_range = "10.0.0.0/24"\n  region        = var.gcp_region\n  network       = google_compute_network.main.id\n}\n\n# GKE Cluster\nresource "google_container_cluster" "main" {\n  name     = "${var.project_name}-gke"\n  location = var.gcp_region\n  \n  remove_default_node_pool = true\n  initial_node_count       = 1\n  \n  network    = google_compute_network.main.name\n  subnetwork = google_compute_subnetwork.main.name\n}\n\nresource "google_container_node_pool" "main" {\n  name       = "${var.project_name}-node-pool"\n  location   = var.gcp_region\n  cluster    = google_container_cluster.main.name\n  node_count = var.desired_capacity\n  \n  node_config {\n    preemptible  = true\n    machine_type = "e2-medium"\n    \n    oauth_scopes = [\n      "https://www.googleapis.com/auth/cloud-platform"\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"terraform-modules",children:"Terraform Modules"}),"\n",(0,t.jsx)(e.h3,{id:"reusable-vpc-module",children:"Reusable VPC Module"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create modules/vpc/main.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'variable "project_name" {\n  description = "Project name"\n  type        = string\n}\n\nvariable "vpc_cidr" {\n  description = "CIDR block for VPC"\n  type        = string\n  default     = "10.0.0.0/16"\n}\n\nvariable "availability_zones" {\n  description = "Availability zones"\n  type        = list(string)\n}\n\nvariable "environment" {\n  description = "Environment name"\n  type        = string\n}\n\n# VPC\nresource "aws_vpc" "this" {\n  cidr_block           = var.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n  \n  tags = {\n    Name        = "${var.project_name}-vpc"\n    Environment = var.environment\n  }\n}\n\n# Public Subnets\nresource "aws_subnet" "public" {\n  count = length(var.availability_zones)\n  \n  vpc_id                  = aws_vpc.this.id\n  cidr_block              = cidrsubnet(var.vpc_cidr, 8, count.index)\n  availability_zone       = var.availability_zones[count.index]\n  map_public_ip_on_launch = true\n  \n  tags = {\n    Name        = "${var.project_name}-public-${count.index + 1}"\n    Environment = var.environment\n    Type        = "Public"\n  }\n}\n\n# Outputs\noutput "vpc_id" {\n  value = aws_vpc.this.id\n}\n\noutput "public_subnet_ids" {\n  value = aws_subnet.public[*].id\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Use the module in main.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'module "vpc" {\n  source = "./modules/vpc"\n  \n  project_name       = var.project_name\n  vpc_cidr          = var.vpc_cidr\n  availability_zones = var.availability_zones\n  environment       = var.environment\n}\n\n# Use module outputs\nresource "aws_security_group" "web" {\n  name_prefix = "${var.project_name}-web-"\n  vpc_id      = module.vpc.vpc_id\n  \n  # ... security group rules\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"state-management",children:"State Management"}),"\n",(0,t.jsx)(e.h3,{id:"remote-state-with-s3",children:"Remote State with S3"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/backend.tf:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'terraform {\n  backend "s3" {\n    bucket         = "my-terraform-state-bucket"\n    key            = "infrastructure/terraform.tfstate"\n    region         = "us-west-2"\n    encrypt        = true\n    dynamodb_table = "terraform-state-lock"\n  }\n}\n\n# Create S3 bucket for state\nresource "aws_s3_bucket" "terraform_state" {\n  bucket = "my-terraform-state-bucket"\n  \n  tags = {\n    Name        = "Terraform State Store"\n    Environment = "Global"\n  }\n}\n\nresource "aws_s3_bucket_versioning" "terraform_state" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = "Enabled"\n  }\n}\n\nresource "aws_s3_bucket_server_side_encryption_configuration" "terraform_state" {\n  bucket = aws_s3_bucket.terraform_state.id\n  \n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = "AES256"\n    }\n  }\n}\n\n# DynamoDB table for state locking\nresource "aws_dynamodb_table" "terraform_state_lock" {\n  name           = "terraform-state-lock"\n  billing_mode   = "PAY_PER_REQUEST"\n  hash_key       = "LockID"\n  \n  attribute {\n    name = "LockID"\n    type = "S"\n  }\n  \n  tags = {\n    Name        = "Terraform State Lock Table"\n    Environment = "Global"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,t.jsx)(e.h3,{id:"github-actions-with-terraform",children:"GitHub Actions with Terraform"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create .github/workflows/terraform.yml:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"name: Terraform\n\non:\n  push:\n    branches: [ main ]\n    paths: [ 'terraform/**' ]\n  pull_request:\n    branches: [ main ]\n    paths: [ 'terraform/**' ]\n\nenv:\n  TF_VERSION: 1.6.0\n  AWS_REGION: us-west-2\n\njobs:\n  terraform:\n    name: Terraform\n    runs-on: ubuntu-latest\n    \n    defaults:\n      run:\n        working-directory: terraform\n    \n    steps:\n    - name: Checkout\n      uses: actions/checkout@v3\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v2\n      with:\n        terraform_version: ${{ env.TF_VERSION }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v2\n      with:\n        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: ${{ env.AWS_REGION }}\n    \n    - name: Terraform Format\n      id: fmt\n      run: terraform fmt -check\n      continue-on-error: true\n    \n    - name: Terraform Init\n      id: init\n      run: terraform init\n    \n    - name: Terraform Validate\n      id: validate\n      run: terraform validate -no-color\n    \n    - name: Terraform Plan\n      id: plan\n      if: github.event_name == 'pull_request'\n      run: terraform plan -no-color -input=false\n      continue-on-error: true\n    \n    - name: Update Pull Request\n      uses: actions/github-script@v6\n      if: github.event_name == 'pull_request'\n      env:\n        PLAN: \"terraform\\n${{ steps.plan.outputs.stdout }}\"\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        script: |\n          const output = `#### Terraform Format and Style \ud83d\udd8c\\`${{ steps.fmt.outcome }}\\`\n          #### Terraform Initialization \u2699\ufe0f\\`${{ steps.init.outcome }}\\`\n          #### Terraform Validation \ud83e\udd16\\`${{ steps.validate.outcome }}\\`\n          #### Terraform Plan \ud83d\udcd6\\`${{ steps.plan.outcome }}\\`\n          \n          <details><summary>Show Plan</summary>\n          \n          \\`\\`\\`\\n\n          ${process.env.PLAN}\n          \\`\\`\\`\n          \n          </details>\n          \n          *Pushed by: @${{ github.actor }}, Action: \\`${{ github.event_name }}\\`*`;\n          \n          github.rest.issues.createComment({\n            issue_number: context.issue.number,\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            body: output\n          })\n    \n    - name: Terraform Plan Status\n      if: steps.plan.outcome == 'failure'\n      run: exit 1\n    \n    - name: Terraform Apply\n      if: github.ref == 'refs/heads/main' && github.event_name == 'push'\n      run: terraform apply -auto-approve -input=false\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"environment-specific-configurations",children:"Environment-Specific Configurations"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/environments/dev/terraform.tfvars:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'environment = "dev"\nproject_name = "myproject"\naws_region = "us-west-2"\nvpc_cidr = "10.0.0.0/16"\navailability_zones = ["us-west-2a", "us-west-2b"]\ndesired_capacity = 1\nmax_capacity = 2\nmin_capacity = 1\ninstance_types = ["t3.small"]\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Create terraform/environments/prod/terraform.tfvars:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'environment = "prod"\nproject_name = "myproject"\naws_region = "us-west-2"\nvpc_cidr = "10.1.0.0/16"\navailability_zones = ["us-west-2a", "us-west-2b", "us-west-2c"]\ndesired_capacity = 3\nmax_capacity = 10\nmin_capacity = 3\ninstance_types = ["t3.medium", "t3.large"]\n'})}),"\n",(0,t.jsx)(e.h3,{id:"security-and-compliance",children:"Security and Compliance"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'# Data sources for security\ndata "aws_caller_identity" "current" {}\ndata "aws_region" "current" {}\n\n# KMS key for encryption\nresource "aws_kms_key" "main" {\n  description             = "${var.project_name} KMS key"\n  deletion_window_in_days = 7\n  \n  tags = {\n    Name = "${var.project_name}-kms-key"\n  }\n}\n\n# S3 bucket with encryption and versioning\nresource "aws_s3_bucket" "secure" {\n  bucket = "${var.project_name}-secure-bucket"\n  \n  tags = {\n    Name = "${var.project_name}-secure-bucket"\n  }\n}\n\nresource "aws_s3_bucket_encryption" "secure" {\n  bucket = aws_s3_bucket.secure.id\n  \n  server_side_encryption_configuration {\n    rule {\n      apply_server_side_encryption_by_default {\n        kms_master_key_id = aws_kms_key.main.arn\n        sse_algorithm     = "aws:kms"\n      }\n    }\n  }\n}\n\nresource "aws_s3_bucket_public_access_block" "secure" {\n  bucket = aws_s3_bucket.secure.id\n  \n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-Cloud Infrastructure"}),": AWS, Azure, GCP resource provisioning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Kubernetes Clusters"}),": EKS, AKS, GKE cluster management"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Network Infrastructure"}),": VPCs, subnets, security groups, load balancers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Database Infrastructure"}),": RDS, DynamoDB, managed database services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"CI/CD Infrastructure"}),": Build agents, artifact storage, deployment pipelines"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u2705 Terraform is now configured for comprehensive infrastructure as code management!"})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}}}]);