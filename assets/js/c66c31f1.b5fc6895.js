"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6066],{8251:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"CI-CD/CI/aws-codebuild","title":"AWS CodeBuild","description":"AWS CodeBuild is a fully managed continuous integration service that compiles source code, runs tests, and produces software packages. Learn how to set up CodeBuild for CI/CD pipelines.","source":"@site/docs/CI-CD/CI/aws-codebuild.md","sourceDirName":"CI-CD/CI","slug":"/CI-CD/AWSCodeBuild","permalink":"/docs/docs/CI-CD/AWSCodeBuild","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CI-CD/CI/aws-codebuild.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"AWS CodeBuild","description":"AWS CodeBuild is a fully managed continuous integration service that compiles source code, runs tests, and produces software packages. Learn how to set up CodeBuild for CI/CD pipelines.","slug":"/CI-CD/AWSCodeBuild","keywords":["AWS CodeBuild","AWS CI/CD","continuous integration","build automation","AWS DevOps","serverless builds","container builds","deployment pipeline","AWS CodePipeline","cloud builds"]},"sidebar":"tutorialSidebar","previous":{"title":"Google Cloud Build","permalink":"/docs/docs/CI-CD/CloudBuild"},"next":{"title":"CodeArts (Huawei Cloud)","permalink":"/docs/docs/CICD/CodeArts"}}');var s=o(4848),a=o(8453);const t={sidebar_position:9,title:"AWS CodeBuild",description:"AWS CodeBuild is a fully managed continuous integration service that compiles source code, runs tests, and produces software packages. Learn how to set up CodeBuild for CI/CD pipelines.",slug:"/CI-CD/AWSCodeBuild",keywords:["AWS CodeBuild","AWS CI/CD","continuous integration","build automation","AWS DevOps","serverless builds","container builds","deployment pipeline","AWS CodePipeline","cloud builds"]},r="\ud83c\udfd7\ufe0f AWS CodeBuild - Fully Managed CI Service",c={},l=[{value:"Set Up AWS CodeBuild",id:"set-up-aws-codebuild",level:2},{value:"Basic Build Specification",id:"basic-build-specification",level:3},{value:"Multi-Stage Build",id:"multi-stage-build",level:3},{value:"Terraform Configuration",id:"terraform-configuration",level:2},{value:"CodeBuild Project",id:"codebuild-project",level:3},{value:"CodePipeline Integration",id:"codepipeline-integration",level:2},{value:"Complete CI/CD Pipeline",id:"complete-cicd-pipeline",level:3},{value:"Custom Build Images",id:"custom-build-images",level:2},{value:"Custom Docker Image for Builds",id:"custom-docker-image-for-builds",level:3},{value:"Build and Push Custom Image",id:"build-and-push-custom-image",level:3},{value:"Monitoring and Notifications",id:"monitoring-and-notifications",level:2},{value:"CloudWatch Alarms",id:"cloudwatch-alarms",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\ufe0f-aws-codebuild---fully-managed-ci-service",children:"\ud83c\udfd7\ufe0f AWS CodeBuild - Fully Managed CI Service"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"AWS CodeBuild"})," is a ",(0,s.jsx)(e.strong,{children:"fully managed continuous integration service"})," that compiles source code, runs tests, and produces software packages that are ready to deploy. It scales continuously and processes multiple builds concurrently."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"set-up-aws-codebuild",children:"Set Up AWS CodeBuild"}),"\n",(0,s.jsx)(e.h3,{id:"basic-build-specification",children:"Basic Build Specification"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create buildspec.yml:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 0.2\n\nphases:\n  install:\n    runtime-versions:\n      nodejs: 18\n      python: 3.11\n    commands:\n      - echo "Installing dependencies..."\n      - npm install -g aws-cli\n      - pip install --upgrade pip\n\n  pre_build:\n    commands:\n      - echo "Pre-build phase started on `date`"\n      - echo "Logging in to Amazon ECR..."\n      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com\n      - REPOSITORY_URI=$AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME\n      - COMMIT_HASH=$(echo $CODEBUILD_RESOLVED_SOURCE_VERSION | cut -c 1-7)\n      - IMAGE_TAG=${COMMIT_HASH:=latest}\n\n  build:\n    commands:\n      - echo "Build started on `date`"\n      - echo "Installing application dependencies..."\n      - npm ci\n      - echo "Running tests..."\n      - npm test\n      - echo "Building the Docker image..."\n      - docker build -t $REPOSITORY_URI:latest .\n      - docker tag $REPOSITORY_URI:latest $REPOSITORY_URI:$IMAGE_TAG\n\n  post_build:\n    commands:\n      - echo "Build completed on `date`"\n      - echo "Pushing the Docker images..."\n      - docker push $REPOSITORY_URI:latest\n      - docker push $REPOSITORY_URI:$IMAGE_TAG\n      - echo "Writing image definitions file..."\n      - printf \'[{"name":"myapp","imageUri":"%s"}]\' $REPOSITORY_URI:$IMAGE_TAG > imagedefinitions.json\n\nartifacts:\n  files:\n    - imagedefinitions.json\n    - \'**/*\'\n  base-directory: \'.\'\n\ncache:\n  paths:\n    - \'/root/.npm/**/*\'\n    - \'node_modules/**/*\'\n'})}),"\n",(0,s.jsx)(e.h3,{id:"multi-stage-build",children:"Multi-Stage Build"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create buildspec-advanced.yml:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: 0.2\n\nenv:\n  variables:\n    NODE_ENV: production\n  parameter-store:\n    DATABASE_URL: /myapp/database-url\n    API_KEY: /myapp/api-key\n  secrets-manager:\n    DOCKER_HUB_PASSWORD: prod/docker:password\n\nphases:\n  install:\n    runtime-versions:\n      nodejs: 18\n      python: 3.11\n      docker: 20\n    commands:\n      - echo "Installing build tools..."\n      - curl -o kubectl https://amazon-eks.s3.us-west-2.amazonaws.com/1.21.2/2021-07-05/bin/linux/amd64/kubectl\n      - chmod +x ./kubectl\n      - mv ./kubectl /usr/local/bin\n      - curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n  pre_build:\n    commands:\n      - echo "Pre-build phase started on `date`"\n      - echo "Logging in to Amazon ECR..."\n      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com\n      \n      # Set up variables\n      - REPOSITORY_URI=$AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME\n      - COMMIT_HASH=$(echo $CODEBUILD_RESOLVED_SOURCE_VERSION | cut -c 1-7)\n      - IMAGE_TAG=${COMMIT_HASH:=latest}\n      - BUILD_NUMBER=$CODEBUILD_BUILD_NUMBER\n      \n      # Install dependencies\n      - echo "Installing frontend dependencies..."\n      - cd frontend && npm ci && cd ..\n      - echo "Installing backend dependencies..."\n      - cd backend && npm ci && cd ..\n\n  build:\n    commands:\n      - echo "Build started on `date`"\n      \n      # Run linting\n      - echo "Running linting..."\n      - cd frontend && npm run lint && cd ..\n      - cd backend && npm run lint && cd ..\n      \n      # Run tests\n      - echo "Running unit tests..."\n      - cd frontend && npm test -- --coverage --watchAll=false && cd ..\n      - cd backend && npm test -- --coverage && cd ..\n      \n      # Security scanning\n      - echo "Running security scans..."\n      - npm audit --audit-level high\n      \n      # Build frontend\n      - echo "Building frontend..."\n      - cd frontend && npm run build && cd ..\n      \n      # Build Docker images\n      - echo "Building Docker images..."\n      - docker build -f frontend/Dockerfile -t $REPOSITORY_URI-frontend:$IMAGE_TAG frontend/\n      - docker build -f backend/Dockerfile -t $REPOSITORY_URI-backend:$IMAGE_TAG backend/\n      \n      # Tag images\n      - docker tag $REPOSITORY_URI-frontend:$IMAGE_TAG $REPOSITORY_URI-frontend:latest\n      - docker tag $REPOSITORY_URI-backend:$IMAGE_TAG $REPOSITORY_URI-backend:latest\n\n  post_build:\n    commands:\n      - echo "Post build started on `date`"\n      \n      # Push images\n      - echo "Pushing Docker images..."\n      - docker push $REPOSITORY_URI-frontend:$IMAGE_TAG\n      - docker push $REPOSITORY_URI-frontend:latest\n      - docker push $REPOSITORY_URI-backend:$IMAGE_TAG\n      - docker push $REPOSITORY_URI-backend:latest\n      \n      # Update Kubernetes manifests\n      - echo "Updating Kubernetes manifests..."\n      - sed -i \'s|IMAGE_TAG|\'$IMAGE_TAG\'|g\' k8s/deployment.yaml\n      - sed -i \'s|REPOSITORY_URI|\'$REPOSITORY_URI\'|g\' k8s/deployment.yaml\n      \n      # Deploy to EKS (if on main branch)\n      - |\n        if [ "$CODEBUILD_WEBHOOK_HEAD_REF" = "refs/heads/main" ]; then\n          echo "Deploying to production EKS cluster..."\n          aws eks update-kubeconfig --region $AWS_DEFAULT_REGION --name production-cluster\n          kubectl apply -f k8s/\n          kubectl set image deployment/myapp-frontend frontend=$REPOSITORY_URI-frontend:$IMAGE_TAG\n          kubectl set image deployment/myapp-backend backend=$REPOSITORY_URI-backend:$IMAGE_TAG\n          kubectl rollout status deployment/myapp-frontend\n          kubectl rollout status deployment/myapp-backend\n        fi\n\nartifacts:\n  files:\n    - \'**/*\'\n  name: myapp-artifacts-$BUILD_NUMBER\n\nreports:\n  jest_reports:\n    files:\n      - \'frontend/coverage/clover.xml\'\n      - \'backend/coverage/clover.xml\'\n    file-format: \'CLOVERXML\'\n  \ncache:\n  paths:\n    - \'/root/.npm/**/*\'\n    - \'frontend/node_modules/**/*\'\n    - \'backend/node_modules/**/*\'\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"terraform-configuration",children:"Terraform Configuration"}),"\n",(0,s.jsx)(e.h3,{id:"codebuild-project",children:"CodeBuild Project"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create terraform/codebuild.tf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-hcl",children:'# IAM Role for CodeBuild\nresource "aws_iam_role" "codebuild_role" {\n  name = "codebuild-myapp-role"\n\n  assume_role_policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Action = "sts:AssumeRole"\n        Effect = "Allow"\n        Principal = {\n          Service = "codebuild.amazonaws.com"\n        }\n      }\n    ]\n  })\n}\n\n# IAM Policy for CodeBuild\nresource "aws_iam_role_policy" "codebuild_policy" {\n  role = aws_iam_role.codebuild_role.name\n\n  policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Effect = "Allow"\n        Action = [\n          "logs:CreateLogGroup",\n          "logs:CreateLogStream",\n          "logs:PutLogEvents"\n        ]\n        Resource = "arn:aws:logs:*:*:*"\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "ecr:BatchCheckLayerAvailability",\n          "ecr:GetDownloadUrlForLayer",\n          "ecr:BatchGetImage",\n          "ecr:GetAuthorizationToken",\n          "ecr:PutImage",\n          "ecr:InitiateLayerUpload",\n          "ecr:UploadLayerPart",\n          "ecr:CompleteLayerUpload"\n        ]\n        Resource = "*"\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "eks:DescribeCluster",\n          "eks:ListClusters"\n        ]\n        Resource = "*"\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "ssm:GetParameters",\n          "ssm:GetParameter"\n        ]\n        Resource = "arn:aws:ssm:*:*:parameter/myapp/*"\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "secretsmanager:GetSecretValue"\n        ]\n        Resource = "arn:aws:secretsmanager:*:*:secret:prod/*"\n      }\n    ]\n  })\n}\n\n# CodeBuild Project\nresource "aws_codebuild_project" "myapp" {\n  name          = "myapp-build"\n  description   = "Build project for MyApp"\n  service_role  = aws_iam_role.codebuild_role.arn\n\n  artifacts {\n    type = "CODEPIPELINE"\n  }\n\n  environment {\n    compute_type                = "BUILD_GENERAL1_MEDIUM"\n    image                      = "aws/codebuild/amazonlinux2-x86_64-standard:4.0"\n    type                       = "LINUX_CONTAINER"\n    image_pull_credentials_type = "CODEBUILD"\n    privileged_mode            = true\n\n    environment_variable {\n      name  = "AWS_DEFAULT_REGION"\n      value = var.aws_region\n    }\n\n    environment_variable {\n      name  = "AWS_ACCOUNT_ID"\n      value = data.aws_caller_identity.current.account_id\n    }\n\n    environment_variable {\n      name  = "IMAGE_REPO_NAME"\n      value = "myapp"\n    }\n  }\n\n  source {\n    type = "CODEPIPELINE"\n    buildspec = "buildspec.yml"\n  }\n\n  cache {\n    type  = "S3"\n    location = "${aws_s3_bucket.codebuild_cache.bucket}/cache"\n  }\n\n  logs_config {\n    cloudwatch_logs {\n      group_name  = "/aws/codebuild/myapp"\n      stream_name = "build-log"\n    }\n\n    s3_logs {\n      status   = "ENABLED"\n      location = "${aws_s3_bucket.codebuild_logs.bucket}/build-logs"\n    }\n  }\n\n  tags = {\n    Environment = var.environment\n    Project     = "myapp"\n  }\n}\n\n# S3 Bucket for build cache\nresource "aws_s3_bucket" "codebuild_cache" {\n  bucket = "myapp-codebuild-cache-${random_string.bucket_suffix.result}"\n}\n\n# S3 Bucket for build logs\nresource "aws_s3_bucket" "codebuild_logs" {\n  bucket = "myapp-codebuild-logs-${random_string.bucket_suffix.result}"\n}\n\nresource "random_string" "bucket_suffix" {\n  length  = 8\n  special = false\n  upper   = false\n}\n\n# ECR Repository\nresource "aws_ecr_repository" "myapp" {\n  name                 = "myapp"\n  image_tag_mutability = "MUTABLE"\n\n  image_scanning_configuration {\n    scan_on_push = true\n  }\n}\n\n# Data sources\ndata "aws_caller_identity" "current" {}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"codepipeline-integration",children:"CodePipeline Integration"}),"\n",(0,s.jsx)(e.h3,{id:"complete-cicd-pipeline",children:"Complete CI/CD Pipeline"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create terraform/codepipeline.tf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-hcl",children:'# S3 Bucket for pipeline artifacts\nresource "aws_s3_bucket" "codepipeline_artifacts" {\n  bucket = "myapp-codepipeline-artifacts-${random_string.bucket_suffix.result}"\n}\n\n# IAM Role for CodePipeline\nresource "aws_iam_role" "codepipeline_role" {\n  name = "codepipeline-myapp-role"\n\n  assume_role_policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Action = "sts:AssumeRole"\n        Effect = "Allow"\n        Principal = {\n          Service = "codepipeline.amazonaws.com"\n        }\n      }\n    ]\n  })\n}\n\n# IAM Policy for CodePipeline\nresource "aws_iam_role_policy" "codepipeline_policy" {\n  name = "codepipeline-policy"\n  role = aws_iam_role.codepipeline_role.id\n\n  policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Effect = "Allow"\n        Action = [\n          "s3:GetBucketVersioning",\n          "s3:GetObject",\n          "s3:GetObjectVersion",\n          "s3:PutObject"\n        ]\n        Resource = [\n          aws_s3_bucket.codepipeline_artifacts.arn,\n          "${aws_s3_bucket.codepipeline_artifacts.arn}/*"\n        ]\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "codebuild:BatchGetBuilds",\n          "codebuild:StartBuild"\n        ]\n        Resource = "*"\n      },\n      {\n        Effect = "Allow"\n        Action = [\n          "ecs:DescribeServices",\n          "ecs:DescribeTaskDefinition",\n          "ecs:DescribeTasks",\n          "ecs:ListTasks",\n          "ecs:RegisterTaskDefinition",\n          "ecs:UpdateService"\n        ]\n        Resource = "*"\n      }\n    ]\n  })\n}\n\n# CodePipeline\nresource "aws_codepipeline" "myapp_pipeline" {\n  name     = "myapp-pipeline"\n  role_arn = aws_iam_role.codepipeline_role.arn\n\n  artifact_store {\n    location = aws_s3_bucket.codepipeline_artifacts.bucket\n    type     = "S3"\n  }\n\n  stage {\n    name = "Source"\n\n    action {\n      name             = "Source"\n      category         = "Source"\n      owner            = "ThirdParty"\n      provider         = "GitHub"\n      version          = "1"\n      output_artifacts = ["source_output"]\n\n      configuration = {\n        Owner      = var.github_owner\n        Repo       = var.github_repo\n        Branch     = "main"\n        OAuthToken = var.github_token\n      }\n    }\n  }\n\n  stage {\n    name = "Build"\n\n    action {\n      name             = "Build"\n      category         = "Build"\n      owner            = "AWS"\n      provider         = "CodeBuild"\n      input_artifacts  = ["source_output"]\n      output_artifacts = ["build_output"]\n      version          = "1"\n\n      configuration = {\n        ProjectName = aws_codebuild_project.myapp.name\n      }\n    }\n  }\n\n  stage {\n    name = "Deploy"\n\n    action {\n      name            = "Deploy"\n      category        = "Deploy"\n      owner           = "AWS"\n      provider        = "ECS"\n      input_artifacts = ["build_output"]\n      version         = "1"\n\n      configuration = {\n        ClusterName = aws_ecs_cluster.main.name\n        ServiceName = aws_ecs_service.myapp.name\n        FileName    = "imagedefinitions.json"\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"custom-build-images",children:"Custom Build Images"}),"\n",(0,s.jsx)(e.h3,{id:"custom-docker-image-for-builds",children:"Custom Docker Image for Builds"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create custom-build-image/Dockerfile:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dockerfile",children:'FROM amazonlinux:2\n\n# Install system dependencies\nRUN yum update -y && \\\n    yum install -y \\\n    git \\\n    wget \\\n    curl \\\n    unzip \\\n    tar \\\n    gzip \\\n    python3 \\\n    python3-pip \\\n    docker\n\n# Install Node.js\nRUN curl -fsSL https://rpm.nodesource.com/setup_18.x | bash - && \\\n    yum install -y nodejs\n\n# Install AWS CLI v2\nRUN curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip" && \\\n    unzip awscliv2.zip && \\\n    ./aws/install && \\\n    rm -rf awscliv2.zip aws/\n\n# Install kubectl\nRUN curl -o kubectl https://amazon-eks.s3.us-west-2.amazonaws.com/1.21.2/2021-07-05/bin/linux/amd64/kubectl && \\\n    chmod +x ./kubectl && \\\n    mv ./kubectl /usr/local/bin\n\n# Install Helm\nRUN curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# Install Terraform\nRUN wget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip && \\\n    unzip terraform_1.6.0_linux_amd64.zip && \\\n    mv terraform /usr/local/bin/ && \\\n    rm terraform_1.6.0_linux_amd64.zip\n\n# Install security tools\nRUN curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n\n# Set working directory\nWORKDIR /codebuild/output\n\n# Install CodeBuild agent\nRUN pip3 install awscli\n'})}),"\n",(0,s.jsx)(e.h3,{id:"build-and-push-custom-image",children:"Build and Push Custom Image"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create build-custom-image.sh:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\nset -e\n\nAWS_REGION="us-west-2"\nAWS_ACCOUNT_ID=$(aws sts get-caller-identity --query Account --output text)\nIMAGE_NAME="custom-codebuild"\nIMAGE_TAG="latest"\n\n# Build the image\necho "Building custom CodeBuild image..."\ndocker build -t $IMAGE_NAME:$IMAGE_TAG custom-build-image/\n\n# Tag for ECR\ndocker tag $IMAGE_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/$IMAGE_NAME:$IMAGE_TAG\n\n# Login to ECR\naws ecr get-login-password --region $AWS_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com\n\n# Create ECR repository if it doesn\'t exist\naws ecr describe-repositories --repository-names $IMAGE_NAME --region $AWS_REGION || \\\naws ecr create-repository --repository-name $IMAGE_NAME --region $AWS_REGION\n\n# Push the image\necho "Pushing image to ECR..."\ndocker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/$IMAGE_NAME:$IMAGE_TAG\n\necho "Custom CodeBuild image pushed successfully!"\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"monitoring-and-notifications",children:"Monitoring and Notifications"}),"\n",(0,s.jsx)(e.h3,{id:"cloudwatch-alarms",children:"CloudWatch Alarms"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"Create terraform/monitoring.tf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-hcl",children:'# CloudWatch Log Group\nresource "aws_cloudwatch_log_group" "codebuild_logs" {\n  name              = "/aws/codebuild/myapp"\n  retention_in_days = 14\n}\n\n# CloudWatch Alarms\nresource "aws_cloudwatch_metric_alarm" "build_failures" {\n  alarm_name          = "codebuild-build-failures"\n  comparison_operator = "GreaterThanThreshold"\n  evaluation_periods  = "2"\n  metric_name         = "FailedBuilds"\n  namespace           = "AWS/CodeBuild"\n  period              = "300"\n  statistic           = "Sum"\n  threshold           = "1"\n  alarm_description   = "This metric monitors CodeBuild build failures"\n  alarm_actions       = [aws_sns_topic.alerts.arn]\n\n  dimensions = {\n    ProjectName = aws_codebuild_project.myapp.name\n  }\n}\n\n# SNS Topic for alerts\nresource "aws_sns_topic" "alerts" {\n  name = "codebuild-alerts"\n}\n\n# SNS Topic Subscription\nresource "aws_sns_topic_subscription" "email_alerts" {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = "email"\n  endpoint  = var.alert_email\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Container Applications"}),": Build and deploy Docker containers to ECS or EKS"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Serverless Applications"}),": Build and deploy Lambda functions"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Multi-Environment Deployments"}),": Automated deployments with approval gates"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Security Integration"}),": Automated security scanning and compliance checks"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Infrastructure as Code"}),": Build and deploy Terraform configurations"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u2705 AWS CodeBuild is now configured for comprehensive CI/CD workflows!"})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>t,x:()=>r});var i=o(6540);const s={},a=i.createContext(s);function t(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);