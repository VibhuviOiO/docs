"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[629],{4212:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Databases/Vector-Database/Use-Case/Hybrid-Search","title":"MongoDB Hybrid Search","description":"Learn how to build a hybrid semantic search system using MongoDB\'s vector search capabilities, SentenceTransformers, and Ollama for AI-powered Q&A generation.","source":"@site/docs/Databases/Vector-Database/Use-Case/Hybrid-Search.md","sourceDirName":"Databases/Vector-Database/Use-Case","slug":"/VectorDB/MongoDB-Hybrid-Search","permalink":"/docs/VectorDB/MongoDB-Hybrid-Search","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Databases/Vector-Database/Use-Case/Hybrid-Search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"MongoDB Hybrid Search","description":"Learn how to build a hybrid semantic search system using MongoDB\'s vector search capabilities, SentenceTransformers, and Ollama for AI-powered Q&A generation.","slug":"/VectorDB/MongoDB-Hybrid-Search","keywords":["MongoDB","hybrid search","semantic search","vector database","natural language question answering","ollama","sentence-transformers","fastapi","retrieval augmented generation","mongodb vector search","open-source vector db","LLM integration"]},"sidebar":"tutorialSidebar","previous":{"title":"Personalized Recommendation","permalink":"/docs/projects/personalized-recommendation-faiss"},"next":{"title":"Restaurant Recommendation App","permalink":"/docs/projects/restaurant-recommender"}}');var t=s(4848),o=s(8453);const a={sidebar_position:5,title:"MongoDB Hybrid Search",description:"Learn how to build a hybrid semantic search system using MongoDB's vector search capabilities, SentenceTransformers, and Ollama for AI-powered Q&A generation.",slug:"/VectorDB/MongoDB-Hybrid-Search",keywords:["MongoDB","hybrid search","semantic search","vector database","natural language question answering","ollama","sentence-transformers","fastapi","retrieval augmented generation","mongodb vector search","open-source vector db","LLM integration"]},c="QA Hybrid Search App with MongoDB, FastAPI, Ollama & React",i={},d=[{value:"\ud83d\uddc2\ufe0f Project Structure",id:"\ufe0f-project-structure",level:2},{value:"Backend (FastAPI)",id:"backend-fastapi",level:3},{value:"Load SQuAD Data",id:"load-squad-data",level:3},{value:"\ud83c\udf10 Frontend (React + Vite)",id:"-frontend-react--vite",level:3},{value:"Pull and run LLaMA3",id:"pull-and-run-llama3",level:3},{value:"\ud83c\udf10 Access Localhost Services",id:"-access-localhost-services",level:3},{value:"\u2705 Result",id:"-result",level:3}];function l(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"qa-hybrid-search-app-with-mongodb-fastapi-ollama--react",children:"QA Hybrid Search App with MongoDB, FastAPI, Ollama & React"})}),"\n",(0,t.jsx)(e.p,{children:"Learn how to build a hybrid semantic search system using MongoDB's vector search capabilities, SentenceTransformers, and Ollama for AI-powered Q&A generation."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\ufe0f-project-structure",children:"\ud83d\uddc2\ufe0f Project Structure"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"qa-hybrid-search/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 app.py\n\u2502   \u251c\u2500\u2500 embed_utils.py\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u2514\u2500\u2500 llm_utils.py\n\u2502   \u251c\u2500\u2500 requirements.txt\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u251c\u2500\u2500 scripts/\n\u2502   \u2502   \u251c\u2500\u2500 load_squad.py\n\u2502   \u2502   \u2514\u2500\u2500 dev-v2.0.json\n\u2502   \u2514\u2500\u2500 wheels/\n\u2502       \u2514\u2500\u2500 nvidia_cudnn_cu12-9.5.1.17-py3-none-manylinux_2_28_x86_64.whl\n\u251c\u2500\u2500 frontend/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 App.css\n\u2502   \u2502   \u251c\u2500\u2500 App.tsx\n\u2502   \u2502   \u251c\u2500\u2500 index.css\n\u2502   \u2502   \u251c\u2500\u2500 main.tsx\n\u2502   \u2502   \u251c\u2500\u2500 vite-env.d.ts\n\u2502   \u2502   \u2514\u2500\u2500 assets/\n\u2502   \u2502       \u2514\u2500\u2500 react.svg\n\u2502   \u251c\u2500\u2500 public/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 package-lock.json\n\u2502   \u251c\u2500\u2500 vite.config.ts\n\u2502   \u251c\u2500\u2500 tsconfig.json\n\u2502   \u251c\u2500\u2500 tsconfig.app.json\n\u2502   \u251c\u2500\u2500 tsconfig.node.json\n\u2502   \u251c\u2500\u2500 eslint.config.js\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u2514\u2500\u2500 nginx.conf\n\u251c\u2500\u2500 docker-compose.yml\n\u2514\u2500\u2500 README.md\n\n\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Create root folder\nmkdir -p qa-hybrid-search && cd qa-hybrid-search\n\n# ---------------------------\n# Backend\n# ---------------------------\nmkdir -p backend/utils backend/scripts backend/wheels\n\n# Backend files\ntouch backend/app.py\ntouch backend/embed_utils.py\ntouch backend/requirements.txt\ntouch backend/Dockerfile\n\n# Backend utils\ntouch backend/utils/llm_utils.py\n\n# Backend scripts\ntouch backend/scripts/load_squad.py\ntouch backend/scripts/dev-v2.0.json\n\n# Backend wheels (placeholder, since real .whl is binary)\ntouch backend/wheels/nvidia_cudnn_cu12-9.5.1.17-py3-none-manylinux_2_28_x86_64.whl\n\n# ---------------------------\n# Frontend\n# ---------------------------\nmkdir -p frontend/src/assets frontend/public\n\n# Frontend main files\ntouch frontend/index.html\ntouch frontend/package.json\ntouch frontend/package-lock.json\ntouch frontend/vite.config.ts\ntouch frontend/tsconfig.json\ntouch frontend/tsconfig.app.json\ntouch frontend/tsconfig.node.json\ntouch frontend/eslint.config.js\ntouch frontend/Dockerfile\ntouch frontend/nginx.conf\n\n# Frontend src files\ntouch frontend/src/App.css\ntouch frontend/src/App.tsx\ntouch frontend/src/index.css\ntouch frontend/src/main.tsx\ntouch frontend/src/vite-env.d.ts\n\n# Frontend asset\ntouch frontend/src/assets/react.svg\n\n# ---------------------------\n# Root level\n# ---------------------------\ntouch docker-compose.yml\ntouch README.md\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"backend-fastapi",children:"Backend (FastAPI)"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/app.py"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-py",children:'import os\nimport numpy as np\nfrom fastapi import FastAPI, Query\nfrom pymongo import MongoClient\nfrom sklearn.metrics.pairwise import cosine_similarity\nfrom embed_utils import embed_text\nfrom dotenv import load_dotenv\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom utils.llm_utils import generate_answer\n\nload_dotenv()\napp = FastAPI()\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=["*"], allow_credentials=True,\n    allow_methods=["*"], allow_headers=["*"],\n)\n\nclient = MongoClient(os.getenv("MONGODB_URL"))\ndb = client["qa_hybrid"]\ncol = db["documents"]\n\n@app.get("/search")\ndef hybrid_search(query: str = Query(...)):\n    vector = embed_text(query)\n    docs = list(col.find({}, {"_id": 1, "question": 1, "answer": 1, "embedding": 1}))\n\n    for doc in docs:\n        doc["score"] = cosine_similarity([vector], [doc["embedding"]])[0][0]\n\n    top_docs = sorted([d for d in docs if d["score"] > 0.3], key=lambda x: x["score"], reverse=True)[:3]\n    generated = generate_answer(query, top_docs)\n\n    return {\n        "query": query,\n        "generated_answer": generated,\n        "results": [\n            {\n                "id": str(doc["_id"]),\n                "question": doc["question"],\n                "answer": doc["answer"],\n                "score": round(doc["score"], 4)\n            } for doc in top_docs\n        ]\n    }\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/embed_utils.py"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from sentence_transformers import SentenceTransformer\nmodel = SentenceTransformer("all-MiniLM-L6-v2")\n\ndef embed_text(text: str):\n    return model.encode(text).tolist()\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/utils/llm_utils.py"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import os\nimport requests\n\nOLLAMA_BASE_URL = os.getenv("OLLAMA_BASE_URL", "http://ollama:11434")\nOLLAMA_MODEL = os.getenv("OLLAMA_MODEL", "llama3")\n\ndef generate_answer(query: str, docs: list) -> str:\n    context = "\\n".join([f"Q: {doc[\'question\']}\\nA: {doc[\'answer\']}" for doc in docs])\n    prompt = f"""Answer the following question based on the context.\n\nContext:\n{context}\n\nQuestion: {query}\nAnswer:"""\n\n    response = requests.post(\n        f"{OLLAMA_BASE_URL}/api/generate",\n        json={"model": OLLAMA_MODEL, "prompt": prompt, "stream": False}\n    )\n    return response.json().get("response", "").strip()\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/scripts/load_squad_data.py"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-py",children:'import json\nfrom pymongo import MongoClient\nfrom sentence_transformers import SentenceTransformer\n\nclient = MongoClient("mongodb+srv://mernuser:mernpass@cluster0.dhlaypm.mongodb.net/")\ndb = client["qa_hybrid"]\ncollection = db["documents"]\nmodel = SentenceTransformer("all-MiniLM-L6-v2")\n\nwith open("scripts/dev-v2.0.json", "r") as f:\n    squad_data = json.load(f)\n\ndocs_to_insert = []\nfor article in squad_data["data"]:\n    for paragraph in article["paragraphs"]:\n        context = paragraph["context"]\n        for qa in paragraph["qas"]:\n            if qa["is_impossible"]:\n                continue\n            question = qa["question"]\n            answer = qa["answers"][0]["text"]\n            embedding = model.encode(question).tolist()\n\n            docs_to_insert.append({\n                "question": question,\n                "answer": answer,\n                "context": context,\n                "embedding": embedding,\n                "source": "squad"\n            })\n\nif docs_to_insert:\n    collection.insert_many(docs_to_insert)\n    print(f"\u2705 Inserted {len(docs_to_insert)} documents")\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"dev-v2.0.json"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{"version": "v2.0", "data": [{"title": "Normans", "paragraphs": [{"qas": [{"question": "In what country is Normandy located?", "id": "56ddde6b9a695914005b9628", "answers": [{"text": "France", "answer_start": 159}, {"text": "France", "answer_start": 159}, {"text": "France", "answer_start": 159}, {"text": "France", "answer_start": 159}], "is_impossible": false}, {"question": "When were the Normans in Normandy?", "id": "56ddde6b9a695914005b9629", "answers": [{"text": "10th and 11th centuries", "answer_start": 94}, {"text": "in the 10th and 11th centuries", "answer_start": 87},\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/requirements.txt"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fastapi\nuvicorn\npymongo\nscikit-learn\nsentence-transformers\npython-dotenv\nrequests\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"backend/Dockerfile"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-Dockerfile",children:'FROM python:3.12-slim\nWORKDIR /app\nCOPY . .\nRUN pip install --no-cache-dir -r requirements.txt\nCMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "8000"]\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"load-squad-data",children:"Load SQuAD Data"}),"\n",(0,t.jsxs)(e.p,{children:["Place ",(0,t.jsx)(e.code,{children:"dev-v2.0.json"})," in ",(0,t.jsx)(e.code,{children:"scripts/"}),", then run:"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"scripts/load_squad.py"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-py",children:'import json\nfrom pymongo import MongoClient\nfrom sentence_transformers import SentenceTransformer\n\nclient = MongoClient("mongodb://mongodb:27017/")\ndb = client["qa_hybrid"]\ncol = db["documents"]\nmodel = SentenceTransformer("all-MiniLM-L6-v2")\n\nwith open("scripts/dev-v2.0.json") as f:\n    squad = json.load(f)\n\ndocs = []\nfor article in squad["data"]:\n    for para in article["paragraphs"]:\n        ctx = para["context"]\n        for qa in para["qas"]:\n            if qa["is_impossible"]: continue\n            q = qa["question"]\n            a = qa["answers"][0]["text"]\n            emb = model.encode(q).tolist()\n            docs.append({\n                "question": q,\n                "answer": a,\n                "context": ctx,\n                "embedding": emb\n            })\n\ncol.insert_many(docs)\nprint(f"\u2705 Inserted {len(docs)} docs")\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"Run it:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"docker-compose run backend python scripts/load_squad.py\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"-frontend-react--vite",children:"\ud83c\udf10 Frontend (React + Vite)"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/src/App.tsx"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:'import { useState } from \'react\'\nimport \'./App.css\'\n\nfunction App() {\n  const [query, setQuery] = useState("")\n  const [response, setResponse] = useState(null)\n\n  const search = async () => {\n    const res = await fetch(`http://localhost:8000/search?query=${encodeURIComponent(query)}`)\n    const data = await res.json()\n    setResponse(data)\n  }\n\n  return (\n    <div className="container">\n      <h1>\ud83d\udd0d QA Hybrid Search</h1>\n      <input value={query} onChange={e => setQuery(e.target.value)} placeholder="Ask your question..." />\n      <button onClick={search}>Search</button>\n      {response && (\n        <>\n          <h3>\ud83e\udde0 Answer: {response.generated_answer}</h3>\n          <ul>\n            {response.results.map((r, i) => (\n              <li key={i}>\n                <strong>Q:</strong> {r.question}<br />\n                <strong>A:</strong> {r.answer}<br />\n                <em>Score:</em> {r.score}\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default App\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/src/main.tsx"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.jsx'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n)\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/src/App.css"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-css",children:".app {\n  font-family: Arial, sans-serif;\n  padding: 2rem;\n  max-width: 600px;\n  margin: auto;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n}\n\nbutton {\n  padding: 10px 20px;\n  font-size: 1rem;\n}\n\n.results .card {\n  background-color: #f8f8f8;\n  border-radius: 10px;\n  padding: 1rem;\n  margin-top: 1rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/src/index.css"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-css",children:":root {\n  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n  font-weight: 400;\n\n  color-scheme: light dark;\n  color: rgba(255, 255, 255, 0.87);\n  background-color: #242424;\n\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\na {\n  font-weight: 500;\n  color: #646cff;\n  text-decoration: inherit;\n}\na:hover {\n  color: #535bf2;\n}\n\nbody {\n  margin: 0;\n  display: flex;\n  place-items: center;\n  min-width: 320px;\n  min-height: 100vh;\n}\n\nh1 {\n  font-size: 3.2em;\n  line-height: 1.1;\n}\n\nbutton {\n  border-radius: 8px;\n  border: 1px solid transparent;\n  padding: 0.6em 1.2em;\n  font-size: 1em;\n  font-weight: 500;\n  font-family: inherit;\n  background-color: #1a1a1a;\n  cursor: pointer;\n  transition: border-color 0.25s;\n}\nbutton:hover {\n  border-color: #646cff;\n}\nbutton:focus,\nbutton:focus-visible {\n  outline: 4px auto -webkit-focus-ring-color;\n}\n\n@media (prefers-color-scheme: light) {\n  :root {\n    color: #213547;\n    background-color: #ffffff;\n  }\n  a:hover {\n    color: #747bff;\n  }\n  button {\n    background-color: #f9f9f9;\n  }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"vite-env.d.ts"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'/// <reference types="vite/client" />\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/index.html"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <head><meta charset="UTF-8" /><title>QA Hybrid Search</title></head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/src/main.jsx"><\/script>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/vite.config.ts"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react-swc'\n\n// https://vite.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n})\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/tsconfig.json"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "files": [],\n  "references": [\n    { "path": "./tsconfig.app.json" },\n    { "path": "./tsconfig.node.json" }\n  ]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/tsconfig.app.json"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",\n    "target": "ES2022",\n    "useDefineForClassFields": true,\n    "lib": ["ES2022", "DOM", "DOM.Iterable"],\n    "module": "ESNext",\n    "skipLibCheck": true,\n\n    /* Bundler mode */\n    "moduleResolution": "bundler",\n    "allowImportingTsExtensions": true,\n    "verbatimModuleSyntax": true,\n    "moduleDetection": "force",\n    "noEmit": true,\n    "jsx": "react-jsx",\n\n    /* Linting */\n    "strict": true,\n    "noUnusedLocals": true,\n    "noUnusedParameters": true,\n    "erasableSyntaxOnly": true,\n    "noFallthroughCasesInSwitch": true,\n    "noUncheckedSideEffectImports": true\n  },\n  "include": ["src"]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/tsconfig.node.json"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",\n    "target": "ES2023",\n    "lib": ["ES2023"],\n    "module": "ESNext",\n    "skipLibCheck": true,\n\n    /* Bundler mode */\n    "moduleResolution": "bundler",\n    "allowImportingTsExtensions": true,\n    "verbatimModuleSyntax": true,\n    "moduleDetection": "force",\n    "noEmit": true,\n\n    /* Linting */\n    "strict": true,\n    "noUnusedLocals": true,\n    "noUnusedParameters": true,\n    "erasableSyntaxOnly": true,\n    "noFallthroughCasesInSwitch": true,\n    "noUncheckedSideEffectImports": true\n  },\n  "include": ["vite.config.ts"]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/eslint.config.js"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import js from '@eslint/js'\nimport globals from 'globals'\nimport reactHooks from 'eslint-plugin-react-hooks'\nimport reactRefresh from 'eslint-plugin-react-refresh'\nimport tseslint from 'typescript-eslint'\nimport { globalIgnores } from 'eslint/config'\n\nexport default tseslint.config([\n  globalIgnores(['dist']),\n  {\n    files: ['**/*.{ts,tsx}'],\n    extends: [\n      js.configs.recommended,\n      tseslint.configs.recommended,\n      reactHooks.configs['recommended-latest'],\n      reactRefresh.configs.vite,\n    ],\n    languageOptions: {\n      ecmaVersion: 2020,\n      globals: globals.browser,\n    },\n  },\n])\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"nginx.conf"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"server {\n  listen 80;\n  server_name localhost;\n\n  root /usr/share/nginx/html;\n  index index.html;\n\n  location / {\n    try_files $uri /index.html;\n  }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/package.json"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "name": "qa-frontend",\n  "version": "1.0.0",\n  "scripts": {\n    "dev": "vite",\n    "build": "vite build",\n    "serve": "vite preview"\n  },\n  "dependencies": {\n    "react": "^18.2.0",\n    "react-dom": "^18.2.0"\n  },\n  "devDependencies": {\n    "vite": "^5.0.0"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"qa-hybrid-search/vite.dev.config.ts"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react-swc'\n\n// https://vite.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n})\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"frontend/Dockerfile"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-dockerfile",children:'FROM node:20-alpine\nWORKDIR /app\nCOPY . .\nRUN npm install && npm run build\nRUN npm install -g serve\nCMD ["serve", "-s", "dist"]\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"qa-hybrid-search/.env"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"MONGODB_URL=mongodb://mongodb:27017\nOLLAMA_BASE_URL=http://ollama:11434\nOLLAMA_MODEL=llama3\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"docker-compose.yml"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'version: "3.9"\n\nservices:\n  backend:\n    build: ./backend\n    ports:\n      - "8000:8000"\n    environment:\n      - MONGODB_URL=${MONGODB_URL}\n      - OLLAMA_BASE_URL=${OLLAMA_BASE_URL}\n      - OLLAMA_MODEL=${OLLAMA_MODEL}\n    volumes:\n      - ./backend:/app\n    depends_on:\n      - mongodb\n      - ollama\n\n  frontend:\n    build: ./frontend\n    ports:\n      - "3000:80"\n    depends_on:\n      - backend\n\n  mongodb:\n    image: mongo\n    ports:\n      - "27017:27017"\n    volumes:\n      - mongodb-data:/data/db\n\n  ollama:\n    image: ollama/ollama\n    ports:\n      - "11434:11434"\n    volumes:\n      - ollama-data:/root/.ollama\n\nvolumes:\n  mongodb-data:\n  ollama-data:\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:"\ud83d\ude80 Run and Test"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"docker compose up --build\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"pull-and-run-llama3",children:"Pull and run LLaMA3"}),"\n",(0,t.jsxs)(e.p,{children:["In a ",(0,t.jsx)(e.strong,{children:"second terminal"}),", run the following command to load the model:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"docker exec -it qa-hybrid-search-ollama-1 ollama run llama3\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["This will pull and load the ",(0,t.jsx)(e.code,{children:"llama3"})," model into memory inside the Ollama container so that the FastAPI backend can query it in real-time for answer generation."]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"-access-localhost-services",children:"\ud83c\udf10 Access Localhost Services"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Component"}),(0,t.jsx)(e.th,{children:"URL"}),(0,t.jsx)(e.th,{children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\ud83e\udde0 Ollama API"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.a,{href:"http://localhost:11434",children:"http://localhost:11434"})}),(0,t.jsx)(e.td,{children:"Ollama LLM API"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u2699\ufe0f FastAPI Docs"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.a,{href:"http://localhost:8000/docs",children:"http://localhost:8000/docs"})}),(0,t.jsx)(e.td,{children:"Swagger/OpenAPI UI"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\ud83d\udcbb Frontend UI"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.a,{href:"http://localhost:3000",children:"http://localhost:3000"})}),(0,t.jsx)(e.td,{children:"User Interface built with React"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\ud83c\udf43 MongoDB"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"mongodb://localhost:27017"})}),(0,t.jsx)(e.td,{children:"MongoDB Connection URI"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"-result",children:"\u2705 Result"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.code,{children:" query :"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:'In what country is Normandy located?"\n'})}),"\n",(0,t.jsx)(e.p,{children:"They get a generated answer and matching context from the vector database:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"Q: In what country is Normandy located?\nA: France\n\nScore: 0.978\n"})}),"\n",(0,t.jsx)(e.hr,{})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>c});var r=s(6540);const t={},o=r.createContext(t);function a(n){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);