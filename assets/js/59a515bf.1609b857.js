"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5449],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var a=s(6540);const t={},i=a.createContext(t);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:n},e.children)}},9884:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"Databases/Time-Series/tdengine","title":"TDengine","description":"TDengine is a high-performance, distributed time-series database designed for IoT, Industrial IoT, and other time-series data applications. It provides SQL-like query language, built-in caching, stream processing, and data subscription features.","source":"@site/docs/Databases/Time-Series/tdengine.md","sourceDirName":"Databases/Time-Series","slug":"/Databases/Time-Series/tdengine","permalink":"/docs/Databases/Time-Series/tdengine","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Databases/Time-Series/tdengine.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HertzBeat","permalink":"/docs/TimeSeries/HertzBeat"},"next":{"title":"Object-Store","permalink":"/docs/category/object-store"}}');var t=s(4848),i=s(8453);const r={},o="TDengine",l={},c=[{value:"Key Features",id:"key-features",level:2},{value:"Installation",id:"installation",level:2},{value:"Docker Installation",id:"docker-installation",level:3},{value:"Native Installation (Ubuntu/Debian)",id:"native-installation-ubuntudebian",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Basic Configuration (<code>/etc/taos/taos.cfg</code>)",id:"basic-configuration-etctaostaoscfg",level:3},{value:"Cluster Configuration",id:"cluster-configuration",level:3},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Connect to TDengine",id:"connect-to-tdengine",level:3},{value:"Database Operations",id:"database-operations",level:3},{value:"Table Operations",id:"table-operations",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Time-Series Queries",id:"time-series-queries",level:3},{value:"Stream Processing",id:"stream-processing",level:3},{value:"Data Subscription",id:"data-subscription",level:3},{value:"Monitoring and Management",id:"monitoring-and-management",level:2},{value:"System Information",id:"system-information",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:3},{value:"Client Libraries",id:"client-libraries",level:2},{value:"Python Example",id:"python-example",level:3},{value:"Node.js Example",id:"nodejs-example",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Schema Design",id:"schema-design",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Data Retention",id:"data-retention",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Grafana Integration",id:"grafana-integration",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:3},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"tdengine",children:"TDengine"})}),"\n",(0,t.jsx)(n.p,{children:"TDengine is a high-performance, distributed time-series database designed for IoT, Industrial IoT, and other time-series data applications. It provides SQL-like query language, built-in caching, stream processing, and data subscription features."}),"\n",(0,t.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High Performance"}),": 10x faster than traditional databases for time-series workloads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SQL Support"}),": Standard SQL with time-series extensions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Built-in Caching"}),": Automatic caching of recent data in memory"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Stream Processing"}),": Real-time data processing and analytics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data Compression"}),": Up to 90% compression ratio"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clustering"}),": Horizontal scaling with automatic sharding"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-tenancy"}),": Database isolation and resource management"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h3,{id:"docker-installation",children:"Docker Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Pull TDengine image\ndocker pull tdengine/tdengine:latest\n\n# Run TDengine container\ndocker run -d \\\n  --name tdengine \\\n  -p 6030:6030 \\\n  -p 6041:6041 \\\n  -p 6043-6049:6043-6049 \\\n  -p 6043-6049:6043-6049/udp \\\n  -v tdengine-data:/var/lib/taos \\\n  tdengine/tdengine:latest\n"})}),"\n",(0,t.jsx)(n.h3,{id:"native-installation-ubuntudebian",children:"Native Installation (Ubuntu/Debian)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Download and install TDengine\nwget https://www.taosdata.com/assets-download/3.0/TDengine-server-3.0.0.0-Linux-x64.tar.gz\ntar -xzf TDengine-server-3.0.0.0-Linux-x64.tar.gz\ncd TDengine-server-3.0.0.0\nsudo ./install.sh\n\n# Start TDengine service\nsudo systemctl start taosd\nsudo systemctl enable taosd\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.h3,{id:"basic-configuration-etctaostaoscfg",children:["Basic Configuration (",(0,t.jsx)(n.code,{children:"/etc/taos/taos.cfg"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# Basic settings\nfirstEp                   localhost:6030\nfqdn                      localhost\nserverPort                6030\nhttpPort                  6041\n\n# Data directory\ndataDir                   /var/lib/taos\n\n# Log settings\nlogDir                    /var/log/taos\nlogLevel                  info\n\n# Memory settings\nblocks                    6\ncache                     16\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cluster-configuration",children:"Cluster Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# Cluster settings\nfirstEp                   node1.example.com:6030\nsecondEp                  node2.example.com:6030\nfqdn                      node1.example.com\nreplica                   3\n\n# Network settings\nrpcMaxTime                300\nshellActivityTimer        3\n"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.h3,{id:"connect-to-tdengine",children:"Connect to TDengine"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Using TDengine CLI\ntaos\n\n# Connect to remote instance\ntaos -h hostname -P port -u username -p password\n"})}),"\n",(0,t.jsx)(n.h3,{id:"database-operations",children:"Database Operations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Create database\nCREATE DATABASE iot_sensors;\n\n-- Use database\nUSE iot_sensors;\n\n-- Show databases\nSHOW DATABASES;\n\n-- Drop database\nDROP DATABASE iot_sensors;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"table-operations",children:"Table Operations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Create super table (template)\nCREATE STABLE sensors (\n    ts TIMESTAMP,\n    temperature FLOAT,\n    humidity FLOAT,\n    pressure FLOAT\n) TAGS (\n    device_id NCHAR(50),\n    location NCHAR(100),\n    type NCHAR(20)\n);\n\n-- Create table from super table\nCREATE TABLE sensor_001 USING sensors TAGS ('device_001', 'Building_A', 'temperature');\n\n-- Insert data\nINSERT INTO sensor_001 VALUES \n    (NOW, 23.5, 65.2, 1013.25),\n    (NOW + 1s, 23.7, 65.0, 1013.30);\n\n-- Batch insert\nINSERT INTO \n    sensor_001 VALUES (NOW, 24.1, 64.8, 1013.35)\n    sensor_002 VALUES (NOW, 22.9, 66.1, 1013.20);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,t.jsx)(n.h3,{id:"time-series-queries",children:"Time-Series Queries"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Time range queries\nSELECT * FROM sensors \nWHERE ts >= '2024-01-01 00:00:00' \n  AND ts < '2024-01-02 00:00:00';\n\n-- Aggregation functions\nSELECT AVG(temperature), MAX(humidity), MIN(pressure)\nFROM sensors \nWHERE ts >= NOW - 1h\nINTERVAL(10m);\n\n-- Downsampling\nSELECT FIRST(temperature), LAST(temperature), AVG(temperature)\nFROM sensors \nWHERE ts >= NOW - 1d\nINTERVAL(1h) FILL(LINEAR);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stream-processing",children:"Stream Processing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Create stream\nCREATE STREAM temp_alerts AS\nSELECT ts, device_id, temperature\nFROM sensors\nWHERE temperature > 30.0;\n\n-- Show streams\nSHOW STREAMS;\n\n-- Drop stream\nDROP STREAM temp_alerts;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"data-subscription",children:"Data Subscription"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Create topic\nCREATE TOPIC sensor_topic AS SELECT * FROM sensors;\n\n-- Show topics\nSHOW TOPICS;\n\n-- Consumer example (using TDengine connector)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-and-management",children:"Monitoring and Management"}),"\n",(0,t.jsx)(n.h3,{id:"system-information",children:"System Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Show server status\nSHOW VARIABLES;\n\n-- Show connections\nSHOW CONNECTIONS;\n\n-- Show queries\nSHOW QUERIES;\n\n-- Show consumers\nSHOW CONSUMERS;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Database statistics\nSELECT DATABASE(), COUNT(*) FROM sensors;\n\n-- Table information\nDESCRIBE sensors;\n\n-- Show table distribution\nSHOW TABLE DISTRIBUTED sensors;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"client-libraries",children:"Client Libraries"}),"\n",(0,t.jsx)(n.h3,{id:"python-example",children:"Python Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import taos\n\n# Connect to TDengine\nconn = taos.connect(\n    host='localhost',\n    user='root',\n    password='taosdata',\n    database='iot_sensors'\n)\n\n# Execute query\ncursor = conn.cursor()\ncursor.execute(\"SELECT * FROM sensors LIMIT 10\")\n\n# Fetch results\nresults = cursor.fetchall()\nfor row in results:\n    print(row)\n\n# Close connection\ncursor.close()\nconn.close()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nodejs-example",children:"Node.js Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const taos = require('td2.0-connector');\n\n// Create connection\nconst conn = taos.connect({\n  host: 'localhost',\n  user: 'root',\n  password: 'taosdata',\n  database: 'iot_sensors'\n});\n\n// Execute query\nconst cursor = conn.cursor();\ncursor.query('SELECT * FROM sensors LIMIT 10');\n\n// Handle results\ncursor.fetchall((result) => {\n  console.log(result);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"schema-design",children:"Schema Design"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use super tables for similar time-series data"}),"\n",(0,t.jsx)(n.li,{children:"Choose appropriate data types for optimal storage"}),"\n",(0,t.jsx)(n.li,{children:"Design tag schema for efficient filtering"}),"\n",(0,t.jsx)(n.li,{children:"Limit the number of tags (recommended < 128)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Create indexes on frequently queried tags\nCREATE INDEX idx_device ON sensors (device_id);\n\n-- Use appropriate time intervals for aggregation\nSELECT AVG(temperature) FROM sensors \nWHERE ts >= NOW - 1d \nINTERVAL(5m);\n\n-- Optimize batch inserts\nINSERT INTO sensors VALUES \n    ('2024-01-01 10:00:00', 23.5, 65.2, 1013.25, 'dev1', 'room1', 'temp'),\n    ('2024-01-01 10:00:01', 23.6, 65.1, 1013.26, 'dev1', 'room1', 'temp');\n"})}),"\n",(0,t.jsx)(n.h3,{id:"data-retention",children:"Data Retention"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Set data retention policy\nALTER DATABASE iot_sensors KEEP 365;\n\n-- Set cache size\nALTER DATABASE iot_sensors CACHE 32;\n\n-- Set compression\nALTER DATABASE iot_sensors COMP 2;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Connection Issues"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check TDengine service status\nsudo systemctl status taosd\n\n# Check logs\ntail -f /var/log/taos/taosdlog.0\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Performance Issues"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Check system resources\nSHOW VARIABLES;\n\n-- Monitor active queries\nSHOW QUERIES;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Storage Issues"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Check disk usage\ndu -sh /var/lib/taos/\n\n# Clean old data\ntaos -s "DROP DATABASE old_database;"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,t.jsx)(n.h3,{id:"grafana-integration",children:"Grafana Integration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# grafana datasource config\napiVersion: 1\ndatasources:\n  - name: TDengine\n    type: tdengine-datasource\n    url: http://localhost:6041\n    user: root\n    password: taosdata\n    database: iot_sensors\n"})}),"\n",(0,t.jsx)(n.h3,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: tdengine\nspec:\n  serviceName: tdengine\n  replicas: 3\n  selector:\n    matchLabels:\n      app: tdengine\n  template:\n    metadata:\n      labels:\n        app: tdengine\n    spec:\n      containers:\n      - name: tdengine\n        image: tdengine/tdengine:latest\n        ports:\n        - containerPort: 6030\n        - containerPort: 6041\n        volumeMounts:\n        - name: tdengine-data\n          mountPath: /var/lib/taos\n        env:\n        - name: TAOS_FQDN\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n  volumeClaimTemplates:\n  - metadata:\n      name: tdengine-data\n    spec:\n      accessModes: ["ReadWriteOnce"]\n      resources:\n        requests:\n          storage: 100Gi\n'})}),"\n",(0,t.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.tdengine.com/",children:"Official Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/taosdata/TDengine",children:"GitHub Repository"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/taosdata/TDengine/discussions",children:"Community Forum"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/tdengine/tdengine",children:"Docker Hub"}),"## Refer\nences"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.trychroma.com",children:"ChromaDB"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.sbert.net/",children:"SentenceTransformers"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);