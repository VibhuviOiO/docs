<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Infrastructure/bash" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Bash Scripting | Infinite Operations</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vibhuvioio.com/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vibhuvioio.com/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vibhuvioio.com/docs/docs/Infrastructure/Bash"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bash Scripting | Infinite Operations"><meta data-rh="true" name="description" content="Bash is the most widely used Unix shell for automation, system administration, and DevOps workflows across Linux and macOS systems."><meta data-rh="true" property="og:description" content="Bash is the most widely used Unix shell for automation, system administration, and DevOps workflows across Linux and macOS systems."><meta data-rh="true" name="keywords" content="Bash,shell scripting,Linux automation,Unix shell,system administration,DevOps automation,command line,scripting"><link data-rh="true" rel="icon" href="https://jinnabalu.com/assets/img/icons/favicon-194x194.png"><link data-rh="true" rel="canonical" href="https://vibhuvioio.com/docs/docs/Infrastructure/Bash"><link data-rh="true" rel="alternate" href="https://vibhuvioio.com/docs/docs/Infrastructure/Bash" hreflang="en"><link data-rh="true" rel="alternate" href="https://vibhuvioio.com/docs/docs/Infrastructure/Bash" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Infrastructure & Kubernetes","item":"https://vibhuvioio.com/docs/docs/category/infrastructure--kubernetes"},{"@type":"ListItem","position":2,"name":"Bash Scripting","item":"https://vibhuvioio.com/docs/docs/Infrastructure/Bash"}]}</script><link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Infinite Operations RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Infinite Operations Atom Feed"><link rel="stylesheet" href="/docs/assets/css/styles.41acb0d9.css">
<script src="/docs/assets/js/runtime~main.5dc9e6f4.js" defer="defer"></script>
<script src="/docs/assets/js/main.69995eab.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://jinnabalu.com/assets/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="https://jinnabalu.com/assets/img/logo.png" alt="Ops" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://jinnabalu.com/assets/img/logo.png" alt="Ops" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ops</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docs/category/infrastructure--kubernetes">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/docs/category/infrastructure--kubernetes">Infrastructure &amp; Kubernetes</a><button aria-label="Collapse sidebar category &#x27;Infrastructure &amp; Kubernetes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/IngressNginx">Ingress NGINX Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/KubernetesCluster">Kubernetes Cluster Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/CertManager">Cert-Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/Harbor">Harbor Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/Terraform">Terraform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/Ansible">Ansible</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/Packer">HashiCorp Packer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/Istio">Istio Service Mesh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/PowerShell">PowerShell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/docs/Infrastructure/Bash">Bash Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/Infrastructure/nomad">üöÄ HashiCorp Nomad - Simple and Flexible Workload Orchestrator</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/k8s-cluster">K8s Cluster</a><button aria-label="Expand sidebar category &#x27;K8s Cluster&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/databases">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/cicd">CI/CD</a><button aria-label="Expand sidebar category &#x27;CI/CD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/testing--scanning">Testing &amp; Scanning</a><button aria-label="Expand sidebar category &#x27;Testing &amp; Scanning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/build--ml-tools">Build &amp; ML Tools</a><button aria-label="Expand sidebar category &#x27;Build &amp; ML Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/observability--monitoring">Observability &amp; Monitoring</a><button aria-label="Expand sidebar category &#x27;Observability &amp; Monitoring&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/data-processing">Data-Processing</a><button aria-label="Expand sidebar category &#x27;Data-Processing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/security">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/elasticsearch-operation">Elasticsearch Operation</a><button aria-label="Expand sidebar category &#x27;Elasticsearch Operation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/minio">Minio</a><button aria-label="Expand sidebar category &#x27;Minio&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/vector-databases">Vector Databases</a><button aria-label="Expand sidebar category &#x27;Vector Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/container-orchestration">Container-Orchestration</a><button aria-label="Expand sidebar category &#x27;Container-Orchestration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/cert-manager">Cert Manager</a><button aria-label="Expand sidebar category &#x27;Cert Manager&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/docs/category/ingress-nginx">Ingress Nginx</a><button aria-label="Expand sidebar category &#x27;Ingress Nginx&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docs/intro">Infra Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/docs/CreateMongoSecurityKey">mongo</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/docs/category/infrastructure--kubernetes"><span>Infrastructure &amp; Kubernetes</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Bash Scripting</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>üöÄ System Automation with Bash Scripting</h1></header>
<p><strong>Bash (Bourne Again Shell)</strong> is the most widely used <strong>Unix shell</strong> for <strong>automation</strong>, <strong>system administration</strong>, and <strong>DevOps workflows</strong>. Perfect for <strong>Linux/macOS automation</strong>, <strong>CI/CD pipelines</strong>, and <strong>infrastructure management</strong> with powerful <strong>command-line</strong> capabilities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-features">Key Features<a href="#key-features" class="hash-link" aria-label="Direct link to Key Features" title="Direct link to Key Features">‚Äã</a></h2>
<ul>
<li><strong>Universal</strong>: Available on virtually all Linux/Unix systems</li>
<li><strong>Powerful</strong>: Rich set of built-in commands and utilities</li>
<li><strong>Flexible</strong>: Easy text processing and system interaction</li>
<li><strong>Lightweight</strong>: Minimal resource usage</li>
<li><strong>Integration</strong>: Works seamlessly with all Unix tools</li>
<li><strong>Portable</strong>: Scripts run across different Unix-like systems</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use Cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases">‚Äã</a></h2>
<ul>
<li><strong>System Administration</strong>: Server management and maintenance</li>
<li><strong>CI/CD Pipelines</strong>: Build and deployment automation</li>
<li><strong>Infrastructure Automation</strong>: Server provisioning and configuration</li>
<li><strong>Log Processing</strong>: Text parsing and data extraction</li>
<li><strong>Backup Scripts</strong>: Automated backup and recovery</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-prerequisites">üß∞ Prerequisites<a href="#-prerequisites" class="hash-link" aria-label="Direct link to üß∞ Prerequisites" title="Direct link to üß∞ Prerequisites">‚Äã</a></h2>
<ul>
<li><strong>Linux/macOS</strong> system with Bash installed</li>
<li><strong>Basic command-line</strong> knowledge</li>
<li><strong>Text editor</strong> (vim, nano, or VS Code)</li>
<li><strong>Git</strong> for version control (optional)</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-step-1-basic-bash-script-structure">üîß Step 1: Basic Bash Script Structure<a href="#-step-1-basic-bash-script-structure" class="hash-link" aria-label="Direct link to üîß Step 1: Basic Bash Script Structure" title="Direct link to üîß Step 1: Basic Bash Script Structure">‚Äã</a></h2>
<p>Create a system monitoring script <code>system-monitor.sh</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># System Monitoring Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Description: Monitor system resources and generate reports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -euo pipefail  # Exit on error, undefined vars, pipe failures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LOG_FILE=&quot;/var/log/system-monitor.log&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPORT_DIR=&quot;./reports&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATE=$(date &#x27;+%Y-%m-%d_%H-%M-%S&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HOSTNAME=$(hostname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Colors for output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RED=&#x27;\033[0;31m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GREEN=&#x27;\033[0;32m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">YELLOW=&#x27;\033[1;33m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BLUE=&#x27;\033[0;34m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NC=&#x27;\033[0m&#x27; # No Color</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logging function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local level=$1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;) [$level] $*&quot; | tee -a &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Error handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error_exit() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;ERROR&quot; &quot;$1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if running as root for certain operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_root() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ $EUID -eq 0 ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Running as root&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;WARN&quot; &quot;Not running as root - some features may be limited&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># System information gathering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_system_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Gathering system information...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cat &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=== SYSTEM INFORMATION ===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hostname: $HOSTNAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: $(date)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Uptime: $(uptime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kernel: $(uname -r)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OS: $(cat /etc/os-release | grep PRETTY_NAME | cut -d&#x27;&quot;&#x27; -f2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Architecture: $(uname -m)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Memory usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_memory_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Checking memory usage...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== MEMORY USAGE ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    free -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Memory usage percentage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local mem_usage=$(free | grep Mem | awk &#x27;{printf &quot;%.2f&quot;, $3/$2 * 100.0}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (( $(echo &quot;$mem_usage &gt; 80&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}WARNING: High memory usage: ${mem_usage}%${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}Memory usage: ${mem_usage}%${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Disk usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_disk_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Checking disk usage...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== DISK USAGE ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Check for high disk usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while IFS= read -r line; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        usage=$(echo &quot;$line&quot; | awk &#x27;{print $5}&#x27; | sed &#x27;s/%//&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mount=$(echo &quot;$line&quot; | awk &#x27;{print $6}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if [[ &quot;$usage&quot; =~ ^[0-9]+$ ]] &amp;&amp; [ &quot;$usage&quot; -gt 80 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            echo -e &quot;${RED}WARNING: High disk usage on $mount: ${usage}%${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    done &lt; &lt;(df -h | tail -n +2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># CPU usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_cpu_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Checking CPU usage...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== CPU INFORMATION ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lscpu | grep -E &quot;Model name|CPU\(s\)|Thread|Core&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== CPU USAGE ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    top -bn1 | grep &quot;Cpu(s)&quot; | awk &#x27;{print $2}&#x27; | sed &#x27;s/%us,//&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Load average</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local load_avg=$(uptime | awk -F&#x27;load average:&#x27; &#x27;{print $2}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Load Average: $load_avg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Network information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_network_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Checking network information...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== NETWORK INTERFACES ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ip addr show | grep -E &quot;inet |inet6 &quot; | awk &#x27;{print $2}&#x27; | head -10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== NETWORK CONNECTIONS ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ss -tuln | head -10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Service status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_services() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Checking service status...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local services=(&quot;nginx&quot; &quot;apache2&quot; &quot;mysql&quot; &quot;postgresql&quot; &quot;redis&quot; &quot;docker&quot; &quot;ssh&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;=== SERVICE STATUS ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for service in &quot;${services[@]}&quot;; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if systemctl is-active --quiet &quot;$service&quot; 2&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            echo -e &quot;${GREEN}‚úì $service: Running${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif systemctl list-unit-files | grep -q &quot;^$service.service&quot;; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            echo -e &quot;${RED}‚úó $service: Stopped${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            echo -e &quot;${YELLOW}? $service: Not installed${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate HTML report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generate_html_report() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local report_file=&quot;$REPORT_DIR/system-report-$DATE.html&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mkdir -p &quot;$REPORT_DIR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cat &gt; &quot;$report_file&quot; &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;title&gt;System Report - $HOSTNAME&lt;/title&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        body { font-family: Arial, sans-serif; margin: 20px; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        h1, h2 { color: #2c3e50; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .status-ok { color: green; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .status-warning { color: orange; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .status-error { color: red; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h1&gt;System Report - $HOSTNAME&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;p&gt;Generated on: $(date)&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;System Information&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(get_system_info)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;Memory Usage&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(get_memory_info)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;Disk Usage&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(get_disk_info)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;CPU Information&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(get_cpu_info)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;Network Information&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(get_network_info)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;Service Status&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre&gt;$(check_services)&lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;HTML report generated: $report_file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${GREEN}Report saved to: $report_file${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Main execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Starting system monitoring script&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${BLUE}=== SYSTEM MONITORING REPORT ===${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Generated on: $(date)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Hostname: $HOSTNAME&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_system_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_memory_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_disk_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_cpu_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_network_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check_services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Generate HTML report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generate_html_report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;System monitoring completed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Script execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ &quot;${BASH_SOURCE[0]}&quot; == &quot;${0}&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main &quot;$@&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-step-2-docker-management-script">üèóÔ∏è Step 2: Docker Management Script<a href="#Ô∏è-step-2-docker-management-script" class="hash-link" aria-label="Direct link to üèóÔ∏è Step 2: Docker Management Script" title="Direct link to üèóÔ∏è Step 2: Docker Management Script">‚Äã</a></h2>
<p>Create a Docker management script <code>docker-manager.sh</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Docker Management Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -euo pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DOCKER_COMPOSE_FILE=&quot;docker-compose.yml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LOG_FILE=&quot;./docker-manager.log&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Colors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RED=&#x27;\033[0;31m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GREEN=&#x27;\033[0;32m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">YELLOW=&#x27;\033[1;33m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BLUE=&#x27;\033[0;34m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NC=&#x27;\033[0m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;) - $*&quot; | tee -a &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if Docker is installed and running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_docker() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ! command -v docker &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}Error: Docker is not installed${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ! docker info &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}Error: Docker daemon is not running${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${GREEN}‚úì Docker is running${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">list_containers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local show_all=${1:-false}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${BLUE}=== DOCKER CONTAINERS ===${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ &quot;$show_all&quot; == &quot;true&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker ps -a --format &quot;table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.Status}}\t{{.Names}}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker ps --format &quot;table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.Status}}\t{{.Names}}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Container operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start_container() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local container_name=$1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if docker start &quot;$container_name&quot; &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Container &#x27;$container_name&#x27; started${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;Started container: $container_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}‚úó Failed to start container &#x27;$container_name&#x27;${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop_container() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local container_name=$1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if docker stop &quot;$container_name&quot; &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Container &#x27;$container_name&#x27; stopped${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;Stopped container: $container_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}‚úó Failed to stop container &#x27;$container_name&#x27;${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create and run container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create_container() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local image=$1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local name=$2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local port=${3:-&quot;&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local env_vars=${4:-&quot;&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local docker_cmd=&quot;docker run -d --name $name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -n &quot;$port&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker_cmd=&quot;$docker_cmd -p $port&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -n &quot;$env_vars&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker_cmd=&quot;$docker_cmd $env_vars&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker_cmd=&quot;$docker_cmd $image&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Running: $docker_cmd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if eval &quot;$docker_cmd&quot; &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Container &#x27;$name&#x27; created and started${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;Created container: $name from image: $image&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${RED}‚úó Failed to create container &#x27;$name&#x27;${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Docker Compose operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compose_up() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -f &quot;$DOCKER_COMPOSE_FILE&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${BLUE}Starting Docker Compose services...${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker-compose up -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Docker Compose services started${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${YELLOW}Warning: $DOCKER_COMPOSE_FILE not found${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compose_down() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -f &quot;$DOCKER_COMPOSE_FILE&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${BLUE}Stopping Docker Compose services...${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker-compose down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Docker Compose services stopped${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${YELLOW}Warning: $DOCKER_COMPOSE_FILE not found${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># System cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cleanup_docker() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${BLUE}Cleaning up Docker system...${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Remove stopped containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local stopped_containers=$(docker ps -aq --filter &quot;status=exited&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -n &quot;$stopped_containers&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker rm $stopped_containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo -e &quot;${GREEN}‚úì Removed stopped containers${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Remove unused images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker image prune -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${GREEN}‚úì Removed unused images${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Remove unused volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker volume prune -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${GREEN}‚úì Removed unused volumes${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Remove unused networks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker network prune -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${GREEN}‚úì Removed unused networks${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Show Docker system information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">show_system_info() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo -e &quot;${BLUE}=== DOCKER SYSTEM INFO ===${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker system df</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker info | grep -E &quot;Containers|Images|Server Version&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Usage information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cat &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Docker Management Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: $0 [COMMAND] [OPTIONS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list [all]              List running containers (or all with &#x27;all&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start &lt;container&gt;       Start a container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop &lt;container&gt;        Stop a container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    create &lt;image&gt; &lt;name&gt; [port] [env]  Create and run a container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compose-up              Start Docker Compose services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compose-down            Stop Docker Compose services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cleanup                 Clean up unused Docker resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info                    Show Docker system information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    help                    Show this help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Examples:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $0 list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $0 start nginx-container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $0 create nginx:alpine my-nginx &quot;8080:80&quot; &quot;-e ENV=production&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $0 compose-up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $0 cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Main function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check_docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case &quot;${1:-help}&quot; in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        list)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            list_containers &quot;${2:-false}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if [[ -z &quot;${2:-}&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                echo -e &quot;${RED}Error: Container name required${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start_container &quot;$2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stop)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if [[ -z &quot;${2:-}&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                echo -e &quot;${RED}Error: Container name required${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stop_container &quot;$2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        create)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if [[ -z &quot;${2:-}&quot; ]] || [[ -z &quot;${3:-}&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                echo -e &quot;${RED}Error: Image name and container name required${NC}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            create_container &quot;$2&quot; &quot;$3&quot; &quot;${4:-}&quot; &quot;${5:-}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        compose-up)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            compose_up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        compose-down)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            compose_down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cleanup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cleanup_docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            show_system_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        help|*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Execute main function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main &quot;$@&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-step-3-cicd-pipeline-script">üìÅ Step 3: CI/CD Pipeline Script<a href="#-step-3-cicd-pipeline-script" class="hash-link" aria-label="Direct link to üìÅ Step 3: CI/CD Pipeline Script" title="Direct link to üìÅ Step 3: CI/CD Pipeline Script">‚Äã</a></h2>
<p>Create a deployment script <code>deploy.sh</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Deployment Script for CI/CD Pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -euo pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_NAME=&quot;myapp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DOCKER_REGISTRY=&quot;registry.example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DOCKER_IMAGE=&quot;$DOCKER_REGISTRY/$APP_NAME&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPLOY_ENV=&quot;${DEPLOY_ENV:-staging}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_NUMBER=&quot;${BUILD_NUMBER:-$(date +%s)}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HEALTH_CHECK_URL=&quot;http://localhost:8080/health&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Colors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RED=&#x27;\033[0;31m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GREEN=&#x27;\033[0;32m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">YELLOW=&#x27;\033[1;33m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BLUE=&#x27;\033[0;34m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NC=&#x27;\033[0m&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;) [$1] ${*:2}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Error handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error_exit() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;ERROR&quot; &quot;$1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pre-deployment checks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pre_deployment_checks() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Running pre-deployment checks...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Check if Docker is available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ! command -v docker &amp;&gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_exit &quot;Docker is not installed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Check if required environment variables are set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ -z &quot;${DOCKER_REGISTRY_TOKEN:-}&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_exit &quot;DOCKER_REGISTRY_TOKEN environment variable is not set&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Check if application configuration exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ ! -f &quot;config/$DEPLOY_ENV.yml&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_exit &quot;Configuration file for $DEPLOY_ENV environment not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Pre-deployment checks passed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build Docker image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">build_image() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Building Docker image...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local image_tag=&quot;$DOCKER_IMAGE:$BUILD_NUMBER&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local latest_tag=&quot;$DOCKER_IMAGE:latest&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Build image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker build -t &quot;$image_tag&quot; -t &quot;$latest_tag&quot; .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ $? -eq 0 ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Docker image built successfully: $image_tag&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_exit &quot;Failed to build Docker image&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Push to registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Pushing image to registry...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;$DOCKER_REGISTRY_TOKEN&quot; | docker login &quot;$DOCKER_REGISTRY&quot; --username &quot;$DOCKER_REGISTRY_USER&quot; --password-stdin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker push &quot;$image_tag&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker push &quot;$latest_tag&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Image pushed to registry successfully&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Deploy application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deploy_application() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Deploying application to $DEPLOY_ENV environment...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local image_tag=&quot;$DOCKER_IMAGE:$BUILD_NUMBER&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Stop existing container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if docker ps -q --filter &quot;name=$APP_NAME&quot; | grep -q .; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Stopping existing container...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker stop &quot;$APP_NAME&quot; || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker rm &quot;$APP_NAME&quot; || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Start new container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker run -d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --name &quot;$APP_NAME&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --restart unless-stopped \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -p 8080:8080 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -e ENVIRONMENT=&quot;$DEPLOY_ENV&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -e BUILD_NUMBER=&quot;$BUILD_NUMBER&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -v &quot;$(pwd)/config/$DEPLOY_ENV.yml:/app/config.yml:ro&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;$image_tag&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [[ $? -eq 0 ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Application deployed successfully&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_exit &quot;Failed to deploy application&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Health check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">health_check() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Performing health check...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local max_attempts=30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local attempt=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while [[ $attempt -le $max_attempts ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if curl -f -s &quot;$HEALTH_CHECK_URL&quot; &gt; /dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log &quot;INFO&quot; &quot;Health check passed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Health check attempt $attempt/$max_attempts failed, retrying in 10 seconds...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sleep 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ((attempt++))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error_exit &quot;Health check failed after $max_attempts attempts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rollback function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollback() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;WARN&quot; &quot;Rolling back deployment...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local previous_image=&quot;$DOCKER_IMAGE:previous&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Stop current container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker stop &quot;$APP_NAME&quot; || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker rm &quot;$APP_NAME&quot; || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Start previous version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker run -d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --name &quot;$APP_NAME&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --restart unless-stopped \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -p 8080:8080 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -e ENVIRONMENT=&quot;$DEPLOY_ENV&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -v &quot;$(pwd)/config/$DEPLOY_ENV.yml:/app/config.yml:ro&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;$previous_image&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Rollback completed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cleanup old images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cleanup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Cleaning up old Docker images...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Keep only the last 5 images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker images &quot;$DOCKER_IMAGE&quot; --format &quot;{{.Tag}}&quot; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        grep -E &#x27;^[0-9]+$&#x27; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sort -nr | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tail -n +6 | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        xargs -I {} docker rmi &quot;$DOCKER_IMAGE:{}&quot; || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Cleanup completed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Main deployment function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log &quot;INFO&quot; &quot;Starting deployment process for $APP_NAME (Build: $BUILD_NUMBER, Environment: $DEPLOY_ENV)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Tag current image as previous for rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if docker images -q &quot;$DOCKER_IMAGE:latest&quot; | grep -q .; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        docker tag &quot;$DOCKER_IMAGE:latest&quot; &quot;$DOCKER_IMAGE:previous&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pre_deployment_checks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    build_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deploy_application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Wait a moment for the application to start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sleep 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if health_check; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;INFO&quot; &quot;Deployment successful!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log &quot;ERROR&quot; &quot;Deployment failed, initiating rollback...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Handle script arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case &quot;${1:-deploy}&quot; in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deploy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollback)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    health-check)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        health_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cleanup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;Usage: $0 {deploy|rollback|health-check|cleanup}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esac</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-step-4-run-the-scripts">‚ñ∂Ô∏è Step 4: Run the Scripts<a href="#Ô∏è-step-4-run-the-scripts" class="hash-link" aria-label="Direct link to ‚ñ∂Ô∏è Step 4: Run the Scripts" title="Direct link to ‚ñ∂Ô∏è Step 4: Run the Scripts">‚Äã</a></h2>
<p>Make scripts executable and run them:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Make scripts executable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x system-monitor.sh docker-manager.sh deploy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run system monitoring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./system-monitor.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Docker management examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./docker-manager.sh list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./docker-manager.sh create nginx:alpine my-nginx &quot;8080:80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./docker-manager.sh info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Deployment (in CI/CD environment)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DOCKER_REGISTRY_TOKEN=&quot;your-token&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DOCKER_REGISTRY_USER=&quot;your-username&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DEPLOY_ENV=&quot;staging&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./deploy.sh</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-what-youll-see">üîç What You&#x27;ll See<a href="#-what-youll-see" class="hash-link" aria-label="Direct link to üîç What You&#x27;ll See" title="Direct link to üîç What You&#x27;ll See">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-monitor-output">System Monitor Output<a href="#system-monitor-output" class="hash-link" aria-label="Direct link to System Monitor Output" title="Direct link to System Monitor Output">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">=== SYSTEM MONITORING REPORT ===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generated on: 2024-01-15 10:30:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hostname: web-server-01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=== SYSTEM INFORMATION ===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hostname: web-server-01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Mon Jan 15 10:30:00 UTC 2024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Uptime: 10:30:00 up 5 days, 2:15, 1 user, load average: 0.15, 0.10, 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kernel: 5.4.0-74-generic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OS: Ubuntu 20.04.3 LTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Architecture: x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=== MEMORY USAGE ===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              total        used        free      shared  buff/cache   available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mem:           7.8G        2.1G        3.2G        180M        2.5G        5.3G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Swap:          2.0G          0B        2.0G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Memory usage: 26.92%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=== SERVICE STATUS ===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úì nginx: Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úì docker: Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úó mysql: Stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? postgresql: Not installed</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-manager">Docker Manager<a href="#docker-manager" class="hash-link" aria-label="Direct link to Docker Manager" title="Direct link to Docker Manager">‚Äã</a></h3>
<ul>
<li><strong>Container Management</strong>: Start, stop, create containers</li>
<li><strong>System Information</strong>: Resource usage and statistics</li>
<li><strong>Cleanup Operations</strong>: Remove unused resources</li>
<li><strong>Compose Integration</strong>: Manage multi-container applications</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-pipeline">Deployment Pipeline<a href="#deployment-pipeline" class="hash-link" aria-label="Direct link to Deployment Pipeline" title="Direct link to Deployment Pipeline">‚Äã</a></h3>
<ul>
<li><strong>Build Process</strong>: Docker image creation and registry push</li>
<li><strong>Health Checks</strong>: Automated application health verification</li>
<li><strong>Rollback Capability</strong>: Automatic rollback on deployment failure</li>
<li><strong>Cleanup</strong>: Old image and resource cleanup</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pros--cons">Pros &amp; Cons<a href="#pros--cons" class="hash-link" aria-label="Direct link to Pros &amp; Cons" title="Direct link to Pros &amp; Cons">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-pros">‚úÖ Pros<a href="#-pros" class="hash-link" aria-label="Direct link to ‚úÖ Pros" title="Direct link to ‚úÖ Pros">‚Äã</a></h3>
<ul>
<li><strong>Universal</strong>: Available on all Unix-like systems</li>
<li><strong>Lightweight</strong>: Minimal resource usage</li>
<li><strong>Powerful</strong>: Rich ecosystem of command-line tools</li>
<li><strong>Flexible</strong>: Easy text processing and system interaction</li>
<li><strong>Fast</strong>: Direct system calls and efficient execution</li>
<li><strong>Portable</strong>: Scripts work across different Unix systems</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-cons">‚ùå Cons<a href="#-cons" class="hash-link" aria-label="Direct link to ‚ùå Cons" title="Direct link to ‚ùå Cons">‚Äã</a></h3>
<ul>
<li><strong>Platform Limited</strong>: Primarily Unix/Linux systems</li>
<li><strong>Error Prone</strong>: Easy to make mistakes without proper error handling</li>
<li><strong>Limited Data Structures</strong>: Basic variable and array support</li>
<li><strong>Debugging</strong>: Can be challenging to debug complex scripts</li>
<li><strong>Syntax</strong>: Can be cryptic for complex operations</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Bash scripting is essential for <strong>Linux/Unix system administration</strong> and <strong>DevOps automation</strong>. Choose Bash when you need:</p>
<ul>
<li><strong>System-level</strong> automation and administration</li>
<li><strong>CI/CD pipeline</strong> scripts and automation</li>
<li><strong>Text processing</strong> and log analysis</li>
<li><strong>Infrastructure</strong> provisioning and management</li>
<li><strong>Lightweight</strong> automation without additional dependencies</li>
</ul>
<p>Bash remains the backbone of Unix system administration and is indispensable for DevOps workflows on Linux systems.</p>
<p><strong>What You&#x27;ve Achieved:</strong>
‚úÖ Created comprehensive system monitoring scripts<br>
<!-- -->‚úÖ Built Docker container management automation<br>
<!-- -->‚úÖ Implemented CI/CD deployment pipelines<br>
<!-- -->‚úÖ Established error handling and logging practices<br>
<!-- -->‚úÖ Developed production-ready automation scripts</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Infrastructure/bash.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/docs/Infrastructure/PowerShell"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">PowerShell</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/docs/Infrastructure/nomad"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">üöÄ HashiCorp Nomad - Simple and Flexible Workload Orchestrator</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-features" class="table-of-contents__link toc-highlight">Key Features</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use Cases</a></li><li><a href="#-prerequisites" class="table-of-contents__link toc-highlight">üß∞ Prerequisites</a></li><li><a href="#-step-1-basic-bash-script-structure" class="table-of-contents__link toc-highlight">üîß Step 1: Basic Bash Script Structure</a></li><li><a href="#Ô∏è-step-2-docker-management-script" class="table-of-contents__link toc-highlight">üèóÔ∏è Step 2: Docker Management Script</a></li><li><a href="#-step-3-cicd-pipeline-script" class="table-of-contents__link toc-highlight">üìÅ Step 3: CI/CD Pipeline Script</a></li><li><a href="#Ô∏è-step-4-run-the-scripts" class="table-of-contents__link toc-highlight">‚ñ∂Ô∏è Step 4: Run the Scripts</a></li><li><a href="#-what-youll-see" class="table-of-contents__link toc-highlight">üîç What You&#39;ll See</a><ul><li><a href="#system-monitor-output" class="table-of-contents__link toc-highlight">System Monitor Output</a></li><li><a href="#docker-manager" class="table-of-contents__link toc-highlight">Docker Manager</a></li><li><a href="#deployment-pipeline" class="table-of-contents__link toc-highlight">Deployment Pipeline</a></li></ul></li><li><a href="#pros--cons" class="table-of-contents__link toc-highlight">Pros &amp; Cons</a><ul><li><a href="#-pros" class="table-of-contents__link toc-highlight">‚úÖ Pros</a></li><li><a href="#-cons" class="table-of-contents__link toc-highlight">‚ùå Cons</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 </div></div></div></footer></div>
</body>
</html>